# LifterLMS UI Components

UI components for use in LifterLMS and LifterLMS add-ons. This package extends functionality provided by [@wordpress/components](https://github.com/WordPress/gutenberg/tree/master/packages/components), adding additional components specific to the LifterLMS project.

## Usage in a LifterLMS add-on

This package is included in the LifterLMS core plugin as a module and registered using the WordPress scripts dependency API (see [wp_register_script()][https://developer.wordpress.org/reference/functions/wp_register_script/]).

To use components you can add `llms-components` as a dependency to your script and access the module via `window.llms.components`, for example:

```js
const { ButtonGroupControl } = window.llms.components;
```

## LifterLMS Versions

The following table records the module version and which LifterLMS versions it has been included in.

| Module Version | LifterLMS Version |
| -------------- | ----------------- |
| 1.0.0          | 6.0.0             |

## Installation

Install the module as a dependency in your project:

```bash
npm install --save-dev @lifterlms/components`
```

## Changelog

[View the Changelog](./CHANGELOG.md)

## API Docs

<!-- START TOKEN(Autogenerated API docs) -->

### BaseSearchControl

Searchable <select> element powered by a WordPress REST API endpoint.

_Parameters_

-   _args_ `Object`: Component arguments.
-   _args.searchPath_ `string`: Required. API path used to perform the search.
-   _args.onUpdate_ `Function`: Callback function invoked when the value of the select changes. The callback function is passed a single parameter, the new selected value object(s). For multiselects it will be an array of objects. If the select is clearable, the value will be `null` when the select is cleared.
-   _args.selectedValue_ `Array`: The currently selected value(s). If an object is passed, it should contain at least a `label` and `value` key. Can pass IDs as integers and the values will be automatically hydrated.
-   _args.placeholder_ `string`: The placeholder displayed within an empty search control.
-   _args.className_ `string`: HTML class attribute added to the select control.
-   _args.classNamePrefix_ `string`: Prefix added to select control subcomponent classnames. In most circumstances this should not be changed as it is used to style the compontents.
-   _args.searchDebounceDelay_ `number`: Search debounce delay, in milliseconds.
-   _args.additionalSearchArgs_ `Object`: Object of additional query string arguments to use with the API request.
-   _args.label_ `?string`: Search control label, passed to <BaseControl>.
-   _args.id_ `?string`: Search control HTML ID attribute, passed to <BaseControl>.
-   _args.defaultOptions_ `?Object[]`: Array of hydrated objects to preload into the select as options.
-   _args.getSearchArgs_ `?Function`: Function invoked to generate the query string arguments used when fetching results from the API. The callback function is passed the search string.
-   _args.getSearchURL_ `?Function`: Function invoked to create the search URL used to fetch results. The function is passed the `searchPath` and generated query string arguments from `getSearchArgs()`.
-   _args.hydrateValues_ `?Function`: Function invoked to hydrate integer values. The function is passed the currently selected values, the `searchPath`, and an array of cached (and hydrated) objects previously loaded from the server.
-   _args.formatSearchResults_ `?Function`: Function invoked to format results retrieved from the server. The function is passed an array of objects from the server. It should return an array of objects, each containing at least a value and label property.
-   _args.formatSearchResultLabel_ `?Function`: Function invoked to format the display label for a result. The function is passed an object representing a single result and should return a string.
-   _args.formatSearchResultValue_ `?Function`: Function invoked to format the saved value for a result. The function is passed
-   _args.help_ `?string`: BaseControl help text. an object representing a single result and should the value to be stored.
-   _args.selectProps_ `...*`: Any remaining properties are passed to the <Select> component, {@link <https://react-select.com/props#select-props}>.

_Returns_

-   `StyledBaseControl`: The component.

### ButtonGroupControl

Button Group Control component.

Similar to the experimental `<RadioGroup>` component from @wordpress/components but it allows
passing in an array of options.

_Related_

-   BaseControl <https://github.com/WordPress/gutenberg/tree/trunk/packages/components/src/base-control>

_Parameters_

-   _props_ `Object`: Component properties object.
-   _props.label_ `string`: Control label text.
-   _props.help_ `string`: Control help text.
-   _props.className_ `string`: Control element css class name attribute.
-   _props.id_ `string`: Control element ID attribute.
-   _props.onClick_ `Function`: Callback function when a button in the group is clicked.
-   _props.selected_ `string`: The value of the currently selected option.
-   _props.options_ `Object[]`: An array of objects used to create the buttons in the group. Each object should contain at least a "label" and "value" property and can optionally include an "icon" property.

_Returns_

-   `BaseControl`: The rendered component.

### ConfirmButton

A Button component that requires user confirmation before performing the onClick callback function.

When clicked the button's state will change and will display confirmation language. When clicked again
the onClick callback will be executed.

Optionally, after the initial click an "Cancel" button can be displayed adjacent to the initial button. When clicked
the primary button will return to its initial state.

_Parameters_

-   _props_ `Object`: Component properties object.
-   _props.confirmText_ `string`: Button text displayed to confirm the action.
-   _props.processingText_ `string`: Button text displayed while performing the onClick callback.
-   _props.cancelText_ `string`: Button text displayed in the cancel button.
-   _props.allowCancel_ `boolean`: Whether or not cancellation is allowed in the confirmation state.
-   _props.confirmIsDescructive_ `boolean`: If `true`, the <Button> component will be passed `isDestructive` in the confirmation state.
-   _props.processingIsBusy_ `boolean`: If `true`, the <Button> component will be passed `isBusy` in the processing state.
-   _props.onClick_ `Function`: The onClick callback function executed when the button is clicked in the confirmation state.
-   _props.children_ `Object[]`: Child components to render within the button. Only displayed in the default state.
-   _props.btnProps_ `Object`: Properties passed to the <Button> component.

_Returns_

-   `WPElement`: The component.

### CopyButton

A "click to copy" button.

Uses the `useCopyToClipboard()` hook with a <Button> on WP 5.8 & later, otherwise falls back
to the deprecated <ClipboardButton>.

_Parameters_

-   _args_ `Object`: Component arguments.
-   _args.buttonText_ `string`: Text to to display within the button.
-   _args.copyText_ `string`: Text to copy to the clipboard.
-   _args.tooltipText_ `string`: Text to use in the tooltip wrapper around the button.
-   _args.onCopy_ `Function`: Copy success callback function.
-   _args.buttonProps_ `...*`: Remaining properties passed to the underlying <Button> component.

_Returns_

-   `Object`: The copy button fragment.

### DatePickerControl

A datepicker control.

_Parameters_

-   _props_ `Object`: Component properties.
-   _props.label_ `string`: BaseControl label.
-   _props.className_ `string`: BaseControl CSS class names.
-   _props.id_ `string`: BaseControl id.
-   _props.onChange_ `Function`: Callback function when the date changes.
-   _props.isInvalidDate_ `Function`: Callback function which receives a Date object and should return a boolean to signify whether or not the supplied date is valid.
-   _props.currentDate_ `Date|string`: The currently selected date as a Date object or a datetime string that can be passed into the Date constructor.
-   _props.dateFormat_ `string`: The date display format.
-   _props.is12Hour_ `boolean`: Whether or not a 12 hour time clock should be used which allows selecting AM/PM.
-   _props.allowEmpty_ `boolean`: Whether or not to allow an empty value to be selected.
-   _props.emptyValue_ `string`: The text string displayed when an empty value is selected.

_Returns_

-   `BaseControl`: The component.

### DragHandle

Drag handle button component for use in sortable lists

_Parameters_

-   _props_ `Object`: 
-   _props.label_ `string`: Helper text displayed in tooltip.
-   _props.setNodeRef_ `Function`: Reference node setter, passed via dndkit.
-   _props.listeners_ `Array`: Listener array, passed via dndkit.

_Returns_

-   `Button`: Draghandle button component.

### PostSearchControl

Searchable <select> element powered by a WordPress REST API users endpoint.

This component is a wrapper around the <BaseSearchControl> component. It is configured
to search users via the WordPress user REST API endpoint.

_Parameters_

-   _args_ `Object`: Component arguments.
-   _args.postType_ `string`: Post type endpoint.
-   _args.baseSearchPath_ `string`: Base search path used to create the searchPath.
-   _args.searchPath_ `?string`: API path used to perform the search. If passed, will be used instead of the path generated from `args.postType` and `args.baseSearchPath`.
-   _args.placeholder_ `string`: The placeholder displayed within an empty search control.
-   _args.className_ `string`: HTML class attribute added to the select control.
-   _args.formatSearchResultLabel_ `?Function`: Function invoked to format the display label for a result. The function is passed
-   _args.additionalSearchArgs_ `Object`: An object representing a single result and should return a string.
-   _args.baseProps_ `...*`: Any remaining properties are passed to the <BaseSearchControl> component.

_Returns_

-   `BaseSearchControl`: The component.

### SortableList

Component for a rending a sortable list

_Parameters_

-   _props_ `Object`: 
-   _props.ListItem_ `Object`: Component used to display each item in the sortable list.
-   _props.manageState_ `Object`: An object used to manage the state of the items in the list. Should contain 4 keys referencing functions: createItem, deleteItem, updateItem, updateItems.
-   _props.items_ `Object[]`: Array of item objects. Each item _must_ contain an unique `id` property.
-   _props.sortableStrategy_ `Object`: Sortable strategy passed to DndContext.
-   _props.ctxModifiers_ `Array`: Context modifieds, passed to DndContext.
-   _props.dragHandle_ `boolean`: If `true`, flags that the `ListItem` component will provide it's own drag handle and no innate drag functionality is provided.
-   _props.listClassName_ `string`: CSS classname applied to the list wrapper element.
-   _props.themeId_ `string`: The ID of the theme to use.
-   _props.itemClassName_ `string`: CSS classname applied to each ListItem.
-   _props.extraProps_ `Object`: Extra properties passed on to ListItem.

_Returns_

-   `DndContext`: Drag and drop context component.

### UserSearchControl

Searchable <select> element powered by a WordPress REST API users endpoint.

This component is a wrapper around the <BaseSearchControl> component. It is configured
to search users via the WordPress user REST API endpoint.

_Parameters_

-   _args_ `Object`: Component arguments.
-   _args.searchPath_ `string`: Required. API path used to perform the search.
-   _args.placeholder_ `string`: The placeholder displayed within an empty search control.
-   _args.className_ `string`: HTML class attribute added to the select control.
-   _args.formatSearchResultLabel_ `?Function`: Function invoked to format the display label for a result. The function is passed
-   _args.additionalSearchArgs_ `Object`: An object representing a single result and should return a string.
-   _args.baseProps_ `...*`: Any remaining properties are passed to the <BaseSearchControl> component.

_Returns_

-   `BaseSearchControl`: The component.


<!-- END TOKEN(Autogenerated API docs) -->
