function llms_on_voucher_duplicate(e){if(e.length){for(var t=0;t<e.length;t++)jQuery('input[value="'+e[t].code+'"]').css("background-color","rgba(226, 96, 73, 0.6)");alert("Please make sure that there are no duplicate voucher codes.")}else jQuery("#post").submit()}!function(s){var a=[];s(document).ready(function(){var r=!1,o=0;function u(){s(".llms-voucher-delete").unbind("click"),s(".llms-voucher-delete").click(function(e){e.preventDefault();var e=s(this),t=e.data("id");r=!0,t?(a.push(t),s("#delete_ids").val(a.join(","))):o--,e.closest("tr").remove()})}s("#llms_voucher_add_codes").click(function(e){e.preventDefault();var t=s("#llms_voucher_add_quantity").val(),a=s("#llms_voucher_add_uses").val(),n="";if(r=!0,s.isNumeric(t)&&s.isNumeric(a)&&0<parseInt(t)&&0<parseInt(a)){if(50<t)return void alert("You can only generate 50 rows at a time");if(50<(o+=parseInt(t)))return alert("Please save before adding any more codes, limit is 50 at a time"),void(o-=parseInt(t));for(var l=1;l<=parseInt(t);l++)n+='<tr><td></td><td><input type="text" maxlength="20" placeholder="Code" value="'+function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<12;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}()+'" name="llms_voucher_code[]"><input type="hidden" name="llms_voucher_code_id[]" value="0"></td><td><span>0 / </span><input type="text" placeholder="Uses" value="'+a+'" class="llms-voucher-uses" name="llms_voucher_uses[]"></td><td><a href="#" class="llms-voucher-delete">'+delete_icon+"</a></td></tr>"}s("#llms_voucher_tbody").append(n),u()}),u(),s("#llms_voucher_tbody input").change(function(){r=!0}),s("#post").on("submit",function(){return"publish"===s("#publish").attr("name")&&s("<input />").attr("type","hidden").attr("name","publish").attr("value","true").appendTo("#post"),!0}),window.onbeforeunload=function(){return r?"If you leave this page you will lose your unsaved changes.":null},s("input[type=submit][name=publish], input[type=submit][name=save]").click(function(e){var t,a={},n=!1;return s('input[name="llms_voucher_code[]"]').each(function(){var e=s(this).val();a[e]?(s(this).css("background-color","rgba(226, 96, 73, 0.6)"),n=!0):a[e]=!0}),n?alert("Please make sure that there are no duplicate voucher codes."):s("#_llms_voucher_courses").val().length||s("#_llms_voucher_membership").val().length?(r=!1,(t=function(){var e=[];return s('input[name="llms_voucher_code[]"]').each(function(){e.push(s(this).val())}),e}()).length?(t={action:"check_voucher_duplicate",postId:s("#post_ID").val(),codes:t,_ajax_nonce:window.llms.ajax_nonce},new Ajax("post",t,!1).check_voucher_duplicate()):s("#post").submit()):alert("Please select course or membership before saving."),!1})})}(jQuery);
//# sourceMappingURL=../maps/js/llms-metabox-voucher.min.js.map
