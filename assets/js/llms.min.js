var LLMS=window.LLMS||{};!function(t){"use strict";LLMS.Ajax={url:window.ajaxurl||window.llms.ajaxurl,type:"post",data:[],cache:!1,dataType:"json",async:!0,response:[],init:function(e){if(null===e||"object"!=typeof e)return!1;e.url=this.url,e.type="type"in e?e.type:this.type,e.data="data"in e?e.data:this.data,e.cache="cache"in e?e.cache:this.cache,e.dataType="dataType"in e?e.dataType:this.dataType,e.async="async"in e?e.async:this.async,e.data._ajax_nonce=wp_ajax_data.nonce;var s=LLMS.Rest,n=s.get_query_vars();return e.data.post_id="post"in n?n.post:null,!e.data.post_id&&t("input#post_ID").length&&(e.data.post_id=t("input#post_ID").val()),e},call:function(t){var e=this.init(t);return!!e&&(this.request(e),this)},request:function(e){return t.ajax(e),this}},LLMS.Donut=function(e){function s(e){this.settings=t.extend({element:e.element,percent:100},e),this.circle=this.settings.element.find("path"),this.settings.stroke_width=parseInt(this.circle.css("stroke-width")),this.radius=(parseInt(this.settings.element.css("width"))-this.settings.stroke_width)/2,this.angle=-97.5,this.i=Math.round(.75*this.settings.percent),this.first=!0,this.animate=function(){this.timer=setInterval(this.loop.bind(this),10)},this.loop=function(){this.angle+=5,this.angle%=360;var t,e=this.angle/180*Math.PI,s=this.radius+this.settings.stroke_width/2+Math.cos(e)*this.radius,n=this.radius+this.settings.stroke_width/2+Math.sin(e)*this.radius;this.first===!0?(t=this.circle.attr("d")+" M "+s+" "+n,this.first=!1):t=this.circle.attr("d")+" L "+s+" "+n,this.circle.attr("d",t),this.i--,this.i<=0&&clearInterval(this.timer)}}function n(t){var e='<path d="M100,100" />';t.append('<svg preserveAspectRatio="xMidYMid" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>");var n=new s({element:t,percent:t.attr("data-perc")});n.animate()}n(e)},LLMS.Instructors={init:function(){var e=this;t("body").hasClass("wp-admin")||t(".llms-instructors").length&&LLMS.wait_for_matchHeight(function(){e.bind()})},bind:function(){t(".llms-instructors .llms-author").matchHeight()}},LLMS.l10n=LLMS.l10n||{},LLMS.l10n.translate=function(t){var e=this;return e.strings[t]?e.strings[t]:t},LLMS.LessonPreview={$els:null,init:function(){var e=this;this.$locked=t('a[href="#llms-lesson-locked"]'),this.$locked.length&&e.bind(),t(".llms-course-navigation").length&&LLMS.wait_for_matchHeight(function(){e.match_height()})},bind:function(){var e=this;this.$locked.on("click",function(){return!1}),this.$locked.on("mouseenter",function(){var s=t(this).find(".llms-tooltip");if(!s.length){var n=t(this).attr("data-tooltip-msg");n||(n=LLMS.l10n.translate("You do not have permission to access to this content")),s=e.get_tooltip(n),t(this).append(s)}setTimeout(function(){s.addClass("show")},10)}),this.$locked.on("mouseleave",function(){var e=t(this).find(".llms-tooltip");e.removeClass("show")})},match_height:function(){t(".llms-course-navigation .llms-lesson-link").matchHeight()},get_tooltip:function(e){var s=t('<div class="llms-tooltip" />');return s.append('<div class="llms-tooltip-content">'+e+"</div>"),s}},LLMS.Loops={init:function(){var e=this;t(".llms-loop").length&&LLMS.wait_for_matchHeight(function(){e.match_height()})},match_height:function(){t(".llms-loop-item .llms-loop-item-content").matchHeight()}},LLMS.MB_Course_Outline={init:function(){window.llms.post&&"course"===window.llms.post.post_type&&this.bind()},alreadySubmitted:!1,bind:function(){function e(){t("#llms-outline-add").removeClass("clicked"),t("#llms-outline-add").addClass("bt"),t("#llms-outline-menu").removeClass("fade-in"),t("#triangle").show()}var s=this;t(document).ready(function(){s.addSectionRowFunctionality(),s.addLessonRowFunctionality()}),t(".llms-modal-cancel").click(function(e){e.preventDefault(),t(window).trigger("build")}),t(document).ready(function(){t(".llms-chosen-select").chosen({width:"100%"})}),t(".tab-link").on("click",function(){t("#content_ifr").css("height","300px"),t("#excerpt_ifr").css("height","300px")}),t("#_has_prerequisite").attr("checked")?(t(".llms-prereq-top").addClass("top"),t(".llms-prereq-bottom").show()):t(".llms-prereq-bottom").hide(),t("#_has_prerequisite").change(function(){t("#_has_prerequisite").attr("checked")?(t(".llms-prereq-top").addClass("top"),t(".llms-prereq-bottom").show()):(t(".llms-prereq-top").removeClass("top"),t(".llms-prereq-bottom").hide())}),this.toggle_custom_single_price_field(),t("a.llms-modal").click(function(){t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),closed:function(){s.alreadySubmitted=!1}})}),t("a.llms-modal-new-lesson-link").click(function(){t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),open:function(){s.getSections(),t("#llms_create_lesson").find('input[value="Create Lesson"]').removeProp("disabled")},closed:function(){s.alreadySubmitted=!1}})}),t("a.llms-modal-existing-lesson-link").click(function(){t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),open:function(){s.getSections()},closed:function(){s.alreadySubmitted=!1}})}),t(window).click(function(s){"llms-outline-add"!==s.target.id&&t("#llms-outline-add").hasClass("clicked")&&(t("#llms-outline-menu").css("display","none"),e())}),t(window).scroll(function(){if(t("#llms-outline-add").hasClass("clicked")){t("#triangle").hide();var e=t("#llms-outline-menu"),s=-t("#llms-outline-add").offset().top-81+t(window).scrollTop()+t(window).height()/2;e.css("top",s)}}),t("#llms-outline-add").click(function(e){e.preventDefault();var s=t("#llms-outline-menu");if(t(this).hasClass("bt")){if(t(this).offset().top-t(window).scrollTop()<200)s.css("top","43px"),t(window).width()<851&&(s.find("#triangle").css("left","164px"),s.css("top","57px"),s.css("left","-138px"),s.css("bottom","15px"));else if(s.css("top",""),t(window).width()<851){s.css("top","-54px");var n=t(window).width()<400?-Math.abs(t(window).width()/2):-242;n+="px",s.css("left",n),s.css("bottom","15px"),s.find("#triangle").css("left","227px")}t(this).removeClass("bt"),t(this).addClass("clicked"),s.addClass("fade-in"),s.css("display","block")}else t(this).removeClass("clicked"),t(this).addClass("bt"),s.removeClass("fade-in"),s.css("display","none"),s.find("#triangle").show()}),t("#tooltip_menu a").click(function(e){var s=t("#llms-outline-menu");s.removeClass("fade-in"),s.css("display","none"),e.preventDefault()}),t("a.tooltip").click(function(t){t.preventDefault()}),t("#llms_create_section").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.alreadySubmitted===!1&&(s.alreadySubmitted=!0,s.createSection(n))}),t("#llms_create_lesson").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.alreadySubmitted===!1&&(s.alreadySubmitted=!0,s.createLesson(n))}),t("#llms_add_existing_lesson").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.alreadySubmitted===!1&&(s.alreadySubmitted=!0,s.addExistingLesson(n))}),t("#llms_edit_lesson").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.updateLesson(n)}),t("#llms_edit_section").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.updateSection(n)}),t("#llms_delete_section").on("submit",function(e){e.preventDefault();var n={};t.each(t(this).serializeArray(),function(t,e){n[e.name]=e.value}),s.deleteSection(n)})},toggle_custom_single_price_field:function(){t("#_is_custom_single_price").attr("checked")?(t(".llms-custom-single-price-top").removeClass("bottom"),t(".llms-custom-single-price-top").addClass("top"),t(".llms-custom-single-price-bottom").show()):t(".llms-custom-single-price-bottom").hide(),t("#_is_custom_single_price").change(function(){t("#_is_custom_single_price").attr("checked")?(t(".llms-custom-single-price-top").removeClass("bottom"),t(".llms-custom-single-price-top").addClass("top"),t(".llms-custom-single-price-bottom").show()):(t(".llms-custom-single-price-top").removeClass("top"),t(".llms-custom-single-price-top").addClass("bottom"),t(".llms-custom-single-price-bottom").hide())})},resortSections:function(){var e={};t(".llms-section").each(function(s){s++,t(this).find('[name="llms_section_order[]"]').val(s),t(this).find(".llms-section-order").html(s);var n=t(this).find('[name="llms_section_id[]"]').val();e[n]=s}),LLMS.MB_Course_Outline.updateSectionOrder(e)},updateSectionOrder:function(t){LLMS.Ajax.call({data:{action:"update_section_order",sections:t},beforeSend:function(){},success:function(){}})},updateLessonOrder:function(t){LLMS.Ajax.call({data:{action:"update_lesson_order",lessons:t},beforeSend:function(){},success:function(){}})},resortLessons:function(){var e={};t(".llms-lesson-tree").each(function(){t(this).find(".llms-lesson").each(function(s){s++;var n=t(this).parent().parent().find('[name="llms_section_id[]"]').val();t(this).find('[name="llms_lesson_parent_section[]"]').val(n),t(this).find('[name="llms_lesson_order[]"]').val(s),t(this).find(".llms-lesson-order").html(s);var i=t(this).find('[name="llms_lesson_id[]"]').val();e[i]={parent_section:n,order:s}})}),LLMS.MB_Course_Outline.updateLessonOrder(e)},createSection:function(e){LLMS.Ajax.call({data:{action:"create_section",title:e.llms_section_name},beforeSend:function(){},success:function(e){e.success===!0&&(t("#llms_course_outline_sort").append(e.data),t(window).trigger("build"),LLMS.MB_Course_Outline.addSectionRowFunctionality(),t("#llms_create_section").each(function(){this.reset()}))}})},addSectionRowFunctionality:function(){t(".llms-lesson-tree").sortable({connectWith:".llms-lesson-tree",axis:"y",placeholder:"placeholder",cursor:"move",forcePlaceholderSize:!0,stop:function(){LLMS.MB_Course_Outline.resortLessons()}}).disableSelection(),t("#llms_course_outline_sort").sortable({connectWith:".sortablewrapper",axis:"y",placeholder:"placeholder",cursor:"move",forcePlaceholderSize:!0,stop:function(){LLMS.MB_Course_Outline.resortSections()}}).disableSelection(),t("a.llms-edit-section-link").click(function(){var e=t(this);t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),open:function(){var t=e.parent().parent().find('[name="llms_section_id[]"]').val();LLMS.MB_Course_Outline.getSection(t)}})}),t("a.llms-delete-section-link").click(function(){var e=t(this);t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),open:function(){var s=e.parent().parent().find('[name="llms_section_id[]"]').val();t("#llms-section-delete-id").val(s)}})})},addLessonRowFunctionality:function(){t("a.llms-edit-lesson-link").click(function(){var e=t(this);t("#"+t(this).attr("data-modal_id")).topModal({title:t(this).attr("data-modal_title"),open:function(){var t=e.parent().parent().parent().find('[name="llms_lesson_id[]"]').val();LLMS.MB_Course_Outline.getLesson(t)}})}),t(".llms-remove-lesson-link").on("click",function(e){e.preventDefault();var s=t(this).parent().parent().parent().find('[name="llms_lesson_id[]"]').val();LLMS.MB_Course_Outline.removeLesson(s)})},createLesson:function(e){LLMS.Ajax.call({data:{action:"create_lesson",title:e.llms_lesson_name,excerpt:e.llms_lesson_excerpt,section_id:e.llms_section},beforeSend:function(){},success:function(s){s.success===!0&&(t(".llms-section").each(function(){var n=t(this).find('[name="llms_section_id[]"]').val();n===e.llms_section&&t(this).find("#llms_section_tree_"+e.llms_section).append(s.data)}),t(window).trigger("build"),LLMS.MB_Course_Outline.addLessonRowFunctionality(),t("#llms_create_lesson").each(function(){this.reset()}))}})},addExistingLesson:function(e){LLMS.Ajax.call({data:{action:"add_lesson_to_course",lesson_id:e.llms_lesson,section_id:e.llms_section},beforeSend:function(){},success:function(s){s.success===!0&&(t(".llms-section").each(function(){var n=t(this).find('[name="llms_section_id[]"]').val();n===e.llms_section&&t(this).find("#llms_section_tree_"+e.llms_section).append(s.data)}),t(window).trigger("build"),LLMS.MB_Course_Outline.addLessonRowFunctionality(),t("#llms_add_existing_lesson").each(function(){this.reset()}))}})},getSections:function(){LLMS.Ajax.call({data:{action:"get_course_sections"},success:function(e){e.success===!0&&(t("#llms-section-select").empty(),t.each(e.data,function(e,s){var n=t('<option value="'+s.ID+'">'+s.post_title+"</option>");t("#llms-section-select").append(n)}),t("#llms-section-select").trigger("chosen:updated"))}})},getSection:function(e){LLMS.Ajax.call({data:{action:"get_course_section",section_id:e},success:function(e){e.success===!0&&(t("#llms-section-edit-name").val(e.data.title),t("#llms-section-edit-id").val(e.data.id))}})},getLesson:function(e){LLMS.Ajax.call({data:{action:"get_course_lesson",lesson_id:e},success:function(e){e.success===!0&&(t("#llms-lesson-edit-name").val(e.data.title),t("#llms-lesson-edit-excerpt").val(e.data.excerpt),t("#llms-lesson-edit-id").val(e.data.id))}})},updateSection:function(e){LLMS.Ajax.call({data:{action:"update_course_section",section_id:e.llms_section_edit_id,title:e.llms_section_edit_name},success:function(s){s.success===!0&&(t(".llms-section").each(function(){var n=t(this).find('[name="llms_section_id[]"]').val();n===e.llms_section_edit_id&&t(this).find(".llms-section-title").html(s.data.title)}),t(window).trigger("build"),t("#llms_edit_section").each(function(){this.reset()}))}})},updateLesson:function(e){LLMS.Ajax.call({data:{action:"update_course_lesson",lesson_id:e.llms_lesson_edit_id,title:e.llms_lesson_edit_name,excerpt:e.llms_lesson_edit_excerpt},success:function(s){s.success===!0&&(t(".llms-lesson").each(function(){var n=t(this).find('[name="llms_lesson_id[]"]').val();n===e.llms_lesson_edit_id&&(t(this).find(".llms-lesson-title").html(s.data.title.title),t(this).find(".llms-lesson-excerpt").html(s.data.excerpt.post_excerpt))}),t(window).trigger("build"),t("#llms_edit_lesson").each(function(){this.reset()}))}})},removeLesson:function(e){LLMS.Ajax.call({data:{action:"remove_course_lesson",lesson_id:e},success:function(s){s.success===!0&&t(".llms-lesson").each(function(){var s=t(this).find('[name="llms_lesson_id[]"]').val();s===e&&(t(this).remove(),LLMS.MB_Course_Outline.resortLessons())})}})},deleteSection:function(e){LLMS.Ajax.call({data:{action:"delete_course_section",section_id:e.llms_section_delete_id},success:function(s){s.success===!0&&(t(".llms-section").each(function(){var s=t(this).find('[name="llms_section_id[]"]').val();s===e.llms_section_delete_id&&(t(this).remove(),LLMS.MB_Course_Outline.resortSections())}),t(window).trigger("build"))}})},getLessons:function(){LLMS.Ajax.call({data:{action:"get_lesson_options_for_select"},success:function(e){e.success===!0&&(t("#llms-lesson-select").empty(),t.each(e.data,function(e,s){var n=t('<option value="'+e+'">'+s+"</option>");t("#llms-lesson-select").append(n)}),t("#llms-lesson-select").trigger("chosen:updated"))}})}},LLMS.OutlineCollapse={$outlines:null,init:function(){this.$outlines=t(".llms-widget-syllabus--collapsible"),this.$outlines.length&&this.bind()},bind:function(){var e=this;this.$outlines.each(function(){var s=t(this),n=s.find(".llms-section .section-header");n.on("click",function(s){s.preventDefault();var n=t(this),i=n.closest(".llms-section"),o=e.get_section_state(i);switch(o){case"closed":e.open_section(i);break;case"opened":e.close_section(i)}}),s.find(".llms-collapse-toggle").on("click",function(s){s.preventDefault();var i=t(this),o=i.attr("data-action"),l="close"===o?"opened":"closed";n.each(function(){var s=t(this).closest(".llms-section"),n=e.get_section_state(s);if(l!==n)return!0;switch(n){case"closed":e.close_section(s);break;case"opened":e.open_section(s)}t(this).trigger("click")})})})},close_section:function(t){t.removeClass("llms-section--opened").addClass("llms-section--closed")},open_section:function(t){t.removeClass("llms-section--closed").addClass("llms-section--opened")},get_section_state:function(t){return t.hasClass("llms-section--opened")?"opened":"closed"}},t.extend(LLMS.PasswordStrength,{$pass:t(".llms-password"),$conf:t(".llms-password-confirm"),$meter:t(".llms-password-strength-meter"),$form:null,init:function(){if(!t("body").hasClass("wp-admin")&&this.$meter.length){this.$form=this.$pass.closest("form");var e,s=this,n=0;e=setInterval(function(){if(n>=300)console.log("cannot do password strength meter.");else{if("undefined"==typeof wp&&"undefined"==typeof wp.passwordStrength)return void n++;s.bind(),s.$form.trigger("llms-password-strength-ready")}clearInterval(e)},100)}},bind:function(){var t=this;this.$form.hasClass("llms-checkout")||this.$form.on("submit",t,t.submit),t.$pass.add(t.$conf).on("keyup",function(){t.check_strength()})},check_strength:function(){var t=this.$pass.closest(".llms-form-field"),e=this.$conf.closest(".llms-form-field"),s=this.$pass.val().length,n=this.$conf.val().length;return s||n?(this.get_current_strength_status()?(t.removeClass("invalid").addClass("valid"),n&&e.removeClass("invalid").addClass("valid")):(t.removeClass("valid").addClass("invalid"),n&&e.removeClass("valid").addClass("invalid")),this.$meter.removeClass("too-short very-weak weak medium strong mismatch"),this.$meter.show().addClass(this.get_current_strength("slug")),void this.$meter.html(this.get_current_strength("text"))):(t.removeClass("valid invalid"),e.removeClass("valid invalid"),void this.$meter.hide())},checkout:function(t,e){e(t.get_current_strength_status()?!0:LLMS.l10n.translate("There is an issue with your chosen password."))},get_blacklist:function(){var t=wp.passwordStrength.userInputBlacklist();return t},get_current_strength:function(t){t=t||"int";var e,s=this.$pass.val(),n=this.$conf.val();return s.length<6?e=-1:(e=wp.passwordStrength.meter(s,this.get_blacklist(),n),0===e&&(e=1)),"slug"===t?this.get_strength_slug(e):"text"===t?this.get_strength_text(e):e},get_current_strength_status:function(){var t=this.get_current_strength(),e=this.get_strength_value(this.get_minimum_strength());return 5!==t&&t>=e},get_strength_slug:function(t){var e={"-1":"too-short",1:"very-weak",2:"weak",3:"medium",4:"strong",5:"mismatch"};return e[t]?e[t]:e[5]},get_strength_text:function(t){var e={"-1":LLMS.l10n.translate("Too Short"),1:LLMS.l10n.translate("Very Weak"),2:LLMS.l10n.translate("Weak"),3:LLMS.l10n.translate("Medium"),4:LLMS.l10n.translate("Strong"),5:LLMS.l10n.translate("Mismatch")};return e[t]?e[t]:e[5]},get_strength_value:function(t){var e={"too-short":-1,"very-weak":1,weak:2,medium:3,strong:4,mismatch:5};return e[t]?e[t]:e.mismatch},submit:function(e){var s=e.data;e.preventDefault(),s.$pass.trigger("keyup"),s.get_current_strength_status()?(s.$form.off("submit",s.submit),s.$form.trigger("submit")):(t("html, body").animate({scrollTop:s.$meter.offset().top-100},200),s.$meter.hide(),setTimeout(function(){s.$meter.fadeIn(400)},220))}}),LLMS.Pricing_Tables={init:function(){var e=this;t("body").hasClass("wp-admin")||t(".llms-access-plans").length&&(LLMS.wait_for_matchHeight(function(){e.bind()}),this.$locked=t('a[href="#llms-plan-locked"]'),this.$locked.length&&LLMS.wait_for_popover(function(){e.bind_locked()}))},bind:function(){t(".llms-access-plan-content").matchHeight(),t(".llms-access-plan-pricing.trial").matchHeight()},bind_locked:function(){this.$locked.each(function(){t(this).webuiPopover({animation:"pop",closeable:!0,content:function(e){var s=t('<div class="llms-members-only-restrictions" />');return s.append(e.$element.closest(".llms-access-plan").find(".llms-access-plan-restrictions ul").clone()),s},placement:"top",style:"inverse",title:LLMS.l10n.translate("Members Only Pricing"),width:"280px"})})}},LLMS.Quiz={$container:null,current_question:0,prev_question:0,questions:{},status:null,init:function(){var e=LLMS.Rest,s=["llms_quiz"];(e.is_path(s)||t("body").hasClass("single-llms_quiz"))&&this.bind()},bind:function(){var e=this;this.$container=t("#llms-quiz-question-wrapper"),t("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),t(".view-summary").on("click",function(e){e.preventDefault();var s=t(".accordion");s.hasClass("hidden")?(s.fadeIn(300),s.removeClass("hidden"),t(this).text(LLMS.l10n.translate("Hide Summary"))):(s.fadeOut(300),s.addClass("hidden"),t(this).text(LLMS.l10n.translate("View Summary")))}),t(".llms-donut").each(function(){LLMS.Donut(t(this))}),t("#llms-quiz-attempt-select").on("change",function(){var e=t(this).val();e&&(window.location.href=e)}),t(window).on("beforeunload",function(){if(e.status)return"Are you sure you wish to quit this quiz attempt?"}),t(window).on("unload",function(){e.status&&e.complete_quiz()})},answer_question:function(){var e=this;if(!t('input[name="llms_option_selected"]:checked').length){var s=LLMS.l10n.translate("You must enter an answer to continue.");return e.$container.find(".llms-error").remove(),void e.$container.prepend('<p class="llms-error">'+s+"</p>")}LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:t("input[name=llms_option_selected]:checked").val(),question_id:t("#question-id").val(),question_type:t("#question-type").val(),quiz_id:t("#quiz-id").val()},beforeSend:function(){e.toggle_loader("show","Loading Question...")},success:function(t){if(e.toggle_loader("hide"),t.data&&t.data.html)e.load_question(t.data.html);else if(t.data&&t.data.redirect)e.redirect(t.data.redirect);else if(t.message)e.$container.append("<p>"+t.message+"</p>");else{var s=LLMS.l10n.translate("An unknown error occurred. Please try again.");e.$container.append("<p>"+s+"</p>")}}})},complete_quiz:function(){var e=this;LLMS.Ajax.call({data:{action:"quiz_end",quiz_id:t("#quiz-id").val()},beforeSend:function(){e.toggle_loader("show","Grading Quiz...")},success:function(t){if(e.toggle_loader("hide"),t.data&&t.data.redirect)e.redirect(t.data.redirect);else if(t.message)this.$container.append("<p>"+t.message+"</p>");else{var s=LLMS.l10n.translate("An unknown error occurred. Please try again.");this.$container.append("<p>"+s+"</p>")}}})},redirect:function(e){t("#llms-quiz-timer").hide(),this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=e},previous_question:function(){var t=this;t.toggle_loader("show","Loading Question..."),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[t.prev_question])},100)},start_quiz:function(){var e=this;this.$container.on("click","#llms_answer_question",function(t){t.preventDefault(),e.answer_question()}),this.$container.on("click","#llms_prev_question",function(t){t.preventDefault(),e.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:t("#llms-attempt-key").val(),lesson_id:t("#llms-lesson-id").val(),quiz_id:t("#llms-quiz-id").val()},beforeSend:function(){e.status=!0,t("#llms-quiz-wrapper, #quiz-start-button").remove(),t("html, body").stop().animate({scrollTop:0},500),e.toggle_loader("show","Loading Quiz...")},success:function(s){if(e.toggle_loader("hide"),s.data&&s.data.html)e.start_quiz_timer(),t("#llms-quiz-timer").show(),e.load_question(s.data.html);else if(s.message)this.$container.append("<p>"+s.message+"</p>");else{var n=LLMS.l10n.translate("An unknown error occurred. Please try again.");this.$container.append("<p>"+n+"</p>")}}})},start_quiz_timer:function(){var e=t("#set-time").val();if(e){var s,n,i,o,l=(new Date).getTime()+60*e*1e3,a=60*e*1e3,r=document.getElementById("tiles"),c=this;setTimeout(function(){c.complete_quiz()},a),this.getCountdown(e,l,a,s,n,i,o,r),setInterval(function(){c.getCountdown(e,l,a,s,n,i,o,r)},1e3)}},load_question:function(e){var s=t(e),n=s.find("#question-id").val();this.questions[n]||(this.questions[n]=s),this.prev_question=this.current_question,this.current_question=n,this.$container.append(s)},toggle_loader:function(t,e){"show"===t?(e=e||"Loading...",this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$container.find(".llms-quiz-loading").remove())},getCountdown:function(e,s,n,i,o,l,a,r){var c=(new Date).getTime(),d=(s-c)/1e3;d>=0&&(1e3*d<n/2&&(t("#tiles").removeClass("color-full"),t("#tiles").addClass("color-half")),1e3*d<n/4&&(t("#tiles").removeClass("color-half"),t("#tiles").addClass("color-empty")),i=this.pad(parseInt(d/86400)),d%=86400,o=this.pad(parseInt(d/3600)),d%=3600,l=this.pad(parseInt(d/60)),a=this.pad(parseInt(d%60)),r.innerHTML="<span>"+o+":</span><span>"+l+":</span><span>"+a+"</span>")},pad:function(t){return(t<10?"0":"")+t}},LLMS.Review={init:function(){this.bind()},bind:function(){t("#llms_review_submit_button").click(function(){""!==t("#review_title").val()&&""!==t("#review_text").val()?jQuery.ajax({type:"post",dataType:"json",url:window.llms.ajaxurl,data:{action:"LLMSSubmitReview",review_title:t("#review_title").val(),review_text:t("#review_text").val(),pageID:t("#post_ID").val()},success:function(){console.log("Review success"),t("#review_box").hide("swing"),t("#thank_you_box").show("swing")},error:function(t,e,s){console.log(t),console.log(e),console.log(s)}}):(""===t("#review_title").val()?t("#review_title_error").show("swing"):t("#review_title_error").hide("swing"),""===t("#review_text").val()?t("#review_text_error").show("swing"):t("#review_text_error").hide("swing"))}),t("#_llms_display_reviews").attr("checked")?(t(".llms-num-reviews-top").addClass("top"),t(".llms-num-reviews-bottom").show()):t(".llms-num-reviews-bottom").hide(),t("#_llms_display_reviews").change(function(){t("#_llms_display_reviews").attr("checked")?(t(".llms-num-reviews-top").addClass("top"),t(".llms-num-reviews-bottom").show()):(t(".llms-num-reviews-top").removeClass("top"),t(".llms-num-reviews-bottom").hide())})}},LLMS.Spinner={get:function(e,s){var n=e.find(".llms-spinning").first();return n.length||(s=s?s:"default",n=t('<div class="llms-spinning"><i class="llms-spinner '+s+'"></i></div>'),e.append(n)),n},start:function(e,s){var n=this;e.each(function(){n.get(t(this),s).show()})},stop:function(e){var s=this;e.each(function(){s.get(t(this)).hide()})}},LLMS.StudentDashboard={screen:"",meter_exists:0,init:function(){t(".llms-student-dashboard").length&&(this.meter_exists=t(".llms-password-strength-meter").length,this.bind(),"orders"===this.get_screen()&&this.bind_orders())},bind:function(){var e=this,s=t('.llms-student-dashboard a[href="#llms-password-change-toggle"]');s.on("click",function(s){s.preventDefault();var n=t(this),i=n.text(),o=n.attr("data-action"),l="hide"===o?"show":"hide",a=n.attr("data-text");e.password_toggle(o),"show"===o?n.attr("tabindex","-777"):n.removeAttr("tabindex"),n.attr("data-action",l).attr("data-text",i).text(a)}),this.meter_exists?t(".llms-person-form.edit-account").on("llms-password-strength-ready",function(){e.password_toggle("hide")}):e.password_toggle("hide")},bind_orders:function(){t("#llms-cancel-subscription-form").on("submit",this.order_cancel_warning),t("#llms_update_payment_method").on("click",function(){t('input[name="llms_payment_gateway"]:checked').trigger("change"),t(this).closest("form").find(".llms-switch-payment-source-main").slideToggle("200")})},get_screen:function(){return this.screen||(this.screen=t(".llms-student-dashboard").attr("data-current")),this.screen},order_cancel_warning:function(e){e.preventDefault();var s=LLMS.l10n.translate("Are you sure you want to cancel your subscription?");window.confirm(LLMS.l10n.translate(s))&&(t(this).off("submit",this.order_cancel_warning),t(this).submit())},password_toggle:function(e){e||(e="show");var s=this,n=t("#password, #password_confirm, #current_password"),i=t("#password").closest("form");t(".llms-change-password")[e](),"show"===e?(n.attr("required","required"),s.meter_exists&&i.on("submit",LLMS.PasswordStrength,LLMS.PasswordStrength.submit)):(n.removeAttr("required").val(""),s.meter_exists&&(i.off("submit",LLMS.PasswordStrength.submit),LLMS.PasswordStrength.check_strength()))}},LLMS.Rest={init:function(){this.bind()},bind:function(){},is_path:function(t){for(var e=!1,s=window.location.href,n=0;n<t.length;n++)s.search(t[n])>0&&!e&&(e=!0);return e},get_query_vars:function(){for(var t,e=[],s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<s.length;n++)t=s[n].split("="),e.push(t[0]),e[t[0]]=t[1];return e}},LLMS.init=function(){for(var t in LLMS)"object"==typeof LLMS[t]&&null!==LLMS[t]&&void 0!==LLMS[t].init&&"function"==typeof LLMS[t].init&&LLMS[t].init()},LLMS.wait_for_matchHeight=function(e){this.wait_for(function(){return"undefined"!==t.fn.matchHeight},e)},LLMS.wait_for_popover=function(e){this.wait_for(function(){return"undefined"!==t.fn.webuiPopover},e)},LLMS.wait_for=function(t,e){var s,n=0;s=setInterval(function(){if(n>=300)console.log("could not load dependency");else{if(!t())return console.log("waiting..."),void n++;e()}clearInterval(s)},100)},LLMS.init(t)}(jQuery);