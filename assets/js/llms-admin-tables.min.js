!function(i,t){window.llms=window.llms||{};window.llms.admin_tables=new function(){this.$tables=null,this.init=function(){var t=this;t.$tables=i(".llms-gb-table"),t.$tables.length&&t.bind()},this.bind=function(){var r=this;this.$tables.each(function(){var a,s,n,e=i(this);e.on("click",'button[name="llms-table-paging"]',function(t){t.preventDefault(),r.change_page(e,i(this))}),e.on("click",'button[name="llms-table-export"]',function(t){t.preventDefault(),r.export(e,i(this))}),e.on("click","a.llms-sortable",function(t){t.preventDefault(),r.change_order(e,i(this))}),e.parent().find(".llms-table-filters").on("change","select.llms-table-filter",function(t){r.change_filter(e,i(this))}),e.parent().find(".llms-table-search").on("keyup","input",(a=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:return;default:r.search(e,i(this))}},s=250,n=null,function(){var t=this,e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){a.apply(t,e)},s)}))})},this.change_order=function(t,e){this.reload(t,{order:e.attr("data-order"),orderby:e.attr("data-orderby"),page:1})},this.change_filter=function(t,e){this.reload(t,{filter:e.val(),filterby:e.attr("name"),page:1})},this.change_page=function(t,e){this.reload(t,{order:this.get_args(t,"order"),orderby:this.get_args(t,"orderby"),page:e.attr("data-page")})},this.export=function(t,a,e){var s=this,n=t.find(".llms-table-export .llms-table-export-msg"),r=t.find(".llms-table-export .llms-table-progress");function l(){LLMS.Spinner.stop(a,"small"),a.removeAttr("disabled")}LLMS.Ajax.call({data:i.extend({action:"export_admin_table",handler:t.attr("data-handler"),filename:e},JSON.parse(t.attr("data-args"))),beforeSend:function(){a.attr("disabled")||(a.attr("disabled","disabled"),LLMS.Spinner.start(a,"small"))},error:function(t,e,a){var s=LLMS.l10n.translate("An error was encountered generating the export");l(),r.hide(),n.html('<span class="llms-error">'+s+": "+a+"</span>"),console.error(t)},success:function(e){!e.success&&e.message?(l(),r.hide(),n.html('<span class="llms-error">'+e.message+"</span>")):e.success&&e.data&&e.data.progress&&(n.html(""),r.is("visible")||100===e.data.progress||r.css("display","inline-block"),r.find(".llms-table-progress-text").text(e.data.progress+"%"),r.find(".llms-table-progress-inner").css("width",e.data.progress+"%"),100!==e.data.progress?s.export(t,a,e.data.filename):setTimeout(function(){var t="llms-dl-export";i("#"+t).remove(),i("<a />",{id:t,href:e.data.url,style:"display: hidden;",download:""}).appendTo("body"),i("#"+t)[0].click(),l(),r.hide()},1e3))}})},this.get_args=function(t,e){var a=JSON.parse(t.attr("data-args"));return e?!!a[e]&&a[e]:a},this.reload=function(e,t){t=i.extend({action:"get_admin_table_data",handler:e.attr("data-handler")},JSON.parse(e.attr("data-args")),t),LLMS.Ajax.call({data:t,beforeSend:function(){LLMS.Spinner.start(e.closest(".llms-table-wrap"))},success:function(t){LLMS.Spinner.stop(e.closest(".llms-table-wrap")),t.success&&(e.attr("data-args",t.data.args),e.find("thead").replaceWith(t.data.thead),e.find("tbody").replaceWith(t.data.tbody),e.find("tfoot").replaceWith(t.data.tfoot))}})},this.search=function(t,e){var a=e.val();len=a.length,(0===len||3<=len)&&this.reload(t,{page:1,search:e.val()})},this.init()}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtYWRtaW4tdGFibGVzLmpzIl0sIm5hbWVzIjpbIiQiLCJ1bmRlZmluZWQiLCJ3aW5kb3ciLCJsbG1zIiwiYWRtaW5fdGFibGVzIiwidGhpcyIsIiR0YWJsZXMiLCJpbml0Iiwic2VsZiIsImxlbmd0aCIsImJpbmQiLCJlYWNoIiwiZm4iLCJkZWxheSIsInRpbWVyIiwiJHRhYmxlIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJjaGFuZ2VfcGFnZSIsImV4cG9ydCIsImNoYW5nZV9vcmRlciIsInBhcmVudCIsImZpbmQiLCJjaGFuZ2VfZmlsdGVyIiwia2V5Q29kZSIsInNlYXJjaCIsImNvbnRleHQiLCJhcmdzIiwiYXJndW1lbnRzIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFwcGx5IiwiJGFuY2hvciIsInJlbG9hZCIsIm9yZGVyIiwiYXR0ciIsIm9yZGVyYnkiLCJwYWdlIiwiJHNlbGVjdCIsImZpbHRlciIsInZhbCIsImZpbHRlcmJ5IiwiJGJ0biIsImdldF9hcmdzIiwiZmlsZW5hbWUiLCIkbXNnIiwiJHByb2dyZXNzIiwiYWN0aXZhdGVfYnV0dG9uIiwiTExNUyIsIlNwaW5uZXIiLCJzdG9wIiwicmVtb3ZlQXR0ciIsIkFqYXgiLCJjYWxsIiwiZGF0YSIsImV4dGVuZCIsImFjdGlvbiIsImhhbmRsZXIiLCJKU09OIiwicGFyc2UiLCJiZWZvcmVTZW5kIiwic3RhcnQiLCJlcnJvciIsImpxWEhSIiwic3RhdHVzIiwibXNnIiwibDEwbiIsInRyYW5zbGF0ZSIsImhpZGUiLCJodG1sIiwiY29uc29sZSIsInN1Y2Nlc3MiLCJyZXMiLCJtZXNzYWdlIiwicHJvZ3Jlc3MiLCJpcyIsImNzcyIsInRleHQiLCJpZCIsInJlbW92ZSIsImhyZWYiLCJ1cmwiLCJzdHlsZSIsImRvd25sb2FkIiwiYXBwZW5kVG8iLCJjbGljayIsIml0ZW0iLCJjbG9zZXN0IiwiciIsInJlcGxhY2VXaXRoIiwidGhlYWQiLCJ0Ym9keSIsInRmb290IiwiJGlu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QUFRLHVCQUNSQyxRQUFTM0MsRUFBT3FCLEtBQU0saUJBQ3BCdUIsS0FBS0MsTUFBTzdDLEVBQU9xQixLQUFNLGNBQWlCUixHQUU3Q3FCLEtBQUtJLEtBQUtDLEtBQU0sQ0FDZkMsS0FBTTNCLEVBQ05pQyxXQUFZLFdBRVhaLEtBQUtDLFFBQVFZLE1BQU8vQyxFQUFPeUUsUUFBUyxzQkFHckNoQixRQUFTLFNBQVVpQixHQUVsQnhDLEtBQUtDLFFBQVFDLEtBQU1wQyxFQUFPeUUsUUFBUyxxQkFFOUJDLEVBQUVqQixVQUVOekQsRUFBT3FCLEtBQU0sWUFBYXFELEVBQUVsQyxLQUFLM0IsTUFFakNiLEVBQU9RLEtBQU0sU0FBVW1FLFlBQWFELEVBQUVsQyxLQUFLb0MsT0FDM0M1RSxFQUFPUSxLQUFNLFNBQVVtRSxZQUFhRCxFQUFFbEMsS0FBS3FDLE9BQzNDN0UsRUFBT1EsS0FBTSxTQUFVbUUsWUFBYUQsRUFBRWxDLEtBQUtzQyxZQWlCL0N4RixLQUFLcUIsT0FBUyxTQUFVWCxFQUFRK0UsR0FFL0IsSUFBSXJELEVBQU1xRCxFQUFPckQsTUFDaEJzRCxJQUFNdEQsRUFBSWhDLFFBRU4sSUFBTXNGLEtBQWMsR0FBUEEsTUFDakIxRixLQUFLNkIsT0FBUW5CLEVBQVEsQ0FDcEJ1QixLQUFNLEVBQ05aLE9BQVFvRSxFQUFPckQsU0EyQmxCcEMsS0FBS0UsUUFqVU4sQ0F3VUl5RiIsImZpbGUiOiJsbG1zLWFkbWluLXRhYmxlcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpZnRlckxNUyBBZG1pbiBUYWJsZXNcbiAqIEBzaW5jZSAgICAzLjIuMFxuICogQHZlcnNpb24gIDMuMjguMVxuICovXG47KCBmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xuXG5cdHdpbmRvdy5sbG1zID0gd2luZG93LmxsbXMgfHwge307XG5cblx0dmFyIEFkbWluVGFibGVzID0gZnVuY3Rpb24oKSB7XG5cblx0XHR0aGlzLiR0YWJsZXMgPSBudWxsO1xuXG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbGl6ZVxuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqIEBzaW5jZSAgMy4yLjBcblx0XHQgKi9cblx0XHR0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLiR0YWJsZXMgPSAkKCAnLmxsbXMtZ2ItdGFibGUnICk7XG5cblx0XHRcdGlmICggc2VsZi4kdGFibGVzLmxlbmd0aCApIHtcblx0XHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBET00gZXZlbnRzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMi4zLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yOC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0dGhpcy4kdGFibGVzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkdGFibGUgPSAkKCB0aGlzICk7XG5cblx0XHRcdFx0JHRhYmxlLm9uKCAnY2xpY2snLCAnYnV0dG9uW25hbWU9XCJsbG1zLXRhYmxlLXBhZ2luZ1wiXScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRzZWxmLmNoYW5nZV9wYWdlKCAkdGFibGUsICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0JHRhYmxlLm9uKCAnY2xpY2snLCAnYnV0dG9uW25hbWU9XCJsbG1zLXRhYmxlLWV4cG9ydFwiXScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRzZWxmLmV4cG9ydCggJHRhYmxlLCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdCR0YWJsZS5vbiggJ2NsaWNrJywgJ2EubGxtcy1zb3J0YWJsZScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRzZWxmLmNoYW5nZV9vcmRlciggJHRhYmxlLCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdCR0YWJsZS5wYXJlbnQoKS5maW5kKCAnLmxsbXMtdGFibGUtZmlsdGVycycgKS5vbiggJ2NoYW5nZScsICdzZWxlY3QubGxtcy10YWJsZS1maWx0ZXInLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRzZWxmLmNoYW5nZV9maWx0ZXIoICR0YWJsZSwgJCggdGhpcyApICk7XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQkdGFibGUucGFyZW50KCkuZmluZCggJy5sbG1zLXRhYmxlLXNlYXJjaCcgKS5vbiggJ2tleXVwJywgJ2lucHV0JywgZGVib3VuY2UoIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHRcdFx0c3dpdGNoICggZS5rZXlDb2RlICkge1xuXG5cdFx0XHRcdFx0XHRjYXNlIDM3OlxuXHRcdFx0XHRcdFx0Y2FzZSAzODpcblx0XHRcdFx0XHRcdGNhc2UgMzk6XG5cdFx0XHRcdFx0XHRjYXNlIDQwOlxuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0c2VsZi5zZWFyY2goICR0YWJsZSwgJCggdGhpcyApICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSwgMjUwICkgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEhhbmRsZSBjbGlja3Mgb24gc29ydGFibGUgY29sdW1uIGhlYWRlcnNcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHRhYmxlICAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgY3VycmVudCB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkYW5jaG9yICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBjbGlja2VkIGNvbHVtbiBoZWFkIGFuY2hvclxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5jaGFuZ2Vfb3JkZXIgPSBmdW5jdGlvbiggJHRhYmxlLCAkYW5jaG9yICkge1xuXG5cdFx0XHR0aGlzLnJlbG9hZCggJHRhYmxlLCB7XG5cdFx0XHRcdG9yZGVyOiAkYW5jaG9yLmF0dHIoICdkYXRhLW9yZGVyJyApLFxuXHRcdFx0XHRvcmRlcmJ5OiAkYW5jaG9yLmF0dHIoICdkYXRhLW9yZGVyYnknICksXG5cdFx0XHRcdHBhZ2U6IDEsXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0dGhpcy5jaGFuZ2VfZmlsdGVyID0gZnVuY3Rpb24oICR0YWJsZSwgJHNlbGVjdCApIHtcblxuXHRcdFx0dGhpcy5yZWxvYWQoICR0YWJsZSwge1xuXHRcdFx0XHRmaWx0ZXI6ICRzZWxlY3QudmFsKCksXG5cdFx0XHRcdGZpbHRlcmJ5OiAkc2VsZWN0LmF0dHIoICduYW1lJyApLFxuXHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIENoYW5nZSB0aGUgY3VycmVudCBwYWdlIG9mIHRoZSB0YWJsZSBvbiBhIG5leHQvYmFjayBjbGlja1xuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkdGFibGUgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGJ0biAgICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBjbGlja2VkIGJ1dHRvblxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuNC4wXG5cdFx0ICovXG5cdFx0dGhpcy5jaGFuZ2VfcGFnZSA9IGZ1bmN0aW9uKCAkdGFibGUsICRidG4gKSB7XG5cblx0XHRcdHRoaXMucmVsb2FkKCAkdGFibGUsIHtcblx0XHRcdFx0b3JkZXI6IHRoaXMuZ2V0X2FyZ3MoICR0YWJsZSwgJ29yZGVyJyApLFxuXHRcdFx0XHRvcmRlcmJ5OiB0aGlzLmdldF9hcmdzKCAkdGFibGUsICdvcmRlcmJ5JyApLFxuXHRcdFx0XHRwYWdlOiAkYnRuLmF0dHIoICdkYXRhLXBhZ2UnICksXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogSGFuZGxlXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICAkdGFibGUgICAgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIHRhYmxlXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICAkYnRuICAgICAgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIGNsaWNrZWQgYnV0dG9uXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyBmaWxlbmFtZSAgZmlsZW5hbWUgb2YgdGhlIGV4cG9ydCBpbiBwcm9ncmVzcy5cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE1LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yOC4xXG5cdFx0ICovXG5cdFx0dGhpcy5leHBvcnQgPSBmdW5jdGlvbiggJHRhYmxlLCAkYnRuLCBmaWxlbmFtZSApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHQkbXNnID0gJHRhYmxlLmZpbmQoICcubGxtcy10YWJsZS1leHBvcnQgLmxsbXMtdGFibGUtZXhwb3J0LW1zZycgKSxcblx0XHRcdFx0JHByb2dyZXNzID0gJHRhYmxlLmZpbmQoICcubGxtcy10YWJsZS1leHBvcnQgLmxsbXMtdGFibGUtcHJvZ3Jlc3MnICk7XG5cblx0XHRcdGZ1bmN0aW9uIGFjdGl2YXRlX2J1dHRvbigpIHtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICRidG4sICdzbWFsbCcgKTtcblx0XHRcdFx0JGJ0bi5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cdFx0XHR9XG5cblx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdGRhdGE6ICQuZXh0ZW5kKCB7XG5cdFx0XHRcdFx0YWN0aW9uOiAnZXhwb3J0X2FkbWluX3RhYmxlJyxcblx0XHRcdFx0XHRoYW5kbGVyOiAkdGFibGUuYXR0ciggJ2RhdGEtaGFuZGxlcicgKSxcblx0XHRcdFx0XHRmaWxlbmFtZTogZmlsZW5hbWUsXG5cdFx0XHRcdH0sIEpTT04ucGFyc2UoICR0YWJsZS5hdHRyKCAnZGF0YS1hcmdzJyApICkgKSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRpZiAoICEgJGJ0bi5hdHRyKCAnZGlzYWJsZWQnICkgKSB7XG5cdFx0XHRcdFx0XHQkYnRuLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggJGJ0biwgJ3NtYWxsJyApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMsIGVycm9yICkge1xuXG5cdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgZ2VuZXJhdGluZyB0aGUgZXhwb3J0JyApO1xuXHRcdFx0XHRcdGFjdGl2YXRlX2J1dHRvbigpO1xuXHRcdFx0XHRcdCRwcm9ncmVzcy5oaWRlKCk7XG5cdFx0XHRcdFx0JG1zZy5odG1sKCAnPHNwYW4gY2xhc3M9XCJsbG1zLWVycm9yXCI+JyArIG1zZyArICc6ICcgKyBlcnJvciArICc8L3NwYW4+JyApO1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoIGpxWEhSICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHJlcyApIHtcblxuXHRcdFx0XHRcdGlmICggISByZXMuc3VjY2VzcyAmJiByZXMubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0YWN0aXZhdGVfYnV0dG9uKCk7XG5cdFx0XHRcdFx0XHQkcHJvZ3Jlc3MuaGlkZSgpO1xuXHRcdFx0XHRcdFx0JG1zZy5odG1sKCAnPHNwYW4gY2xhc3M9XCJsbG1zLWVycm9yXCI+JyArIHJlcy5tZXNzYWdlICsgJzwvc3Bhbj4nICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByZXMuc3VjY2VzcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5wcm9ncmVzcyApIHtcblxuXHRcdFx0XHRcdFx0JG1zZy5odG1sKCAnJyApO1xuXG5cdFx0XHRcdFx0XHQvLyBvbmx5IHNob3cgYSBwcm9ncmVzcyBiYXIgaWYgaXQncyBnb2luZyB0byB0YWtlIG1vcmUgdGhhbiBvbmUgcmVxdWVzdC5cblx0XHRcdFx0XHRcdGlmICggISAkcHJvZ3Jlc3MuaXMoICd2aXNpYmxlJyApICYmIHJlcy5kYXRhLnByb2dyZXNzICE9PSAxMDAgKSB7XG5cdFx0XHRcdFx0XHRcdCRwcm9ncmVzcy5jc3MoICdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0JHByb2dyZXNzLmZpbmQoICcubGxtcy10YWJsZS1wcm9ncmVzcy10ZXh0JyApLnRleHQoIHJlcy5kYXRhLnByb2dyZXNzICsgJyUnICk7XG5cdFx0XHRcdFx0XHQkcHJvZ3Jlc3MuZmluZCggJy5sbG1zLXRhYmxlLXByb2dyZXNzLWlubmVyJyApLmNzcyggJ3dpZHRoJywgcmVzLmRhdGEucHJvZ3Jlc3MgKyAnJScgKTtcblxuXHRcdFx0XHRcdFx0Ly8gaWYgd2UncmUgbm90IGZpbmlzaGVkLCBtYWtlIGFub3RoZXIgcmVxdWVzdC5cblx0XHRcdFx0XHRcdGlmICggMTAwICE9PSByZXMuZGF0YS5wcm9ncmVzcyApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5leHBvcnQoICR0YWJsZSwgJGJ0biwgcmVzLmRhdGEuZmlsZW5hbWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gZmluaXNoZWQsIGRvd25sb2FkIHRoZSBmaWxlIGFuZCBjbGVhbnVwIHRoZSBpbnRlcmZhY2UuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgaWQgPSAnbGxtcy1kbC1leHBvcnQnO1xuXHRcdFx0XHRcdFx0XHRcdCQoICcjJyArIGlkICkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0JCggJzxhIC8+Jywge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdFx0XHRcdFx0aHJlZjogcmVzLmRhdGEudXJsLFxuXHRcdFx0XHRcdFx0XHRcdFx0c3R5bGU6ICdkaXNwbGF5OiBoaWRkZW47Jyxcblx0XHRcdFx0XHRcdFx0XHRcdGRvd25sb2FkOiAnJyxcblx0XHRcdFx0XHRcdFx0XHR9ICkuYXBwZW5kVG8oICdib2R5JyApO1xuXHRcdFx0XHRcdFx0XHRcdCQoICcjJyArIGlkIClbMF0uY2xpY2soKTtcblx0XHRcdFx0XHRcdFx0XHRhY3RpdmF0ZV9idXR0b24oKTtcblx0XHRcdFx0XHRcdFx0XHQkcHJvZ3Jlc3MuaGlkZSgpO1xuXHRcdFx0XHRcdFx0XHR9LCAxMDAwICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgYXJndW1lbnRzIHN0b3JlZCBpbiB0aGUgdGFibGUgYW5kIHBhcnNlIGludG8gYSByZWFkYWJsZSBvYmplY3Rcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAkdGFibGUgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICBpdGVtICAgIGtleSB0byBncmFiIGEgc3BlY2lmaWMgdmFsdWUgZnJvbSB0aGUgYXJncyBvYmplY3Rcblx0XHQgKiBAcmV0dXJuICAgbWl4ZWRcblx0XHQgKiBAc2luY2UgICAgMy4yLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yLjBcblx0XHQgKi9cblx0XHR0aGlzLmdldF9hcmdzID0gZnVuY3Rpb24oICR0YWJsZSwgaXRlbSApIHtcblxuXHRcdFx0dmFyIGFyZ3MgPSBKU09OLnBhcnNlKCAkdGFibGUuYXR0ciggJ2RhdGEtYXJncycgKSApO1xuXG5cdFx0XHRpZiAoIGl0ZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGFyZ3NbIGl0ZW0gXSApID8gYXJnc1sgaXRlbSBdIDogZmFsc2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gYXJncztcblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBSZWxvYWQgYSB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkdGFibGUgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGN1cnJlbnQgdGFibGVcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgYXJncyAgICBhcmd1ZW1lbnRzIHRvIHBhc3Mgd2l0aCB0aGUgYWpheCBxdWVyeVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5yZWxvYWQgPSBmdW5jdGlvbiggJHRhYmxlLCBhcmdzICkge1xuXG5cdFx0XHRhcmdzID0gJC5leHRlbmQoIHtcblx0XHRcdFx0YWN0aW9uOiAnZ2V0X2FkbWluX3RhYmxlX2RhdGEnLFxuXHRcdFx0XHRoYW5kbGVyOiAkdGFibGUuYXR0ciggJ2RhdGEtaGFuZGxlcicgKSxcblx0XHRcdH0sIEpTT04ucGFyc2UoICR0YWJsZS5hdHRyKCAnZGF0YS1hcmdzJyApICksIGFyZ3MgKTtcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YTogYXJncyxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RhcnQoICR0YWJsZS5jbG9zZXN0KCAnLmxsbXMtdGFibGUtd3JhcCcgKSApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICR0YWJsZS5jbG9zZXN0KCAnLmxsbXMtdGFibGUtd3JhcCcgKSApXG5cblx0XHRcdFx0XHRpZiAoIHIuc3VjY2VzcyApIHtcblxuXHRcdFx0XHRcdFx0JHRhYmxlLmF0dHIoICdkYXRhLWFyZ3MnLCByLmRhdGEuYXJncyApO1xuXG5cdFx0XHRcdFx0XHQkdGFibGUuZmluZCggJ3RoZWFkJyApLnJlcGxhY2VXaXRoKCByLmRhdGEudGhlYWQgKTtcblx0XHRcdFx0XHRcdCR0YWJsZS5maW5kKCAndGJvZHknICkucmVwbGFjZVdpdGgoIHIuZGF0YS50Ym9keSApO1xuXHRcdFx0XHRcdFx0JHRhYmxlLmZpbmQoICd0Zm9vdCcgKS5yZXBsYWNlV2l0aCggci5kYXRhLnRmb290ICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEV4ZWN1dGVzIGFuIEFKQVggc2VhcmNoIHF1ZXJ5XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICR0YWJsZSAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgY3VycmVudCB0YWJsZVxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkaW5wdXQgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHNlYXJjaCBpbnB1dFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMi4wXG5cdFx0ICovXG5cdFx0dGhpcy5zZWFyY2ggPSBmdW5jdGlvbiggJHRhYmxlLCAkaW5wdXQgKSB7XG5cblx0XHRcdHZhciB2YWwgPSAkaW5wdXQudmFsKClcblx0XHRcdFx0bGVuID0gdmFsLmxlbmd0aDtcblxuXHRcdFx0aWYgKCAwID09PSBsZW4gfHwgbGVuID49IDMgKSB7XG5cdFx0XHRcdHRoaXMucmVsb2FkKCAkdGFibGUsIHtcblx0XHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0XHRcdHNlYXJjaDogJGlucHV0LnZhbCgpLFxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogVGhyb3R0bGUgZnVuY3Rpb24gYnkgYSBkZWxheSBpbiBtc1xuXHRcdCAqIEBwYXJhbSAgICBGdW5jdGlvbiAgZm4gICAgIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtICAgIGludCAgICAgICBkZWxheSAgZGVsYXkgaW4gbWlsbGlzZWNvbmRcblx0XHQgKiBAcmV0dXJuICAgZnVuY3Rpb25cblx0XHQgKiBAc2luY2UgICAgMy4yLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yLjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkZWJvdW5jZSggZm4sIGRlbGF5ICkge1xuXHRcdFx0dmFyIHRpbWVyID0gbnVsbDtcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHZhciBjb250ZXh0ID0gdGhpcyxcblx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzO1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lciApO1xuXHRcdFx0XHR0aW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Zm4uYXBwbHkoIGNvbnRleHQsIGFyZ3MgKTtcblx0XHRcdFx0fSwgZGVsYXkgKTtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gZ29cblx0XHR0aGlzLmluaXQoKTtcblxuXHR9O1xuXG5cdC8vIGluaXRhbGl6ZSB0aGUgb2JqZWN0XG5cdHdpbmRvdy5sbG1zLmFkbWluX3RhYmxlcyA9IG5ldyBBZG1pblRhYmxlcygpO1xuXG59ICkoIGpRdWVyeSApO1xuIl19
