!function(){var e,t,n={702:function(e,t,n){"use strict";n.d(t,{E8:function(){return u},MQ:function(){return m},Vo:function(){return i},YQ:function(){return r},oJ:function(){return c},pY:function(){return o},ug:function(){return d},z_:function(){return a}});var l=n(736);function r(e){let{title:t}=e;const{raw:n}=t;return n||t}function i(e){let{price:t,frequency:n}=e;return 0===t?"free":0===n?"single":"recurring"}function s(e){return window.llms.accessPlanOptions[e]}function a(){return s("limit")}function o(){const e=s("redirects");return Object.keys(e).map((t=>({label:e[t],value:t})))}function c(e){const t=s("lengths")[e],n=[];let r=0;for(;r<=t;)n.push({label:(i=r,0===i?(0,l.__)("until canceled","lifterlms"):(0,l.sprintf)((0,l._n)("for %1$d payment","for %1$d payments",i,"lifterlms"),i)),value:r}),++r;var i;return n}function u(){const e=[],t=e=>{if(1===e)return(0,l.__)("Every","lifterlms");const t={2:(0,l.__)("second","lifterlms"),3:(0,l.__)("third","lifterlms"),4:(0,l.__)("fourth","lifterlms"),5:(0,l.__)("fifth","lifterlms"),6:(0,l.__)("sixth","lifterlms")};// Translators: %s = An ordinal number.
return(0,l.sprintf)((0,l.__)("Every %s","lifterlms"),t[e])};let n=1;for(;n<=6;)e.push({value:n,label:t(n)}),++n;return e}function d(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=s("periods"),n=e?1:0;return Object.keys(t).map((e=>({label:t[e][n],value:e})))}function m(){return s("visibilities")}},123:function(e,t,n){var l={"./access":[577,577],"./access.js":[577,577],"./display":[418,418],"./display.js":[418,418],"./extra":[365,365],"./extra.js":[365,365],"./price":[433,433],"./price.js":[433,433]};function r(e){if(!n.o(l,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=l[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(l)},r.id=123,e.exports=r},819:function(e){"use strict";e.exports=window.lodash},606:function(e){"use strict";e.exports=window.llms.components},609:function(e){"use strict";e.exports=window.wp.components},818:function(e){"use strict";e.exports=window.wp.data},771:function(e){"use strict";e.exports=window.wp.date},238:function(e){"use strict";e.exports=window.wp.editor},307:function(e){"use strict";e.exports=window.wp.element},736:function(e){"use strict";e.exports=window.wp.i18n}},l={};function r(e){var t=l[e];if(void 0!==t)return t.exports;var i=l[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"assets/js/chunks/"+e+".js"},r.miniCssF=function(e){},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="lifterlms:",r.l=function(n,l,i,s){if(e[n])e[n].push(l);else{var a,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[l];var m=function(t,l){a.onerror=a.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(l)})),t)return t(l)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),o&&document.head.appendChild(a)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../../"}(),function(){var e={180:0};r.f.j=function(t,n){var l=r.o(e,t)?e[t]:void 0;if(0!==l)if(l)n.push(l[2]);else{var i=new Promise((function(n,r){l=e[t]=[n,r]}));n.push(l[2]=i);var s=r.p+r.u(t),a=new Error;r.l(s,(function(n){if(r.o(e,t)&&(0!==(l=e[t])&&(e[t]=void 0),l)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,l[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var l,i,s=n[0],a=n[1],o=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(l in a)r.o(a,l)&&(r.m[l]=a[l]);o&&o(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunklifterlms=self.webpackChunklifterlms||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var e=r(307),t=r(736),n=r(609),l=window.wp.plugins,i=r(818),s=r(606),a=window.llms.data,o=r(819),c=r(238),u=r(702);function d(e){return(0,i.withSelect)(((e,t)=>{const{getCurrentPostId:n}=e(c.store),{getEditedPlans:l,isLoading:r}=e(a.accessPlanStore),i={post_id:n()},s=l(i),d=r(i),m=(0,u.z_)(),p=s?(0,o.orderBy)(s,"menu_order","asc"):[];return{hasPlanLimitBeenReached:p.length>=m,plans:p,arePlansLoading:d,planLimit:m}}))(e)}var m=window.wp.url;function p(l){let{accessPlan:r}=l;const{permalink:i}=r,[a,o]=(0,e.useState)(!1),c=`${(0,m.getAuthority)(i)}${(0,m.getPathAndQueryString)(i)}`;return(0,e.useEffect)((()=>{a&&setTimeout((()=>o(!1)),1200)})),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.CopyButton,{isSecondary:!0,buttonText:(0,t.__)("Copy link","lifterlms"),copyText:i,tooltipText:(0,t.__)("Click to copy the permalink to the clipboard.","lifterlms"),onCopy:()=>o(!0),style:{marginRight:"5px"}}),a&&(0,e.createElement)("div",{style:{position:"absolute",left:"20px",bottom:"68px"}},(0,e.createElement)(n.Snackbar,null,(0,t.__)("Link copied","lifterlms"))),(0,e.createElement)(n.ExternalLink,{href:i},c))}const f=[{name:"display",title:(0,t.__)("Display","lifterlms"),componentFile:"display"},{name:"price",title:(0,t.__)("Price","lifterlms"),componentFile:"price"},{name:"access",title:(0,t.__)("Content Access","lifterlms"),componentFile:"access"},{name:"extra",title:(0,t.__)("Additional Settings","lifterlms"),componentFile:"extra"}];function h(n){let{tab:l,accessPlan:i,updatePlan:s}=n;const{name:a,componentFile:o}=l,c=(0,e.useMemo)((()=>function(t){return(0,e.lazy)((()=>r(123)(`./${t}`)))}(o)),[o]);return(0,e.createElement)(e.Suspense,{fallback:(0,e.createElement)("div",null,(0,t.__)("Loading…","lifterlms"))},(0,e.createElement)("div",{className:`llms-access-plan--edit--${a}`,style:{margin:"24px 32px"}},(0,e.createElement)(c,{accessPlan:i,updatePlan:s})))}function g(l){let{accessPlan:r,updatePlan:i,isOpen:a,setIsOpen:o,deletePlan:c,closeOnDelete:d=!0}=l;if(!a)return null;const{id:m}=r;return(0,e.createElement)(n.Modal,{className:"llms-access-plan--edit",title:(0,t.sprintf)((0,t.__)('Editing access plan "%1$s" (#%2$d)',"lifterlms"),(0,u.YQ)(r),m),onRequestClose:()=>o(!1),style:{minWidth:"560px"}},(0,e.createElement)("div",{className:"llms-access-plan--edit--main",style:{margin:"-24px -32px 0"}},(0,e.createElement)(n.TabPanel,{className:"llms-access-plan--edit--tabs",activeClass:"is-active",tabs:f},(t=>(0,e.createElement)(h,{tab:t,accessPlan:r,updatePlan:i})))),(0,e.createElement)("footer",{className:"llms-access-plan--edit--footer",style:{margin:"24px -32px -24px",padding:"24px 32px",borderTop:"1px solid #ddd"}},(0,e.createElement)(n.Flex,null,(0,e.createElement)(n.FlexItem,null,(0,e.createElement)(p,{accessPlan:r})),(0,e.createElement)(n.FlexItem,null,(0,e.createElement)(s.ConfirmButton,{isDestructive:!0,onClick:async()=>{await c(),d&&o(!1)}},(0,t.__)("Delete","lifterlms")),(0,e.createElement)(n.Button,{style:{marginLeft:"5px"},onClick:()=>o(!1)},(0,t.__)("Close","lifterlms"))))))}const{SortableDragHandle:_}=window.llms.components;function w(t){let{visibility:l,updatePlan:r}=t;const i=(0,u.MQ)(),{icon:s,title:a,help:o,color:c}=i[l],d=()=>{var e;const t=Object.keys(i),n=t.indexOf(l);return null!==(e=t[n+1])&&void 0!==e?e:t[0]};return(0,e.createElement)(n.Button,{showTooltip:!0,isSmall:!0,style:{padding:0},onClick:()=>r({visibility:d()}),label:`${a}: ${o}`},(0,e.createElement)(n.Dashicon,{style:{color:c},icon:s}))}function y(l){const{id:r,item:i,index:s,setNodeRef:a,listeners:o,manageState:c}=l,{title:d,visibility:m}=i,{updateItem:p,deleteItem:f}=c,[h,y]=(0,e.useState)(!1),b=e=>p({...e,id:r});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"llms-sortable-list--item-header"},(0,e.createElement)("section",null,(0,e.createElement)("strong",null,(0,u.YQ)(i)),(0,e.createElement)("small",null,"(#",r,")")),(0,e.createElement)("aside",null,(0,e.createElement)(w,{visibility:m,updatePlan:b}),(0,e.createElement)(n.Button,{isSmall:!0,showTooltip:!0,label:(0,t.__)("Edit Access Plan","lifterlms"),icon:"edit",onClick:()=>y(!0)}),(0,e.createElement)(_,{label:(0,t.__)("Reorder Access Plan","lifterlms"),setNodeRef:a,listeners:o}))),(0,e.createElement)(g,{accessPlan:i,updatePlan:b,deletePlan:()=>f(r),setIsOpen:y,isOpen:h,closeOnDelete:!1}))}function b(t){let{children:n}=t;return(0,e.createElement)("div",{style:{border:"1px solid #ddd",textAlign:"center",padding:"24px"}},n)}var E=d((function(l){let{plans:r,arePlansLoading:o}=l;if(o)return(0,e.createElement)(b,null,(0,e.createElement)(n.Spinner,null),(0,t.__)("Loading…","lifterlms"));if(!r.length)return(0,e.createElement)(b,null,(0,t.__)("No access plans found…","lifterlms"));const{savePlan:c,deletePlan:u,editPlan:d}=(0,i.useDispatch)(a.accessPlanStore);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.SortableList,{ListItem:y,items:r,themeId:"default",itemClassName:"llms-access-plan--list-item",manageState:{createItem:c,deleteItem:u,updateItem:e=>{let{id:t,...n}=e;return d(t,n)},updateItems:e=>e.forEach(((e,t)=>{let{id:n}=e;return d(n,{menu_order:t})}))}}))})),v=window.wp.hooks,P=d((function(l){let{plans:r=[],order:s=null,arePlansLoading:o=!1,hasPlanLimitBeenReached:u=!1}=l;const{getCurrentPostId:d}=(0,i.useSelect)(c.store),{savePlan:m,deletePlan:p,editPlan:f}=(0,i.useDispatch)(a.accessPlanStore),[h,_]=(0,e.useState)(!1),[w,y]=(0,e.useState)(!1),[b,E]=(0,e.useState)(null),{menu_order:P}=r.length?r.at(-1):{menu_order:-1};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.Button,{isSecondary:!0,showTooltip:!0,isBusy:h,disabled:o||u,style:{marginTop:"10px"},onClick:async()=>{_(!0);const e=(0,v.applyFilters)("llms.newAccessPlanDefaults",{title:(0,t.__)("New Access Plan","lifterlms"),price:0,post_id:d(),menu_order:P+1,visibility:"hidden"});E(await m(e)),_(!1),y(!0)}},(0,t.__)("Add New Access Plan","lifterlms")),u&&(0,e.createElement)(n.Tooltip,{text:(0,t.__)("The maximum number of allowed access plans has been reached.","lifterlms")},(0,e.createElement)(n.Dashicon,{icon:"editor-help",style:{verticalAlign:"middle",color:"#828282"}})),(0,e.createElement)(g,{accessPlan:b,updatePlan:e=>f(b.id,{...e}),deletePlan:async()=>await p(b.id),setIsOpen:y,isOpen:w}))}));const{Fill:x}=window.llms.editPostSidebar;(0,l.registerPlugin)("llms-access-plan-editor",{render:function(){return(0,e.createElement)(x,null,(0,e.createElement)(n.PanelBody,{title:(0,t.__)("Access Plans","lifterlms")},(0,e.createElement)(E,null),(0,e.createElement)(P,null)))}})}()}();