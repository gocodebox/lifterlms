!function(e){e.fn.llmsCollapsible=function(){return this.on("click",".llms-collapsible-header",function(){var t=e(this).closest(".llms-collapsible"),a=t.siblings(".llms-collapsible");t.toggleClass("opened"),t.find(".llms-collapsible-body").slideToggle(400),a.each(function(){e(this).removeClass("opened"),e(this).find(".llms-collapsible-body").slideUp(400)})}),this},window.llms=window.llms||{};var t=function(){this.repeaters={metaboxes:this,$repeaters:null,init:function(){var t=this;t.$repeaters=e(".llms-mb-list.repeater"),t.$repeaters.length&&(LLMS.wait_for(function(){return"undefined"!=typeof tinyMCE},function(){t.load(),t.bind()}),e('#post input[type="submit"], #post-preview').on("click",function(){e(this).attr("data-llms-clicked","yes")}),e("#post").on("submit",t.handle_submit))},bind:function(){var t=this;t.$repeaters.each(function(){var a=e(this),n=a.find(".llms-repeater-rows"),l=a.find(".llms-repeater-model");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,l.find(".llms-mb-list.editor textarea").attr("id")),a.find(".llms-repeater-new-btn").on("click",function(){t.add_row(a,null,!0)}),n.sortable({handle:".llms-drag-handle",items:".llms-repeater-row",start:function(e,t){n.addClass("dragging")},stop:function(l,i){n.removeClass("dragging");var s=i.item.find("textarea.wp-editor-area");s.each(function(){var t=e(this).attr("id");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,t),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,t)}),t.save(a)}}),a.on("click",".llms-repeater-remove",function(n){n.stopPropagation();var l=e(this).closest(".llms-repeater-row");window.confirm(LLMS.l10n.translate("Are you sure you want to delete this row? This cannot be undone."))&&(l.remove(),setTimeout(function(){t.save(a)},1))})})},add_row:function(t,a,n){var l=this,i=t.find(".llms-repeater-rows"),s=t.find(".llms-repeater-model"),r=s.find(".llms-repeater-row").clone(),o=t.find(".llms-repeater-row").length,d=l.reindex(r,o);a&&e.each(a,function(t,a){var n=r.find('[name^="'+t+'"]');n.hasClass("llms-select2-student")?(e.each(a,function(e,t){n.append('<option value="'+t.key+'" selected="selected">'+t.title+"</option>")}),n.trigger("change")):n.val(a)}),setTimeout(function(){l.bind_row(r)},1),i.append(r),n&&r.find(".llms-collapsible-header").trigger("click"),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,d),t.trigger("llms-new-repeater-row",{$row:r,data:a})},bind_row:function(e){this.bind_row_header(e),e.find(".llms-select2").llmsSelect2({width:"100%"}),e.find(".llms-select2-student").llmsStudentsSelect2(),this.metaboxes.bind_datepickers(e.find(".llms-datepicker")),this.metaboxes.bind_controllers(e.find("[data-is-controller]"))},bind_row_header:function(t){var a=t.find(".llms-repeater-title"),n=t.find(".llms-collapsible-header-title-field");a.attr("data-default",a.text()),n.on("keyup focusout blur",function(){var t=e(this).val();t||(t=a.attr("data-default")),a.text(t)}).trigger("keyup")},handle_submit:function(t){var a=e('#post [data-llms-clicked="yes"]'),n=a.parent().find(".spinner");if(a.is("#post-preview"))return void a.removeAttr("data-llms-clicked");t.preventDefault(),e('#post input[type="submit"]').addClass("disabled").attr("disabled","disabled"),n.addClass("is-active");var l,i=window.llms.metaboxes.repeaters,s=0;i.$repeaters.each(function(){i.save(e(this))}),l=setInterval(function(){s>=59||!e(".llms-mb-list.repeater.processing").length?(clearInterval(l),e("#post").off("submit",this.handle_submit),n.removeClass("is-active"),a.removeClass("disabled").removeAttr("disabled").trigger("click")):s++},1e3)},load:function(){var t=this;t.$repeaters.each(function(){var a=e(this);a.hasClass("is-loaded")||a.hasClass("processing")||t.store(a,"load",function(n){a.addClass("is-loaded"),e.each(n.data,function(e,n){t.add_row(a,n,!1)}),a.find(".llms-repeater-rows .llms-repeater-row").each(function(){t.bind_row(e(this))})})})},reindex:function(t,a){function n(t,n){t.each(function(){var t=e(this).attr(n);e(this).attr(n,t.replace(l,a))})}var l=t.attr("data-row-order"),i=t.find(".llms-mb-list.editor textarea");return tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,i.attr("id")),t.attr("data-row-order",a),n(t,"data-row-order"),n(t.find("button.insert-media"),"data-editor"),n(t.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"id"),n(t.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"name"),n(t.find("[data-controller]"),"data-controller"),n(t.find("[data-controller]"),"data-controller"),n(t.find("button.wp-switch-editor"),"data-wp-editor-id"),n(t.find("button.wp-switch-editor"),"id"),n(t.find(".wp-editor-tools"),"id"),n(t.find(".wp-editor-container"),"id"),i.attr("id")},save:function(e){e.trigger("llms-repeater-before-save",{$el:e}),this.store(e,"save")},serialize:function(t){var a=[];return t.find(".llms-repeater-rows .llms-repeater-row").each(function(){var t={};e(this).find('input[name^="_llms"], select[name^="_llms"]').each(function(){t[e(this).attr("name")]=e(this).val()}),e(this).find('textarea[name^="_llms"]').each(function(){var a=e(this).attr("name");tinyMCE.editors[a]?t[a]=tinyMCE.editors[a].getContent():t[a]=e(this).val()}),a.push(t)}),a},store:function(e,t,a){a=a||function(){};var n=this,l={action:e.find(".llms-repeater-field-handler").val(),store_action:t};"save"===t&&(l.rows=n.serialize(e)),LLMS.Ajax.call({data:l,beforeSend:function(){e.addClass("processing"),LLMS.Spinner.start(e)},success:function(t){a(t),LLMS.Spinner.stop(e),e.removeClass("processing")}})}},this.repeaters.init(),this.init=function(){var t=this;e(".llms-select2-post").each(function(){t.post_select(e(this))}),e(".llms-collapsible-group").llmsCollapsible(),this.bind_tabs();var a=[{selector:e(".llms-datepicker"),func:"bind_datepickers"},{selector:e(".llms-select2"),func:function(e){e.llmsSelect2({width:"100%"})}},{selector:e(".llms-select2-student"),func:function(e){e.llmsStudentsSelect2()}},{selector:e('input[type="checkbox"][data-controls]'),func:"bind_cb_controllers"},{selector:e("[data-is-controller]"),func:"bind_controllers"},{selector:e(".llms-table"),func:"bind_tables"},{selector:e(".llms-merge-code-wrapper"),func:"bind_merge_code_buttons"},{selector:e("a.llms-editable"),func:"bind_editables"}];if(e.each(a,function(a,n){if(n.selector.length){var l=n.selector.filter(function(){return 0===e(this).closest(".llms-repeater-model").length});"string"==typeof n.func?t[n.func](l):"function"==typeof n.func&&n.func(l)}}),window.llms.post.post_type){var n="bind_"+window.llms.post.post_type;"function"==typeof this[n]&&this[n]()}},this.bind_cb_controllers=function(t){t=t||e('input[type="checkbox"][data-controls]'),t.each(function(){var t=e(this),a=e(t.attr("data-controls")).closest(".llms-mb-list");t.on("change",function(){e(this).is(":checked")?a.slideDown(200):a.slideUp(200)}),t.trigger("change")})},this.bind_controllers=function(t){t=t||e("[data-is-controller]"),t.each(function(){var t,a=e(this),n=e('[data-controller="#'+a.attr("id")+'"]');a.on("change",function(){t="checkbox"===a.attr("type")?a.is(":checked")?a.val():"false":a.val(),n.each(function(){var a=e(this).attr("data-controller-value"),n=[];-1!==a.indexOf(",")?n=a.split(","):n.push(a),-1!==n.indexOf(t)?e(this).slideDown(200):e(this).slideUp(200)})}),a.trigger("change")})},this.bind_datepicker=function(e){var t=e.attr("data-format")||"mm/dd/yy",a=e.attr("data-max-date")||null,n=e.attr("data-min-date")||null;e.datepicker({dateFormat:t,maxDate:a,minDate:n})},this.bind_datepickers=function(t){var a=this;t=t||e(".llms-datepicker"),t.each(function(){a.bind_datepicker(e(this))})},this.bind_editables=function(){function t(t){var n,l=t.find("label").clone(),i=t.attr("data-llms-editable"),s=t.attr("data-llms-editable-type"),r=t.attr("data-llms-editable-required")||"no",o=t.attr("data-llms-editable-value");if(r="yes"===r?' required="required"':"","select"===s){var d,c=JSON.parse(t.attr("data-llms-editable-options"));n=e('<select name="'+i+'"'+r+" />");for(var m in c)d=o===m?' selected="selected"':"",n.append('<option value="'+m+'"'+d+">"+c[m]+"</option>")}else if("datetime"===s){n=e('<div class="llms-datetime-field" />'),o=JSON.parse(o);var u=t.attr("data-llms-editable-date-format")||"",f=t.attr("data-llms-editable-date-min")||"",p=t.attr("data-llms-editable-date-max")||"";$picker=e('<input class="llms-date-input llms-datepicker" data-format="'+u+'" data-max-date="'+p+'" data-min-date="'+f+'" name="'+i+'[date]" type="text" value="'+o.date+'">'),a.bind_datepicker($picker),n.append($picker),n.append("<em>@</em>"),n.append('<input class="llms-time-input" max="23" min="0" name="'+i+'[hour]" type="number" value="'+o.hour+'">'),n.append("<em>:</em>"),n.append('<input class="llms-time-input" max="59" min="0" name="'+i+'[minute]" type="number" value="'+o.minute+'">')}else n=e('<input name="'+i+'" type="'+s+'" value="'+o+'"'+r+">");t.empty().append(l).append(n),"select"===s&&setTimeout(function(){n.trigger("change")},100)}var a=this;e("a.llms-editable").on("click",function(a){a.preventDefault();var n,l=e(this);n=l.attr("data-fields")?e(l.attr("data-fields")):l.closest(".llms-metabox-section").find("[data-llms-editable]"),l.remove(),n.each(function(){t(e(this))})})},this.bind_llms_engagement=function(){var t=this;e("#_llms_engagement_type").on("change",function(){e("#_llms_engagement").trigger("llms-engagement-type-change",e(this).val())}),e("#_llms_engagement").on("llms-engagement-type-change",function(a,n){var l=e(this);switch(n){case"achievement":case"certificate":case"email":var i="llms_"+n;l.val(null).attr("data-post-type",i).trigger("change"),t.post_select(l);break;default:l.trigger("llms-engagement-type-change-external",n)}})},this.bind_llms_membership=function(){e('a[href="#llms-course-remove"]').on("click",function(t){t.preventDefault();var a=e(this),n=a.closest("tr"),l=a.closest(".llms-mb-list");LLMS.Spinner.start(l),window.LLMS.Ajax.call({data:{action:"membership_remove_auto_enroll_course",course_id:a.attr("data-id")},beforeSend:function(){l.find("p.error").remove()},success:function(e){e.success?(n.fadeOut(200),setTimeout(function(){n.remove()},400)):l.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(l)}})}),e('a[href="#llms-course-bulk-enroll"]').on("click",function(t){t.preventDefault();var a=e(this),n=(a.closest("tr"),a.closest(".llms-mb-list"));window.confirm(LLMS.l10n.translate("Click okay to enroll all active members into the selected course. Enrollment will take place in the background and you may leave your site after confirmation. This action cannot be undone!"))&&(LLMS.Spinner.start(n),window.LLMS.Ajax.call({data:{action:"bulk_enroll_membership_into_course",course_id:a.attr("data-id")},beforeSend:function(){n.find("p.error").remove()},success:function(e){e.success?a.replaceWith('<strong style="float:right;">'+e.data.message+"&nbsp;&nbsp;</strong>"):n.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(n)}}))})},this.bind_llms_order=function(){e('button[name="llms-refund-toggle"]').on("click",function(){var t=e(this),a=t.closest("tr"),n=a.attr("data-transaction-id"),l=t.attr("data-refundable"),i="1"===t.attr("data-gateway-supports"),s=t.attr("data-gateway"),r=e("#llms-txn-refund-model .llms-txn-refund-form").clone(),o=r.find(".gateway-btn");"remove"!==t.attr("data-action")?(t.text(LLMS.l10n.translate("Cancel")),t.attr("data-action","remove"),r.find("input").removeAttr("disabled"),r.find('input[name="llms_refund_amount"]').attr("max",l),r.find('input[name="llms_refund_txn_id"]').val(n),i&&(o.find(".llms-gateway-title").text(s),o.show()),a.after(r)):(t.text(LLMS.l10n.translate("Refund")),t.attr("data-action",""),a.next("tr").remove())}),e('button[name="llms-manual-txn-toggle"]').on("click",function(){var t=e(this),a=t.closest("tr"),n=e("#llms-manual-txn-model .llms-manual-txn-form").clone();"remove"!==t.attr("data-action")?(t.text(LLMS.l10n.translate("Cancel")),t.attr("data-action","remove"),n.find("input").removeAttr("disabled"),a.after(n)):(t.text(LLMS.l10n.translate("Record a Manual Payment")),t.attr("data-action",""),a.next("tr").remove())}),e(".llms-metabox").one("focus",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){e(this).attr("data-original-value")||e(this).attr("data-original-value",e(this).val())}),e(".llms-metabox").on("change",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){var t=e(this),a=t.val(),n=JSON.parse(t.closest(".llms-metabox-field").attr("data-gateway-fields")),l=n[a];for(var i in l){var s=e('input[name="'+l[i].name+'"]'),r=s.closest(".llms-metabox-field");l[i].enabled?(r.show(),s.attr("required","required"),s.removeAttr("disabled"),a===t.attr("data-original-value")&&s.val(r.attr("data-llms-editable-value"))):(s.attr("value",""),s.removeAttr("required"),r.hide())}})},this.bind_merge_code_buttons=function(t){t=t||e(".llms-merge-code-wrapper"),t.find(".llms-merge-code-button").on("click",function(){e(this).next(".llms-merge-codes").toggleClass("active")}),t.find(".llms-merge-codes li").on("click",function(){var t=e(this),a=t.closest(".llms-merge-codes"),n=a.attr("data-target"),l=t.attr("data-code");if(-1===n.indexOf("#")){var i=window.tinymce.editors[n];i?i.insertContent(l):alert(LLMS.l10n.translate("Copy this code and paste it into the desired area")+": "+l)}else e(n).val(e(n).val()+l);a.removeClass("active")})},this.bind_tabs=function(){e(".llms-nav-tab-wrapper .tabs li").on("click",function(){var t=e(this),a=t.closest(".llms-mb-container"),n=t.attr("data-tab");t.siblings().removeClass("llms-active"),a.find(".tab-content").removeClass("llms-active"),t.addClass("llms-active"),e("#"+n).addClass("llms-active")})},this.post_select=function(t){var a="multiple"===t.attr("multiple");if(t.llmsPostsSelect2({width:a?"100%":"65%"}),!a&&!t.attr("data-no-view-button")){var n=LLMS.l10n.translate("View"),l=e('<a class="llms-button-secondary small" style="margin-left:5px;" target="_blank" href="#">'+n+' <i class="fa fa-external-link" aria-hidden="true"></i></a>');t.next(".select2").after(l),t.on("change",function(){var t=e(this).val();t?l.attr("href","/?p="+t).show():l.hide()}).trigger("change")}},this.bind_tables=function(){e('.llms-table button[name="llms-expand-table"]').on("click",function(){var t=e(this),a=t.closest(".llms-table");if(t.attr("data-text")){var n=t.text();t.text(t.attr("data-text")),t.attr("data-text",n)}a.find(".expandable").each(function(){e(this).hasClass("closed")?e(this).addClass("opened").removeClass("closed"):e(this).addClass("closed").removeClass("opened")})})},this.init()};window.llms.metaboxes=new t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtbWV0YWJveGVzLmpzIiwiLi4vcGFydGlhbHMvX21ldGFib3gtZmllbGQtcmVwZWF0ZXIuanMiXSwibmFtZXMiOlsiJCIsImZuIiwibGxtc0NvbGxhcHNpYmxlIiwidGhpcyIsIm9uIiwiJHBhcmVudCIsImNsb3Nlc3QiLCIkc2libGluZ3MiLCJzaWJsaW5ncyIsInRvZ2dsZUNsYXNzIiwiZmluZCIsInNsaWRlVG9nZ2xlIiwiZWFjaCIsInJlbW92ZUNsYXNzIiwic2xpZGVVcCIsIndpbmRvdyIsImxsbXMiLCJNZXRhYm94ZXMiLCJyZXBlYXRlcnMiLCJtZXRhYm94ZXMiLCIkcmVwZWF0ZXJzIiwiaW5pdCIsInNlbGYiLCJsZW5ndGgiLCJMTE1TIiwid2FpdF9mb3IiLCJ0aW55TUNFIiwibG9hZCIsImJpbmQiLCJhdHRyIiwiaGFuZGxlX3N1Ym1pdCIsIiRyZXBlYXRlciIsIiRyb3dzIiwiJG1vZGVsIiwiRWRpdG9yTWFuYWdlciIsImV4ZWNDb21tYW5kIiwiYWRkX3JvdyIsInNvcnRhYmxlIiwiaGFuZGxlIiwiaXRlbXMiLCJzdGFydCIsImV2ZW50IiwidWkiLCJhZGRDbGFzcyIsInN0b3AiLCIkZWRzIiwiaXRlbSIsImVkX2lkIiwic2F2ZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCIkcm93IiwiY29uZmlybSIsImwxMG4iLCJ0cmFuc2xhdGUiLCJyZW1vdmUiLCJzZXRUaW1lb3V0IiwiZGF0YSIsImV4cGFuZCIsImNsb25lIiwibmV3X2luZGV4IiwiZWRpdG9yIiwicmVpbmRleCIsImtleSIsInZhbCIsIiRmaWVsZCIsImhhc0NsYXNzIiwiaSIsImFwcGVuZCIsInRpdGxlIiwidHJpZ2dlciIsImJpbmRfcm93IiwiYmluZF9yb3dfaGVhZGVyIiwibGxtc1NlbGVjdDIiLCJ3aWR0aCIsImxsbXNTdHVkZW50c1NlbGVjdDIiLCJiaW5kX2RhdGVwaWNrZXJzIiwiYmluZF9jb250cm9sbGVycyIsIiR0aXRsZSIsInRleHQiLCIkYnRuIiwiJHNwaW5uZXIiLCJwYXJlbnQiLCJpcyIsInJlbW92ZUF0dHIiLCJwcmV2ZW50RGVmYXVsdCIsIndhaXQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJvZmYiLCJzdG9yZSIsIm9iaiIsImluZGV4IiwicmVwbGFjZV9hdHRyIiwiJGVsIiwic3RyIiwicmVwbGFjZSIsIm9sZF9pbmRleCIsIiRlZCIsInNlcmlhbGl6ZSIsInJvd3MiLCJuYW1lIiwiZWRpdG9ycyIsImdldENvbnRlbnQiLCJwdXNoIiwiYWN0aW9uIiwiY2IiLCJzdG9yZV9hY3Rpb24iLCJBamF4IiwiY2FsbCIsImJlZm9yZVNlbmQiLCJTcGlubmVyIiwic3VjY2VzcyIsInIiLCJwb3N0X3NlbGVjdCIsImJpbmRfdGFicyIsImJpbmRpbmdzIiwic2VsZWN0b3IiLCJmdW5jIiwiJHNlbGVjdG9yIiwicmVkdWNlZCIsImZpbHRlciIsInBvc3QiLCJwb3N0X3R5cGUiLCJiaW5kX2NiX2NvbnRyb2xsZXJzIiwiJGNvbnRyb2xsZXJzIiwiJGNiIiwiJGNvbnRyb2xsZWQiLCJzbGlkZURvd24iLCJwb3NzaWJsZSIsInZhbHMiLCJpbmRleE9mIiwic3BsaXQiLCJiaW5kX2RhdGVwaWNrZXIiLCJmb3JtYXQiLCJtYXhEYXRlIiwibWluRGF0ZSIsImRhdGVwaWNrZXIiLCJkYXRlRm9ybWF0IiwiJGRhdGVwaWNrZXJzIiwiYmluZF9lZGl0YWJsZXMiLCJtYWtlX2VkaXRhYmxlIiwiJGlucHV0IiwiJGxhYmVsIiwidHlwZSIsInJlcXVpcmVkIiwic2VsZWN0ZWQiLCJvcHRpb25zIiwiSlNPTiIsInBhcnNlIiwibWluX2RhdGUiLCJtYXhfZGF0ZSIsIiRwaWNrZXIiLCJkYXRlIiwiaG91ciIsIm1pbnV0ZSIsImVtcHR5IiwiJGZpZWxkcyIsImJpbmRfbGxtc19lbmdhZ2VtZW50IiwiZW5nYWdlbWVudF90eXBlIiwiJHNlbGVjdCIsImNwdCIsImJpbmRfbGxtc19tZW1iZXJzaGlwIiwiJGNvbnRhaW5lciIsImNvdXJzZV9pZCIsImZhZGVPdXQiLCJwcmVwZW5kIiwibWVzc2FnZSIsInJlcGxhY2VXaXRoIiwiYmluZF9sbG1zX29yZGVyIiwidHhuX2lkIiwicmVmdW5kYWJsZV9hbW91bnQiLCJnYXRld2F5X3N1cHBvcnRzIiwiZ2F0ZXdheV90aXRsZSIsIiRuZXdfcm93IiwiJGdhdGV3YXlfYnRuIiwic2hvdyIsImFmdGVyIiwibmV4dCIsIm9uZSIsImdhdGV3YXkiLCJnYXRld2F5X2RhdGEiLCJmaWVsZCIsIiR3cmFwIiwiZW5hYmxlZCIsImhpZGUiLCJiaW5kX21lcmdlX2NvZGVfYnV0dG9ucyIsIiR3cmFwcGVycyIsInRhcmdldCIsImNvZGUiLCJ0aW55bWNlIiwiaW5zZXJ0Q29udGVudCIsImFsZXJ0IiwiJG1ldGFib3giLCJ0YWJfaWQiLCJtdWx0aSIsImxsbXNQb3N0c1NlbGVjdDIiLCJtc2ciLCJpZCIsImJpbmRfdGFibGVzIiwiJHRhYmxlIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FLQSxTQUFBQSxHQUVBQSxFQUFBQyxHQUFBQyxnQkFBQSxXQW9CQSxNQWhCQUMsTUFBQUMsR0FBQSxRQUFBLDJCQUFBLFdBRUEsR0FBQUMsR0FBQUwsRUFBQUcsTUFBQUcsUUFBQSxxQkFDQUMsRUFBQUYsRUFBQUcsU0FBQSxvQkFFQUgsR0FBQUksWUFBQSxVQUVBSixFQUFBSyxLQUFBLDBCQUFBQyxZQUFBLEtBRUFKLEVBQUFLLEtBQUEsV0FDQVosRUFBQUcsTUFBQVUsWUFBQSxVQUNBYixFQUFBRyxNQUFBTyxLQUFBLDBCQUFBSSxRQUFBLFNBS0FYLE1BSUFZLE9BQUFDLEtBQUFELE9BQUFDLFFBRUEsSUFBQUMsR0FBQSxXQzVCQWQsS0FBQWUsV0FNQUMsVUFBQWhCLEtBTUFpQixXQUFBLEtBUUFDLEtBQUEsV0FFQSxHQUFBQyxHQUFBbkIsSUFFQW1CLEdBQUFGLFdBQUFwQixFQUFBLDBCQUVBc0IsRUFBQUYsV0FBQUcsU0FHQUMsS0FBQUMsU0FBQSxXQUNBLE1BQUEsbUJBQUFDLFVBQ0EsV0FDQUosRUFBQUssT0FDQUwsRUFBQU0sU0FLQTVCLEVBQUEsNkNB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RUFBQUcsTUFBQTZELEtBQ0FzSSxHQUNBdEgsRUFBQW5ELEtBQUEsT0FBQSxPQUFBeUssR0FBQXRCLE9BRUFoRyxFQUFBeUcsU0FFQW5ILFFBQUEsWUFVQW5FLEtBQUFvTSxZQUFBLFdBRUF2TSxFQUFBLGdEQUFBSSxHQUFBLFFBQUEsV0FFQSxHQUFBNEUsR0FBQWhGLEVBQUFHLE1BQ0FxTSxFQUFBeEgsRUFBQTFFLFFBQUEsY0FHQSxJQUFBMEUsRUFBQW5ELEtBQUEsYUFBQSxDQUNBLEdBQUFrRCxHQUFBQyxFQUFBRCxNQUNBQyxHQUFBRCxLQUFBQyxFQUFBbkQsS0FBQSxjQUNBbUQsRUFBQW5ELEtBQUEsWUFBQWtELEdBSUF5SCxFQUFBOUwsS0FBQSxlQUFBRSxLQUFBLFdBRUFaLEVBQUFHLE1BQUErRCxTQUFBLFVBQ0FsRSxFQUFBRyxNQUFBd0MsU0FBQSxVQUFBOUIsWUFBQSxVQUVBYixFQUFBRyxNQUFBd0MsU0FBQSxVQUFBOUIsWUFBQSxlQVVBVixLQUFBa0IsT0FLQU4sUUFBQUMsS0FBQUcsVUFBQSxHQUFBRixJQUVBd0wiLCJmaWxlIjoibGxtcy1tZXRhYm94ZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqXG4gKiBDb250cmlidXRvcidzIE5vdGljZVxuICogXG4gKiBUaGlzIGlzIGEgY29tcGlsZWQgZmlsZSBhbmQgc2hvdWxkIG5vdCBiZSBlZGl0ZWQgZGlyZWN0bHkhXG4gKiBUaGUgdW5jb21waWxlZCBzY3JpcHQgaXMgbG9jYXRlZCBpbiB0aGUgXCJhc3NldHMvcHJpdmF0ZVwiIGRpcmVjdG9yeVxuICogXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBMaWZ0ZXJMTVMgQWRtaW4gUGFuZWwgTWV0YWJveCBGdW5jdGlvbnNcbiAqIEBzaW5jZSAgICAzLjAuMFxuICogQHZlcnNpb24gIDMuMjEuMFxuICovXG4oIGZ1bmN0aW9uKCAkICkge1xuXG5cdCQuZm4ubGxtc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgJGdyb3VwID0gdGhpcztcblxuXHRcdHRoaXMub24oICdjbGljaycsICcubGxtcy1jb2xsYXBzaWJsZS1oZWFkZXInLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRwYXJlbnQgPSAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLWNvbGxhcHNpYmxlJyApLFxuXHRcdFx0XHQkc2libGluZ3MgPSAkcGFyZW50LnNpYmxpbmdzKCAnLmxsbXMtY29sbGFwc2libGUnICk7XG5cblx0XHRcdCRwYXJlbnQudG9nZ2xlQ2xhc3MoICdvcGVuZWQnICk7XG5cblx0XHRcdCRwYXJlbnQuZmluZCggJy5sbG1zLWNvbGxhcHNpYmxlLWJvZHknICkuc2xpZGVUb2dnbGUoIDQwMCApO1xuXG5cdFx0XHQkc2libGluZ3MuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVDbGFzcyggJ29wZW5lZCcgKTtcblx0XHRcdFx0JCggdGhpcyApLmZpbmQoICcubGxtcy1jb2xsYXBzaWJsZS1ib2R5JyApLnNsaWRlVXAoIDQwMCApO1xuXHRcdFx0fSApO1xuXG5cdFx0fSApO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fTtcblxuXHR3aW5kb3cubGxtcyA9IHdpbmRvdy5sbG1zIHx8IHt9O1xuXG5cdHZhciBNZXRhYm94ZXMgPSBmdW5jdGlvbigpIHtcblxuXHRcdC8qKlxuXHRcdCAqIGxvYWQgYWxsIHBhcnRpYWxzXG5cdFx0ICovXG5cdFx0LyoqXG5cdFx0ICogTGlmdGVyTE1TIEFkbWluIE1ldGFib3ggUmVwZWF0ZXIgRmllbGRcblx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjMuMFxuXHRcdCAqL1xuXHRcdHRoaXMucmVwZWF0ZXJzID0ge1xuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBtZXRhYm94IGNsYXNzXG5cdFx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0XHQgKi9cblx0XHRcdG1ldGFib3hlczogdGhpcyxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogalF1ZXJ5IHNlbGVjdG9yIGZvciBhbGwgcmVwZWF0ZXIgZWxlbWVudHMgb24gdGhlIGN1cnJlbnQgc2NyZWVuXG5cdFx0XHQgKiBAdHlwZSAge1t0eXBlXX1cblx0XHRcdCAqL1xuXHRcdFx0JHJlcGVhdGVyczogbnVsbCxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogSW5pdFxuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjIzLjBcblx0XHRcdCAqL1xuXHRcdFx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzID0gJCggJy5sbG1zLW1iLWxpc3QucmVwZWF0ZXInICk7XG5cdFx0XG5cdFx0XHRcdGlmICggc2VsZi4kcmVwZWF0ZXJzLmxlbmd0aCApIHtcblx0XHRcblx0XHRcdFx0XHQvLyB3YWl0IGZvciB0aW55TUNFIGp1c3QgaW4gY2FzZSB0aGVpciBlZGl0b3JzIGluIHRoZSByZXBlYXRlcnNcblx0XHRcdFx0XHRMTE1TLndhaXRfZm9yKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgdGlueU1DRSApO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c2VsZi5sb2FkKCk7XG5cdFx0XHRcdFx0XHRzZWxmLmJpbmQoKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0Ly8gb24gY2xpY2sgb2YgYW55IHBvc3Qgc3VibWl0IGJ1dHRvbnMgYWRkIHNvbWUgZGF0YSB0byB0aGUgc3VibWl0IGJ1dHRvblxuXHRcdFx0XHRcdC8vIHNvIHdlIGNhbiBzZWUgd2hpY2ggYnV0dG9uIHRvIHRyaWdnZXIgYWZ0ZXIgcmVwZWF0ZXJzIGFyZSBmaW5pc2hlZFxuXHRcdFx0XHRcdCQoICcjcG9zdCBpbnB1dFt0eXBlPVwic3VibWl0XCJdLCAjcG9zdC1wcmV2aWV3JyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCAnZGF0YS1sbG1zLWNsaWNrZWQnLCAneWVzJyApO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQvLyBoYW5kbGUgcG9zdCBzdWJtaXNzaW9uXG5cdFx0XHRcdFx0JCggJyNwb3N0JyApLm9uKCAnc3VibWl0Jywgc2VsZi5oYW5kbGVfc3VibWl0ICk7XG5cdFx0XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEJpbmQgRE9NIEV2ZW50c1xuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHRcdCAqL1xuXHRcdFx0YmluZDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdHZhciAkcmVwZWF0ZXIgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0XHQkcm93cyA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cycgKSxcblx0XHRcdFx0XHRcdCRtb2RlbCA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItbW9kZWwnICk7XG5cdFx0XG5cdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgJG1vZGVsLmZpbmQoICcubGxtcy1tYi1saXN0LmVkaXRvciB0ZXh0YXJlYScgKS5hdHRyKCAnaWQnICkgKTtcblx0XHRcblx0XHRcdFx0XHQvLyBmb3IgdGhlIHJlcGVhdGVyICsgYnV0dG9uXG5cdFx0XHRcdFx0JHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1uZXctYnRuJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkX3JvdyggJHJlcGVhdGVyLCBudWxsLCB0cnVlICk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIG1ha2UgcmVwZWF0ZXIgcm93cyBzb3J0YWJsZVxuXHRcdFx0XHRcdCRyb3dzLnNvcnRhYmxlKCB7XG5cdFx0XHRcdFx0XHRoYW5kbGU6ICcubGxtcy1kcmFnLWhhbmRsZScsXG5cdFx0XHRcdFx0XHRpdGVtczogJy5sbG1zLXJlcGVhdGVyLXJvdycsXG5cdFx0XHRcdFx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHRcdFx0JHJvd3MuYWRkQ2xhc3MoICdkcmFnZ2luZycgKTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdFx0XHQkcm93cy5yZW1vdmVDbGFzcyggJ2RyYWdnaW5nJyApO1xuXHRcdFxuXHRcdFx0XHRcdFx0XHR2YXIgJGVkcyA9IHVpLml0ZW0uZmluZCggJ3RleHRhcmVhLndwLWVkaXRvci1hcmVhJyApO1xuXHRcdFx0XHRcdFx0XHQkZWRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBlZF9pZCA9ICQoIHRoaXMgKS5hdHRyKCAnaWQnICk7XG5cdFx0XHRcdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgZWRfaWQgKTtcblx0XHRcdFx0XHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VBZGRFZGl0b3InLCB0cnVlLCBlZF9pZCApO1xuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0XHRcdHNlbGYuc2F2ZSggJHJlcGVhdGVyICk7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQkcmVwZWF0ZXIub24oICdjbGljaycsICcubGxtcy1yZXBlYXRlci1yZW1vdmUnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR2YXIgJHJvdyA9ICQoIHRoaXMgKS5jbG9zZXN0KCAnLmxsbXMtcmVwZWF0ZXItcm93JyApO1xuXHRcdFx0XHRcdFx0aWYgKCB3aW5kb3cuY29uZmlybSggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByb3c/IFRoaXMgY2Fubm90IGJlIHVuZG9uZS4nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0JHJvdy5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5zYXZlKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0XHRcdFx0fSwgMSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQWRkIGEgbmV3IHJvdyB0byBhIHJlcGVhdGVyIHJvd3MgZ3JvdXBcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByZXBlYXRlciB0byBhZGQgYSByb3cgdG9cblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgZGF0YSAgICAgICBvcHRpb25hbCBvYmplY3Qgb2YgZGF0YSB0byBmaWxsIGZpZWxkcyBpbiB0aGUgcm93IHdpdGhcblx0XHRcdCAqIEBwYXJhbSAgICBib29sICAgZXhwYW5kICAgICBpZiB0cnVlLCB3aWxsIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgcm93IGFmdGVyIGFkZGluZyBpdCB0byB0aGUgZG9tXG5cdFx0XHQgKiBAcmV0dXJuIFx0IHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0YWRkX3JvdzogZnVuY3Rpb24oICRyZXBlYXRlciwgZGF0YSwgZXhwYW5kICkge1xuXHRcdFxuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdFx0JHJvd3MgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MnICksXG5cdFx0XHRcdFx0JG1vZGVsID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1tb2RlbCcgKSxcblx0XHRcdFx0XHQkcm93ID0gJG1vZGVsLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3cnICkuY2xvbmUoKSxcblx0XHRcdFx0XHRuZXdfaW5kZXggPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKS5sZW5ndGgsXG5cdFx0XHRcdFx0ZWRpdG9yID0gc2VsZi5yZWluZGV4KCAkcm93LCBuZXdfaW5kZXggKTtcblx0XHRcblx0XHRcdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0XHRcdCQuZWFjaCggZGF0YSwgZnVuY3Rpb24oIGtleSwgdmFsICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0dmFyICRmaWVsZCA9ICRyb3cuZmluZCggJ1tuYW1lXj1cIicgKyBrZXkgKyAnXCJdJyk7XG5cdFx0XG5cdFx0XHRcdFx0XHRpZiAoICRmaWVsZC5oYXNDbGFzcyggJ2xsbXMtc2VsZWN0Mi1zdHVkZW50JyApICkge1xuXHRcdFx0XHRcdFx0XHQkLmVhY2goIHZhbCwgZnVuY3Rpb24oIGksIGRhdGEgKSB7XG5cdFx0XHRcdFx0XHRcdFx0JGZpZWxkLmFwcGVuZCggJzxvcHRpb24gdmFsdWU9XCInICsgZGF0YS5rZXkgKyAnXCIgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPicgKyBkYXRhLnRpdGxlICsgJzwvb3B0aW9uPicpXG5cdFx0XHRcdFx0XHRcdH0gKSA7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLnZhbCggdmFsICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuYmluZF9yb3coICRyb3cgKTtcblx0XHRcdFx0fSwgMSApO1xuXHRcdFxuXHRcdFx0XHQkcm93cy5hcHBlbmQoICRyb3cgKTtcblx0XHRcdFx0aWYgKCBleHBhbmQgKSB7XG5cdFx0XHRcdFx0JHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyJyApLnRyaWdnZXIoICdjbGljaycgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VBZGRFZGl0b3InLCB0cnVlLCBlZGl0b3IgKTtcblx0XHRcblx0XHRcdFx0JHJlcGVhdGVyLnRyaWdnZXIoICdsbG1zLW5ldy1yZXBlYXRlci1yb3cnLCB7XG5cdFx0XHRcdFx0JHJvdzogJHJvdyxcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBCaW5kIERPTSBldmVudHMgZm9yIGEgc2luZ2xlIHJlcGVhdGVyIHJvd1xuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHRcdCAqL1xuXHRcdFx0YmluZF9yb3c6IGZ1bmN0aW9uKCAkcm93ICkge1xuXHRcdFxuXHRcdFx0XHR0aGlzLmJpbmRfcm93X2hlYWRlciggJHJvdyApO1xuXHRcdFxuXHRcdFx0XHQkcm93LmZpbmQoICcubGxtcy1zZWxlY3QyJyApLmxsbXNTZWxlY3QyKCB7XG5cdFx0XHRcdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHQkcm93LmZpbmQoICcubGxtcy1zZWxlY3QyLXN0dWRlbnQnICkubGxtc1N0dWRlbnRzU2VsZWN0MigpO1xuXHRcdFxuXHRcdFx0XHR0aGlzLm1ldGFib3hlcy5iaW5kX2RhdGVwaWNrZXJzKCAkcm93LmZpbmQoICcubGxtcy1kYXRlcGlja2VyJyApICk7XG5cdFx0XHRcdHRoaXMubWV0YWJveGVzLmJpbmRfY29udHJvbGxlcnMoICRyb3cuZmluZCggJ1tkYXRhLWlzLWNvbnRyb2xsZXJdJyApICk7XG5cdFx0XHRcdC8vIHRoaXMubWV0YWJveGVzLmJpbmRfbWVyZ2VfY29kZV9idXR0b25zKCAkcm93LmZpbmQoICcubGxtcy1tZXJnZS1jb2RlLXdyYXBwZXInICkgKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEJpbmQgcm93IGhlYWRlciBldmVudHNcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAkcm93ICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByb3dcblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0XHQgKi9cblx0XHRcdGJpbmRfcm93X2hlYWRlcjogZnVuY3Rpb24oICRyb3cgKSB7XG5cdFx0XG5cdFx0XHRcdC8vIGhhbmRsZSB0aGUgdGl0bGUgZmllbGQgYmluZGluZ1xuXHRcdFx0XHR2YXIgJHRpdGxlID0gJHJvdy5maW5kKCAnLmxsbXMtcmVwZWF0ZXItdGl0bGUnICksXG5cdFx0XHRcdFx0JGZpZWxkID0gJHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyLXRpdGxlLWZpZWxkJyApO1xuXHRcdFxuXHRcdFx0XHQkdGl0bGUuYXR0ciggJ2RhdGEtZGVmYXVsdCcsICR0aXRsZS50ZXh0KCkgKTtcblx0XHRcblx0XHRcdFx0JGZpZWxkLm9uKCAna2V5dXAgZm9jdXNvdXQgYmx1cicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdFx0aWYgKCAhIHZhbCApIHtcblx0XHRcdFx0XHRcdHZhbCA9ICR0aXRsZS5hdHRyKCAnZGF0YS1kZWZhdWx0JyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkdGl0bGUudGV4dCggdmFsICk7XG5cdFx0XHRcdH0gKS50cmlnZ2VyKCAna2V5dXAnICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBIYW5kbGUgV1AgUG9zdCBmb3JtIHN1Ym1pc3Npb24gdG8gZW5zdXJlIHJlcGVhdGVycyBhcmUgc2F2ZWQgYmVmb3JlIHN1Ym1pdHRpbmcgdGhlIGZvcm0gdG8gc2F2ZS9wdWJsaXNoIHRoZSBwb3N0XG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgZSAgSlMgZXZlbnQgb2JqZWN0XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMjMuMFxuXHRcdFx0ICovXG5cdFx0XHRoYW5kbGVfc3VibWl0OiBmdW5jdGlvbiggZSApIHtcblx0XHRcblx0XHRcdFx0Ly8gZ2V0IHRoZSBidXR0b24gdXNlZCB0byBzdWJtaXQgdGhlIGZvcm1cblx0XHRcdFx0dmFyICRidG4gPSAkKCAnI3Bvc3QgW2RhdGEtbGxtcy1jbGlja2VkPVwieWVzXCJdJyApLFxuXHRcdFx0XHRcdCRzcGlubmVyID0gJGJ0bi5wYXJlbnQoKS5maW5kKCAnLnNwaW5uZXInICk7XG5cdFx0XG5cdFx0XHRcdGlmICggJGJ0bi5pcyggJyNwb3N0LXByZXZpZXcnICkgKSB7XG5cdFx0XHRcdFx0JGJ0bi5yZW1vdmVBdHRyKCAnZGF0YS1sbG1zLWNsaWNrZWQnICk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHRcdFx0Ly8gY29yZSBVWCB0byBwcmV2ZW50IG11bHRpLWNsaWNrL29yIHRoZSBhcHBlYXJhbmNlIG9mIGEgZGVsYXlcblx0XHRcdFx0JCggJyNwb3N0IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0nICkuYWRkQ2xhc3MoICdkaXNhYmxlZCcgKS5hdHRyKCAnZGlzYWJsZWQnLCAnZGlzYWJsZWQnICk7XG5cdFx0XHRcdCRzcGlubmVyLmFkZENsYXNzKCAnaXMtYWN0aXZlJyApO1xuXHRcdFxuXHRcdFx0XHR2YXIgc2VsZiA9IHdpbmRvdy5sbG1zLm1ldGFib3hlcy5yZXBlYXRlcnMsXG5cdFx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdFx0d2FpdDtcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuc2F2ZSggJCggdGhpcyApICk7XG5cdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0d2FpdCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0XHRpZiAoIGkgPj0gNTkgfHwgISAkKCAnLmxsbXMtbWItbGlzdC5yZXBlYXRlci5wcm9jZXNzaW5nJyApLmxlbmd0aCApIHtcblx0XHRcblx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoIHdhaXQgKTtcblx0XHRcdFx0XHRcdCQoICcjcG9zdCcgKS5vZmYoICdzdWJtaXQnLCB0aGlzLmhhbmRsZV9zdWJtaXQgKTtcblx0XHRcdFx0XHRcdCRzcGlubmVyLnJlbW92ZUNsYXNzKCAnaXMtYWN0aXZlJyApO1xuXHRcdFx0XHRcdFx0JGJ0bi5yZW1vdmVDbGFzcyggJ2Rpc2FibGVkJyApLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cdFx0XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcblx0XHRcdFx0XHRcdGkrKztcblx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdH0sIDEwMDAgKTtcblx0XHRcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIExvYWQgcmVwZXJlYXRlciBkYXRhIGZyb20gdGhlIHNlcnZlciBhbmQgY3JlYXRlIHJvd3MgaW4gdGhlIERPTVxuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjEyLjFcblx0XHRcdCAqL1xuXHRcdFx0bG9hZDogZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcblx0XHRcdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdHZhciAkcmVwZWF0ZXIgPSAkKCB0aGlzICk7XG5cdFx0XG5cdFx0XHRcdFx0Ly8gZW5zdXJlIHRoZSByZXBlYXRlciBpcyBvbmx5IGxvYWRlZCBvbmNlIHRvIHByZXZlbnQgZHVwbGljYXRlcyByZXN1bHRpbmcgZnJvbSBkdXBsaWNhdGluZyBiaW5kaW5nXG5cdFx0XHRcdFx0Ly8gb24gY2VydGFpbiBzaXRlcyB3aGljaCBJIGNhbm5vdCBxdWl0ZSBleHBsYWluLi4uXG5cdFx0XHRcdFx0aWYgKCAkcmVwZWF0ZXIuaGFzQ2xhc3MoICdpcy1sb2FkZWQnICkgfHwgJHJlcGVhdGVyLmhhc0NsYXNzKCAncHJvY2Vzc2luZycgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdFx0c2VsZi5zdG9yZSggJHJlcGVhdGVyLCAnbG9hZCcsIGZ1bmN0aW9uKCBkYXRhICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0JHJlcGVhdGVyLmFkZENsYXNzKCAnaXMtbG9hZGVkJyApO1xuXHRcdFxuXHRcdFx0XHRcdFx0JC5lYWNoKCBkYXRhLmRhdGEsIGZ1bmN0aW9uKCBpLCBvYmogKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuYWRkX3JvdyggJHJlcGVhdGVyLCBvYmosIGZhbHNlICk7XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0XHQvLyBmb3IgZWFjaCByb3cgd2l0aGluIHRoZSByZXBlYXRlclxuXHRcdFx0XHRcdFx0JHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3dzIC5sbG1zLXJlcGVhdGVyLXJvdycgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5iaW5kX3JvdyggJCggdGhpcyApICk7XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFxuXHRcdFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBSZWluZGV4IGEgcm93XG5cdFx0XHQgKiByZW5hbWVzIGlkcywgYXR0cnMsIGFuZCBldGMuLi5cblx0XHRcdCAqIFVzZWQgd2hlbiBjbG9uaW5nIHRoZSBtb2RlbCBmb3IgbmV3IHJvd3Ncblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgICAgICAgJHJvdyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcm93XG5cdFx0XHQgKiBAcGFyYW0gICAgaW50fHN0cmluZyAgIGluZGV4ICBpbmRleCAob3IgaWQpIHRvIHVzZSB3aGVuIHJlbmFtaW5nXG5cdFx0XHQgKiBAcmV0dXJuICAgc3RyaW5nXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0XHQgKi9cblx0XHRcdHJlaW5kZXg6IGZ1bmN0aW9uKCAkcm93LCBpbmRleCApIHtcblx0XHRcblx0XHRcdFx0dmFyIG9sZF9pbmRleCA9ICRyb3cuYXR0ciggJ2RhdGEtcm93LW9yZGVyJyApLFxuXHRcdFx0XHRcdCRlZCA9ICRyb3cuZmluZCggJy5sbG1zLW1iLWxpc3QuZWRpdG9yIHRleHRhcmVhJyApO1xuXHRcdFxuXHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VSZW1vdmVFZGl0b3InLCB0cnVlLCAkZWQuYXR0ciggJ2lkJyApICk7XG5cdFx0XG5cdFx0XHRcdGZ1bmN0aW9uIHJlcGxhY2VfYXR0ciggJGVsLCBhdHRyICkge1xuXHRcdFx0XHRcdCRlbC5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHZhciBzdHIgPSAkKCB0aGlzICkuYXR0ciggYXR0ciApO1xuXHRcdFx0XHRcdFx0JCggdGhpcyApLmF0dHIoIGF0dHIsIHN0ci5yZXBsYWNlKCBvbGRfaW5kZXgsIGluZGV4ICkgKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH07XG5cdFx0XG5cdFx0XHRcdCRyb3cuYXR0ciggJ2RhdGEtcm93LW9yZGVyJywgaW5kZXggKTtcblx0XHRcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LCAnZGF0YS1yb3ctb3JkZXInICk7XG5cdFx0XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnYnV0dG9uLmluc2VydC1tZWRpYScgKSwgJ2RhdGEtZWRpdG9yJyApO1xuXHRcdFxuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2lucHV0W25hbWVePVwiX2xsbXNcIl0sIHRleHRhcmVhW25hbWVePVwiX2xsbXNcIl0sIHNlbGVjdFtuYW1lXj1cIl9sbG1zXCJdJyApLCAnaWQnICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgdGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICksICduYW1lJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ1tkYXRhLWNvbnRyb2xsZXJdJyApLCAnZGF0YS1jb250cm9sbGVyJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ1tkYXRhLWNvbnRyb2xsZXJdJyApLCAnZGF0YS1jb250cm9sbGVyJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2J1dHRvbi53cC1zd2l0Y2gtZWRpdG9yJyApLCAnZGF0YS13cC1lZGl0b3ItaWQnICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnYnV0dG9uLndwLXN3aXRjaC1lZGl0b3InICksICdpZCcgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICcud3AtZWRpdG9yLXRvb2xzJyApLCAnaWQnICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnLndwLWVkaXRvci1jb250YWluZXInICksICdpZCcgKTtcblx0XHRcblx0XHRcblx0XHRcdFx0cmV0dXJuICRlZC5hdHRyKCAnaWQnICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBTYXZlIGEgc2luZ2xlIHJlcGVhdGVycyBkYXRhIHRvIHRoZSBzZXJ2ZXJcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgYSByZXBlYXRlciBlbGVtZW50XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pc1xuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHRcdFx0ICovXG5cdFx0XHRzYXZlOiBmdW5jdGlvbiggJHJlcGVhdGVyICkge1xuXHRcdFx0XHQkcmVwZWF0ZXIudHJpZ2dlciggJ2xsbXMtcmVwZWF0ZXItYmVmb3JlLXNhdmUnLCB7ICRlbDogJHJlcGVhdGVyIH0gKTtcblx0XHRcdFx0dGhpcy5zdG9yZSggJHJlcGVhdGVyLCAnc2F2ZScgKTtcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIENvbnZlcnQgYSByZXBlYXRlciBlbGVtZW50IGludG8gYW4gYXJyYXkgb2Ygb2JqZWN0cyB0aGF0IGNhbiBiZSBzYXZlZCB0byB0aGUgZGF0YWJhc2Vcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgYSByZXBlYXRlciBlbGVtZW50XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdFx0ICovXG5cdFx0XHRzZXJpYWxpemU6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIgKSB7XG5cdFx0XG5cdFx0XHRcdHZhciByb3dzID0gW107XG5cdFx0XG5cdFx0XHRcdCRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cyAubGxtcy1yZXBlYXRlci1yb3cnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdFx0dmFyIG9iaiA9IHt9O1xuXHRcdFxuXHRcdFx0XHRcdC8vIGVhc3kuLi5cblx0XHRcdFx0XHQkKCB0aGlzICkuZmluZCggJ2lucHV0W25hbWVePVwiX2xsbXNcIl0sIHNlbGVjdFtuYW1lXj1cIl9sbG1zXCJdJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0b2JqWyAkKCB0aGlzICkuYXR0ciggJ25hbWUnICkgXSA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0Ly8gY2hlY2sgaWYgdGhlIHRleHRhcmVhIGlzIGEgdGlueU1DRSBpbnN0YW5jZVxuXHRcdFx0XHRcdCQoIHRoaXMgKS5maW5kKCAndGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0XHRcdHZhciBuYW1lID0gJCggdGhpcyApLmF0dHIoICduYW1lJyApO1xuXHRcdFxuXHRcdFx0XHRcdFx0Ly8gaWYgaXQgaXMgYW4gZWRpdG9yXG5cdFx0XHRcdFx0XHRpZiAoIHRpbnlNQ0UuZWRpdG9yc1sgbmFtZSBdICkge1xuXHRcdFx0XHRcdFx0XHRvYmpbIG5hbWUgXSA9IHRpbnlNQ0UuZWRpdG9yc1sgbmFtZSBdLmdldENvbnRlbnQoKTtcblx0XHRcdFx0XHRcdC8vIGdyYWIgdGhlIHZhbCBvZiB0aGUgdGV4dGFyZWFcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdG9ialsgbmFtZSBdID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHRyb3dzLnB1c2goIG9iaiApO1xuXHRcdFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdHJldHVybiByb3dzO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQUpBWCBtZXRob2QgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIHJlcGVhdGVyJ3MgaGFuZGxlciBvbiB0aGUgc2VydmVyXG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgICRyZXBlYXRlciAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcmVwZWF0ZXIgZWxlbWVudFxuXHRcdFx0ICogQHBhcmFtICAgIHN0cmluZyAgICBhY3Rpb24gICAgIGFjdGlvbiB0byBjYWxsIFtzYXZlfGxvYWRdXG5cdFx0XHQgKiBAcGFyYW0gICAgZnVuY3Rpb24gIGNiICAgICAgICAgY2FsbGJhY2sgZnVuY3Rpb25cblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0XHQgKi9cblx0XHRcdHN0b3JlOiBmdW5jdGlvbiggJHJlcGVhdGVyLCBhY3Rpb24sIGNiICkge1xuXHRcdFxuXHRcdFx0XHRjYiA9IGNiIHx8IGZ1bmN0aW9uKCl7fTtcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRcdGRhdGEgPSB7XG5cdFx0XHRcdFx0XHRhY3Rpb246ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItZmllbGQtaGFuZGxlcicgKS52YWwoKSxcblx0XHRcdFx0XHRcdHN0b3JlX2FjdGlvbjogYWN0aW9uLFxuXHRcdFx0XHRcdH07XG5cdFx0XG5cdFx0XHRcdGlmICggJ3NhdmUnID09PSBhY3Rpb24gKSB7XG5cdFx0XHRcdFx0ZGF0YS5yb3dzID0gc2VsZi5zZXJpYWxpemUoICRyZXBlYXRlciApO1xuXHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0XHRcdCRyZXBlYXRlci5hZGRDbGFzcyggJ3Byb2Nlc3NpbmcnICk7XG5cdFx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RhcnQoICRyZXBlYXRlciApO1xuXHRcdFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cdFx0XG5cdFx0XHRcdFx0XHRjYiggciApO1xuXHRcdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICRyZXBlYXRlciApO1xuXHRcdFx0XHRcdFx0JHJlcGVhdGVyLnJlbW92ZUNsYXNzKCAncHJvY2Vzc2luZycgKTtcblx0XHRcblx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdH1cblx0XHRcblx0XHR9O1xuXHRcdHRoaXMucmVwZWF0ZXJzLmluaXQoKTtcblx0XHRcblxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0XHQgKi9cblx0XHR0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQkKCAnLmxsbXMtc2VsZWN0Mi1wb3N0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLnBvc3Rfc2VsZWN0KCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0JCggJy5sbG1zLWNvbGxhcHNpYmxlLWdyb3VwJyApLmxsbXNDb2xsYXBzaWJsZSgpO1xuXG5cdFx0XHR0aGlzLmJpbmRfdGFicygpO1xuXG5cdFx0XHQvLyBiaW5kIGV2ZXJ5dGhpbmcgYmV0dGVyIGFuZCBsZXNzIHJlcGV0YXRpdmVseS4uLlxuXHRcdFx0dmFyIGJpbmRpbmdzID0gW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICcubGxtcy1kYXRlcGlja2VyJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX2RhdGVwaWNrZXJzJyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnLmxsbXMtc2VsZWN0MicgKSxcblx0XHRcdFx0XHRmdW5jOiBmdW5jdGlvbiggJHNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0JHNlbGVjdG9yLmxsbXNTZWxlY3QyKCB7XG5cdFx0XHRcdFx0XHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnLmxsbXMtc2VsZWN0Mi1zdHVkZW50JyApLFxuXHRcdFx0XHRcdGZ1bmM6IGZ1bmN0aW9uKCAkc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHQkc2VsZWN0b3IubGxtc1N0dWRlbnRzU2VsZWN0MigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtY29udHJvbHNdJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX2NiX2NvbnRyb2xsZXJzJyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnW2RhdGEtaXMtY29udHJvbGxlcl0nICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfY29udHJvbGxlcnMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICcubGxtcy10YWJsZScgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF90YWJsZXMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICcubGxtcy1tZXJnZS1jb2RlLXdyYXBwZXInICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfbWVyZ2VfY29kZV9idXR0b25zJyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHNlbGVjdG9yOiAkKCAnYS5sbG1zLWVkaXRhYmxlJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX2VkaXRhYmxlcycsXG5cdFx0XHRcdH0sXG5cdFx0XHRdO1xuXG5cdFx0XHQvLyBiaW5kIGFsbCB0aGUgYmluZGFibGVzIGJ1dCBkb24ndCBiaW5kIHRoaW5ncyBpbiByZXBlYXRlcnNcblx0XHRcdCQuZWFjaCggYmluZGluZ3MsIGZ1bmN0aW9uKCBpbmRleCwgb2JqICkge1xuXG5cdFx0XHRcdGlmICggb2JqLnNlbGVjdG9yLmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIHJlZHVjZSB0aGUgc2VsZWN0b3IgdG8gZXhjbHVkZSBpdGVtcyBpbiBhIHJlcGVhdGVyXG5cdFx0XHRcdFx0dmFyIHJlZHVjZWQgPSBvYmouc2VsZWN0b3IuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiAoIDAgPT09ICQoIHRoaXMgKS5jbG9zZXN0KCAnLmxsbXMtcmVwZWF0ZXItbW9kZWwnICkubGVuZ3RoICk7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0Ly8gYmluZCBieSBzdHJpbmdcblx0XHRcdFx0XHRpZiAoICdzdHJpbmcnID09PSB0eXBlb2Ygb2JqLmZ1bmMgKSB7XG5cdFx0XHRcdFx0XHRzZWxmWyBvYmouZnVuYyBdKCByZWR1Y2VkICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIGJpbmQgYnkgYW4gYW5vbnltb3VzIGZ1bmN0aW9uXG5cdFx0XHRcdFx0ZWxzZSBpZiAoICdmdW5jdGlvbicgPT09IHR5cGVvZiBvYmouZnVuYyApIHtcblx0XHRcdFx0XHRcdG9iai5mdW5jKCByZWR1Y2VkICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBpZiBhIHBvc3QgdHlwZSBpcyBzZXQgJiBhIGJpbmQgZXhpc3RzIGZvciBpdCwgYmluZCBpdFxuXHRcdFx0aWYgKCB3aW5kb3cubGxtcy5wb3N0LnBvc3RfdHlwZSApIHtcblxuXHRcdFx0XHR2YXIgZnVuYyA9ICdiaW5kXycgKyB3aW5kb3cubGxtcy5wb3N0LnBvc3RfdHlwZTtcblxuXHRcdFx0XHRpZiAoICdmdW5jdGlvbicgPT09IHR5cGVvZiB0aGlzW2Z1bmNdICkge1xuXG5cdFx0XHRcdFx0dGhpc1tmdW5jXSgpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgY2hlY2tib3hlcyB0aGF0IGNvbnRyb2wgdGhlIGRpc3BsYXkgb2Ygb3RoZXIgZWxlbWVudHNcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGNvbnRyb2xsZXJzcyAgalF1ZXJ5IHNlbGN0b3IgZm9yIGNoZWNrYm94ZXMgdG8gYmUgYm91bmQgYXMgY2hlY2tib3ggY29udHJvbGxlcnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfY2JfY29udHJvbGxlcnMgPSBmdW5jdGlvbiggJGNvbnRyb2xsZXJzICkge1xuXG5cdFx0XHQkY29udHJvbGxlcnMgPSAkY29udHJvbGxlcnMgfHwgJCggJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXVtkYXRhLWNvbnRyb2xzXScgKTtcblxuXHRcdFx0JGNvbnRyb2xsZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkY2IgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JGNvbnRyb2xsZWQgPSAkKCAkY2IuYXR0ciggJ2RhdGEtY29udHJvbHMnICkgKS5jbG9zZXN0KCAnLmxsbXMtbWItbGlzdCcgKTtcblxuXHRcdFx0XHQkY2Iub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGlmICggJCggdGhpcyApLmlzKCAnOmNoZWNrZWQnICkgKSB7XG5cblx0XHRcdFx0XHRcdCRjb250cm9sbGVkLnNsaWRlRG93biggMjAwICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQkY29udHJvbGxlZC5zbGlkZVVwKCAyMDAgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0JGNiLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGVsZW1lbnRzIHRoYXQgY29udHJvbCB0aGUgZGlzcGxheSBvZiBvdGhlciBlbGVtZW50c1xuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkY29udHJvbGxlcnNzICBqUXVlcnkgc2VsY3RvciBmb3IgZWxlbWVudHMgdG8gYmUgYm91bmQgYXMgY2hlY2tib3ggY29udHJvbGxlcnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfY29udHJvbGxlcnMgPSBmdW5jdGlvbiggJGNvbnRyb2xsZXJzICkge1xuXG5cdFx0XHQkY29udHJvbGxlcnMgPSAkY29udHJvbGxlcnMgfHwgJCggJ1tkYXRhLWlzLWNvbnRyb2xsZXJdJyApO1xuXG5cdFx0XHQkY29udHJvbGxlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRlbCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkY29udHJvbGxlZCA9ICQoICdbZGF0YS1jb250cm9sbGVyPVwiIycgKyAkZWwuYXR0ciggJ2lkJyApICsgJ1wiXScgKSxcblx0XHRcdFx0XHR2YWw7XG5cblx0XHRcdFx0JGVsLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRpZiAoICdjaGVja2JveCcgPT09ICRlbC5hdHRyKCAndHlwZScgKSApIHtcblxuXHRcdFx0XHRcdFx0dmFsID0gJGVsLmlzKCAnOmNoZWNrZWQnICkgPyAkZWwudmFsKCkgOiAnZmFsc2UnO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFsID0gJGVsLnZhbCgpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0JGNvbnRyb2xsZWQuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdHZhciBwb3NzaWJsZSA9ICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1jb250cm9sbGVyLXZhbHVlJyApLFxuXHRcdFx0XHRcdFx0XHR2YWxzID0gW107XG5cblx0XHRcdFx0XHRcdGlmICggLTEgIT09IHBvc3NpYmxlLmluZGV4T2YoICcsJyApICkge1xuXG5cdFx0XHRcdFx0XHRcdHZhbHMgPSBwb3NzaWJsZS5zcGxpdCggJywnICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0dmFscy5wdXNoKCBwb3NzaWJsZSApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmICggLTEgIT09IHZhbHMuaW5kZXhPZiggdmFsICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0JCggdGhpcyApLnNsaWRlRG93biggMjAwICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0JCggdGhpcyApLnNsaWRlVXAoIDIwMCApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9ICk7XG5cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0JGVsLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGEgc2luZ2xlIGRhdGVwaWNrZXIgZWxlbWVudFxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkZWwgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGlucHV0IHRvIGJpbmQgdGhlIGRhdGVwaWNrZXIgdG9cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjEwLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfZGF0ZXBpY2tlciA9IGZ1bmN0aW9uKCAkZWwgKSB7XG5cdFx0XHR2YXIgZm9ybWF0ID0gJGVsLmF0dHIoICdkYXRhLWZvcm1hdCcgKSB8fCAnbW0vZGQveXknLFxuXHRcdFx0XHRtYXhEYXRlID0gJGVsLmF0dHIoICdkYXRhLW1heC1kYXRlJyApIHx8IG51bGwsXG5cdFx0XHRcdG1pbkRhdGUgPSAkZWwuYXR0ciggJ2RhdGEtbWluLWRhdGUnICkgfHwgbnVsbDtcblx0XHRcdCRlbC5kYXRlcGlja2VyKCB7XG5cdFx0XHRcdGRhdGVGb3JtYXQ6IGZvcm1hdCxcblx0XHRcdFx0bWF4RGF0ZTogbWF4RGF0ZSxcblx0XHRcdFx0bWluRGF0ZTogbWluRGF0ZSxcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGFsbCBMaWZ0ZXJMTVMgZGF0ZXBpY2tlcnNcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGRhdGVwaWNrZXJzICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBlbGVtZW50cyB0byBiaW5kXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2RhdGVwaWNrZXJzID0gZnVuY3Rpb24oICRkYXRlcGlja2VycyApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQkZGF0ZXBpY2tlcnMgPSAkZGF0ZXBpY2tlcnMgfHwgJCgnLmxsbXMtZGF0ZXBpY2tlcicpO1xuXG5cdFx0XHQkZGF0ZXBpY2tlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuYmluZF9kYXRlcGlja2VyKCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGxsbXMtZWRpdGFibGUgbWV0YWJveCBmaWVsZHMgYW5kIHJlbGF0ZWQgZG9tIGludGVyYWN0aW9uc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjI4LjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfZWRpdGFibGVzID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0ZnVuY3Rpb24gbWFrZV9lZGl0YWJsZSggJGZpZWxkICkge1xuXG5cdFx0XHRcdHZhciAkbGFiZWwgPSAkZmllbGQuZmluZCggJ2xhYmVsJyApLmNsb25lKCksXG5cdFx0XHRcdFx0bmFtZSA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlJyApLFxuXHRcdFx0XHRcdHR5cGUgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS10eXBlJyApLFxuXHRcdFx0XHRcdHJlcXVpcmVkID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtcmVxdWlyZWQnICkgfHwgJ25vJyxcblx0XHRcdFx0XHR2YWwgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS12YWx1ZScgKSxcblx0XHRcdFx0XHQkaW5wdXQ7XG5cblx0XHRcdFx0cmVxdWlyZWQgPSAoICd5ZXMnID09PSByZXF1aXJlZCApID8gJyByZXF1aXJlZD1cInJlcXVpcmVkXCInIDogJyc7XG5cblx0XHRcdFx0aWYgKCAnc2VsZWN0JyA9PT0gdHlwZSApIHtcblxuXHRcdFx0XHRcdHZhciBvcHRpb25zID0gSlNPTi5wYXJzZSggJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtb3B0aW9ucycgKSApLFxuXHRcdFx0XHRcdFx0c2VsZWN0ZWQ7XG5cblx0XHRcdFx0XHQkaW5wdXQgPSAkKCAnPHNlbGVjdCBuYW1lPVwiJyArIG5hbWUgKyAnXCInICsgcmVxdWlyZWQgKyAnIC8+Jyk7XG5cdFx0XHRcdFx0Zm9yICggdmFyIGtleSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWQgPSB2YWwgPT09IGtleSA/ICcgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyA6ICcnO1xuXHRcdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJzxvcHRpb24gdmFsdWU9XCInICsga2V5ICsgJ1wiJyArIHNlbGVjdGVkICsgJz4nICsgb3B0aW9uc1sga2V5IF0gKyAnPC9vcHRpb24+JyApO1xuXHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdH0gZWxzZSBpZiAoICdkYXRldGltZScgPT09IHR5cGUgKSB7XG5cblx0XHRcdFx0XHQkaW5wdXQgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtZGF0ZXRpbWUtZmllbGRcIiAvPicgKTtcblxuXHRcdFx0XHRcdHZhbCA9IEpTT04ucGFyc2UoIHZhbCApO1xuXHRcdFx0XHRcdHZhciBmb3JtYXQgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS1kYXRlLWZvcm1hdCcgKSB8fCAnJyxcblx0XHRcdFx0XHRcdG1pbl9kYXRlID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtZGF0ZS1taW4nICkgfHwgJycsXG5cdFx0XHRcdFx0XHRtYXhfZGF0ZSA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLWRhdGUtbWF4JyApIHx8ICcnO1xuXG5cdFx0XHRcdFx0JHBpY2tlciA9ICQoICc8aW5wdXQgY2xhc3M9XCJsbG1zLWRhdGUtaW5wdXQgbGxtcy1kYXRlcGlja2VyXCIgZGF0YS1mb3JtYXQ9XCInICsgZm9ybWF0ICsgJ1wiIGRhdGEtbWF4LWRhdGU9XCInICsgbWF4X2RhdGUgKyAnXCIgZGF0YS1taW4tZGF0ZT1cIicgKyBtaW5fZGF0ZSArICdcIiBuYW1lPVwiJyArIG5hbWUgKyAnW2RhdGVdXCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIicgKyAgdmFsLmRhdGUgKyAnXCI+JyApO1xuXHRcdFx0XHRcdHNlbGYuYmluZF9kYXRlcGlja2VyKCAkcGlja2VyICk7XG5cdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJHBpY2tlciApO1xuXHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICc8ZW0+QDwvZW0+Jyk7XG5cblx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAnPGlucHV0IGNsYXNzPVwibGxtcy10aW1lLWlucHV0XCIgbWF4PVwiMjNcIiBtaW49XCIwXCIgbmFtZT1cIicgKyBuYW1lICsgJ1tob3VyXVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIicgKyAgdmFsLmhvdXIgKyAnXCI+JyApO1xuXHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICc8ZW0+OjwvZW0+Jyk7XG5cdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJzxpbnB1dCBjbGFzcz1cImxsbXMtdGltZS1pbnB1dFwiIG1heD1cIjU5XCIgbWluPVwiMFwiIG5hbWU9XCInICsgbmFtZSArICdbbWludXRlXVwiIHR5cGU9XCJudW1iZXJcIiB2YWx1ZT1cIicgKyAgdmFsLm1pbnV0ZSArICdcIj4nICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdCRpbnB1dCA9ICQoICc8aW5wdXQgbmFtZT1cIicgKyBuYW1lICsgJ1wiIHR5cGU9XCInICsgdHlwZSArICdcIiB2YWx1ZT1cIicgKyB2YWwgKyAnXCInICsgcmVxdWlyZWQgKyAnPicpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGZpZWxkLmVtcHR5KCkuYXBwZW5kKCAkbGFiZWwgKS5hcHBlbmQoICRpbnB1dCApO1xuXHRcdFx0XHRpZiAoICdzZWxlY3QnID09PSB0eXBlICkge1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JGlucHV0LnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cdFx0XHRcdFx0fSwgMTAwICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fTtcblxuXHRcdFx0JCggJ2EubGxtcy1lZGl0YWJsZScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRmaWVsZHM7XG5cblx0XHRcdFx0aWYgKCAkYnRuLmF0dHIoICdkYXRhLWZpZWxkcycgKSApIHtcblx0XHRcdFx0XHQkZmllbGRzID0gJCggJGJ0bi5hdHRyKCAnZGF0YS1maWVsZHMnICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkZmllbGRzID0gJGJ0bi5jbG9zZXN0KCAnLmxsbXMtbWV0YWJveC1zZWN0aW9uJyApLmZpbmQoICdbZGF0YS1sbG1zLWVkaXRhYmxlXScgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRidG4ucmVtb3ZlKCk7XG5cblx0XHRcdFx0JGZpZWxkcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRtYWtlX2VkaXRhYmxlKCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBFbmdhZ2VtZW50IHBvc3QgdHlwZSBKU1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMS4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2xsbXNfZW5nYWdlbWVudCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIHdoZW4gdGhlIGVuZ2FnZW1lbnQgdHlwZSBjaGFuZ2VzIHdlIG5lZWQgdG8gZG8gc29tZSB0aGluZ3MgdG8gdGhlIFVJXG5cdFx0XHQkKCAnI19sbG1zX2VuZ2FnZW1lbnRfdHlwZScgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdCQoICcjX2xsbXNfZW5nYWdlbWVudCcgKS50cmlnZ2VyKCAnbGxtcy1lbmdhZ2VtZW50LXR5cGUtY2hhbmdlJywgJCggdGhpcyApLnZhbCgpICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gY3VzdG9tIHRyaWdnZXIgd2hlbiBjYWxsZWQgd2hlbiB0aGUgZW5nYWdlbWVudCB0eXBlIGNoYW5nc1xuXHRcdFx0JCggJyNfbGxtc19lbmdhZ2VtZW50JyApLm9uKCAnbGxtcy1lbmdhZ2VtZW50LXR5cGUtY2hhbmdlJywgZnVuY3Rpb24oIGUsIGVuZ2FnZW1lbnRfdHlwZSApIHtcblxuXHRcdFx0XHR2YXIgJHNlbGVjdCA9ICQoIHRoaXMgKTtcblxuXHRcdFx0XHRzd2l0Y2ggKCBlbmdhZ2VtZW50X3R5cGUgKSB7XG5cblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiBjb3JlIGVuZ2FnZW1lbnRzIHJlbGF0ZWQgdG8gYSBDUFRcblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHRjYXNlICdhY2hpZXZlbWVudCc6XG5cdFx0XHRcdFx0Y2FzZSAnY2VydGlmaWNhdGUnOlxuXHRcdFx0XHRcdGNhc2UgJ2VtYWlsJzpcblxuXHRcdFx0XHRcdFx0dmFyIGNwdCA9ICdsbG1zXycgKyBlbmdhZ2VtZW50X3R5cGU7XG5cblx0XHRcdFx0XHRcdCRzZWxlY3QudmFsKCBudWxsICkuYXR0ciggJ2RhdGEtcG9zdC10eXBlJywgY3B0ICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdFx0XHRcdHNlbGYucG9zdF9zZWxlY3QoICRzZWxlY3QgKTtcblxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0ICogQWxsb3cgb3RoZXIgcGx1Z2lucyBhbmQgZGV2ZWxvcGVycyB0byBob29rIGludG8gdGhlIGVuZ2FnZW1lbnQgdHlwZSBjaGFuZ2UgYWN0aW9uXG5cdFx0XHRcdFx0ICovXG5cdFx0XHRcdFx0ZGVmYXVsdDpcblxuXHRcdFx0XHRcdFx0JHNlbGVjdC50cmlnZ2VyKCAnbGxtcy1lbmdhZ2VtZW50LXR5cGUtY2hhbmdlLWV4dGVybmFsJywgZW5nYWdlbWVudF90eXBlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQWN0aW9ucyBmb3IgbWVtYmVyc2hpcHNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE4LjJcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfbGxtc19tZW1iZXJzaGlwID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIHJlbW92ZSBhdXRvLWVucm9sbCBjb3Vyc2Vcblx0XHRcdCQoICdhW2hyZWY9XCIjbGxtcy1jb3Vyc2UtcmVtb3ZlXCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0dmFyICRlbCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkcm93ID0gJGVsLmNsb3Nlc3QoICd0cicgKSxcblx0XHRcdFx0XHQkY29udGFpbmVyID0gJGVsLmNsb3Nlc3QoICcubGxtcy1tYi1saXN0JyApO1xuXG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggJGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHdpbmRvdy5MTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdGFjdGlvbjogJ21lbWJlcnNoaXBfcmVtb3ZlX2F1dG9fZW5yb2xsX2NvdXJzZScsXG5cdFx0XHRcdFx0XHRjb3Vyc2VfaWQ6ICRlbC5hdHRyKCAnZGF0YS1pZCcgKSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoICdwLmVycm9yJyApLnJlbW92ZSgpO1xuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCByLnN1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0XHRcdFx0JHJvdy5mYWRlT3V0KCAyMDAgKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHJvdy5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0fSwgNDAwICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0JGNvbnRhaW5lci5wcmVwZW5kKCAnPHAgY2xhc3M9XCJlcnJvclwiPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggJGNvbnRhaW5lciApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBidWxrIGVucm9sbCBhbGwgbWVtYmVycyBpbnRvIGEgY291cnNlXG5cdFx0XHQkKCAnYVtocmVmPVwiI2xsbXMtY291cnNlLWJ1bGstZW5yb2xsXCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0dmFyICRlbCA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkcm93ID0gJGVsLmNsb3Nlc3QoICd0cicgKSxcblx0XHRcdFx0XHQkY29udGFpbmVyID0gJGVsLmNsb3Nlc3QoICcubGxtcy1tYi1saXN0JyApO1xuXG5cdFx0XHRcdGlmICggISB3aW5kb3cuY29uZmlybSggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NsaWNrIG9rYXkgdG8gZW5yb2xsIGFsbCBhY3RpdmUgbWVtYmVycyBpbnRvIHRoZSBzZWxlY3RlZCBjb3Vyc2UuIEVucm9sbG1lbnQgd2lsbCB0YWtlIHBsYWNlIGluIHRoZSBiYWNrZ3JvdW5kIGFuZCB5b3UgbWF5IGxlYXZlIHlvdXIgc2l0ZSBhZnRlciBjb25maXJtYXRpb24uIFRoaXMgYWN0aW9uIGNhbm5vdCBiZSB1bmRvbmUhJyApICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkY29udGFpbmVyICk7XG5cblx0XHRcdFx0d2luZG93LkxMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0YWN0aW9uOiAnYnVsa19lbnJvbGxfbWVtYmVyc2hpcF9pbnRvX2NvdXJzZScsXG5cdFx0XHRcdFx0XHRjb3Vyc2VfaWQ6ICRlbC5hdHRyKCAnZGF0YS1pZCcgKSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JGNvbnRhaW5lci5maW5kKCAncC5lcnJvcicgKS5yZW1vdmUoKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIHIuc3VjY2VzcyApIHtcblxuXHRcdFx0XHRcdFx0XHQkZWwucmVwbGFjZVdpdGgoICc8c3Ryb25nIHN0eWxlPVwiZmxvYXQ6cmlnaHQ7XCI+JyArIHIuZGF0YS5tZXNzYWdlICsgJyZuYnNwOyZuYnNwOzwvc3Ryb25nPicgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQkY29udGFpbmVyLnByZXBlbmQoICc8cCBjbGFzcz1cImVycm9yXCI+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdExMTVMuU3Bpbm5lci5zdG9wKCAkY29udGFpbmVyICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQWN0aW9ucyBmb3IgT1JERVJTXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yOC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX2xsbXNfb3JkZXIgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0JCggJ2J1dHRvbltuYW1lPVwibGxtcy1yZWZ1bmQtdG9nZ2xlXCJdJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGJ0biA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkcm93ID0gJGJ0bi5jbG9zZXN0KCAndHInICksXG5cdFx0XHRcdFx0dHhuX2lkID0gJHJvdy5hdHRyKCAnZGF0YS10cmFuc2FjdGlvbi1pZCcgKSxcblx0XHRcdFx0XHRyZWZ1bmRhYmxlX2Ftb3VudCA9ICRidG4uYXR0ciggJ2RhdGEtcmVmdW5kYWJsZScgKSxcblx0XHRcdFx0XHRnYXRld2F5X3N1cHBvcnRzID0gKCAnMScgPT09ICRidG4uYXR0ciggJ2RhdGEtZ2F0ZXdheS1zdXBwb3J0cycgKSApID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0XHRcdGdhdGV3YXlfdGl0bGUgPSAkYnRuLmF0dHIoICdkYXRhLWdhdGV3YXknICksXG5cdFx0XHRcdFx0JG5ld19yb3cgPSAkKCAnI2xsbXMtdHhuLXJlZnVuZC1tb2RlbCAubGxtcy10eG4tcmVmdW5kLWZvcm0nICkuY2xvbmUoKSxcblx0XHRcdFx0XHQkZ2F0ZXdheV9idG4gPSAkbmV3X3Jvdy5maW5kKCAnLmdhdGV3YXktYnRuJyApO1xuXG5cdFx0XHRcdC8vIGNvbmZpZ3VyZSBhbmQgYWRkIHRoZSBmb3JtXG5cdFx0XHRcdGlmICggJ3JlbW92ZScgIT09ICRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJyApICkge1xuXG5cdFx0XHRcdFx0JGJ0bi50ZXh0KCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQ2FuY2VsJyApICk7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nLCAncmVtb3ZlJyApO1xuXHRcdFx0XHRcdCRuZXdfcm93LmZpbmQoICdpbnB1dCcgKS5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cdFx0XHRcdFx0JG5ld19yb3cuZmluZCggJ2lucHV0W25hbWU9XCJsbG1zX3JlZnVuZF9hbW91bnRcIl0nICkuYXR0ciggJ21heCcsIHJlZnVuZGFibGVfYW1vdW50ICk7XG5cdFx0XHRcdFx0JG5ld19yb3cuZmluZCggJ2lucHV0W25hbWU9XCJsbG1zX3JlZnVuZF90eG5faWRcIl0nICkudmFsKCB0eG5faWQgKTtcblxuXHRcdFx0XHRcdGlmICggZ2F0ZXdheV9zdXBwb3J0cyApIHtcblx0XHRcdFx0XHRcdCRnYXRld2F5X2J0bi5maW5kKCAnLmxsbXMtZ2F0ZXdheS10aXRsZScgKS50ZXh0KCBnYXRld2F5X3RpdGxlICk7XG5cdFx0XHRcdFx0XHQkZ2F0ZXdheV9idG4uc2hvdygpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdCRyb3cuYWZ0ZXIoICRuZXdfcm93ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdCRidG4udGV4dCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1JlZnVuZCcgKSApO1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJywgJycgKTtcblx0XHRcdFx0XHQkcm93Lm5leHQoICd0cicgKS5yZW1vdmUoKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0JCggJ2J1dHRvbltuYW1lPVwibGxtcy1tYW51YWwtdHhuLXRvZ2dsZVwiXScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRidG4gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHJvdyA9ICRidG4uY2xvc2VzdCggJ3RyJyApLFxuXHRcdFx0XHRcdCRuZXdfcm93ID0gJCggJyNsbG1zLW1hbnVhbC10eG4tbW9kZWwgLmxsbXMtbWFudWFsLXR4bi1mb3JtJyApLmNsb25lKCk7XG5cblx0XHRcdFx0Ly8gY29uZmlndXJlIGFuZCBhZGQgdGhlIGZvcm1cblx0XHRcdFx0aWYgKCAncmVtb3ZlJyAhPT0gJGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nICkgKSB7XG5cblx0XHRcdFx0XHQkYnRuLnRleHQoIExMTVMubDEwbi50cmFuc2xhdGUoICdDYW5jZWwnICkgKTtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicsICdyZW1vdmUnICk7XG5cdFx0XHRcdFx0JG5ld19yb3cuZmluZCggJ2lucHV0JyApLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblxuXHRcdFx0XHRcdCRyb3cuYWZ0ZXIoICRuZXdfcm93ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdCRidG4udGV4dCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1JlY29yZCBhIE1hbnVhbCBQYXltZW50JyApICk7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nLCAnJyApO1xuXHRcdFx0XHRcdCRyb3cubmV4dCggJ3RyJyApLnJlbW92ZSgpO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBjYWNoZSB0aGUgb3JpZ2luYWwgdmFsdWUgd2hlbiBmb2N1c2luZyBvbiBhIHBheW1lbnQgZ2F0ZXdheSBzZWxlY3Rcblx0XHRcdC8vIHVzZWQgYmVsb3cgc28gdGhlIG9yaWdpbmFsIGZpZWxkIHJlbGF0ZWQgZGF0YSBjYW4gYmUgcmVzdG9yZWQgd2hlbiBzd2l0Y2hpbmcgYmFjayB0byB0aGUgb3JpZ25pYWxseSBzZWxlY3RlZCBnYXRld2F5XG5cdFx0XHQkKCAnLmxsbXMtbWV0YWJveCcgKS5vbmUoICdmb2N1cycsICcubGxtcy1tZXRhYm94LWZpZWxkW2RhdGEtbGxtcy1lZGl0YWJsZT1cInBheW1lbnRfZ2F0ZXdheVwiXSBzZWxlY3QnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRpZiAoICEgJCggdGhpcyApLmF0dHIoICdkYXRhLW9yaWdpbmFsLXZhbHVlJyApICkge1xuXHRcdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCAnZGF0YS1vcmlnaW5hbC12YWx1ZScsICQoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gd2hlbiBzZWxlY3RpbmcgYSBuZXcgcGF5bWVudCBnYXRld2F5IGdldCBmaWVsZCBkYXRhIGFuZCB1cGRhdGUgdGhlIGRvbSB0byBvbmx5IGRpc3BsYXkgdGhlIGZpZWxkc1xuXHRcdFx0Ly8gc3VwcG9ydGVkL25lZWRlZCBieSB0aGUgbmV3bHkgc2VsZWN0ZWQgZ2F0ZXdheVxuXHRcdFx0JCggJy5sbG1zLW1ldGFib3gnICkub24oICdjaGFuZ2UnLCAnLmxsbXMtbWV0YWJveC1maWVsZFtkYXRhLWxsbXMtZWRpdGFibGU9XCJwYXltZW50X2dhdGV3YXlcIl0gc2VsZWN0JywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRzZWxlY3QgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0Z2F0ZXdheSA9ICRzZWxlY3QudmFsKCksXG5cdFx0XHRcdFx0ZGF0YSA9IEpTT04ucGFyc2UoICRzZWxlY3QuY2xvc2VzdCggJy5sbG1zLW1ldGFib3gtZmllbGQnICkuYXR0ciggJ2RhdGEtZ2F0ZXdheS1maWVsZHMnICkgKSxcblx0XHRcdFx0XHRnYXRld2F5X2RhdGEgPSBkYXRhWyBnYXRld2F5IF07XG5cblx0XHRcdFx0Zm9yICggdmFyIGZpZWxkIGluIGdhdGV3YXlfZGF0YSApIHtcblxuXHRcdFx0XHRcdHZhciAkZmllbGQgPSAkKCAnaW5wdXRbbmFtZT1cIicgKyBnYXRld2F5X2RhdGFbIGZpZWxkIF0ubmFtZSArICdcIl0nICksXG5cdFx0XHRcdFx0XHQkd3JhcCA9ICRmaWVsZC5jbG9zZXN0KCAnLmxsbXMtbWV0YWJveC1maWVsZCcgKTtcblxuXHRcdFx0XHRcdC8vIGlmIHRoZSBmaWVsZCBpcyBlbmFibGVkIHNob3cgaXQgdGhlIGZpZWxkIGFuZCwgaWYgd2UncmUgc3dpdGNoaW5nIGJhY2sgdG8gdGhlIG9yaWdpbmFsbHkgc2VsZWN0ZWRcblx0XHRcdFx0XHQvLyBnYXRld2F5LCByZWxvYWQgdGhlIHZhbHVlIGZyb20gdGhlIGRvbVxuXHRcdFx0XHRcdGlmICggZ2F0ZXdheV9kYXRhWyBmaWVsZCBdLmVuYWJsZWQgKSB7XG5cblx0XHRcdFx0XHRcdCR3cmFwLnNob3coKTtcblx0XHRcdFx0XHRcdCRmaWVsZC5hdHRyKCAncmVxdWlyZWQnLCAncmVxdWlyZWQnICk7XG5cdFx0XHRcdFx0XHQkZmllbGQucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXG5cdFx0XHRcdFx0XHRpZiAoIGdhdGV3YXkgPT09ICRzZWxlY3QuYXR0ciggJ2RhdGEtb3JpZ2luYWwtdmFsdWUnKSApIHtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLnZhbCggJHdyYXAuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS12YWx1ZScgKSApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIGhpZGUgdGhlIGZpZWxkXG5cdFx0XHRcdFx0Ly8gdGhpcyB3aWxsIGVuc3VyZSBpdCBnZXRzIHVwZGF0ZWQgaW4gdGhlIGRhdGFiYXNlXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0Ly8gYWx3YXlzIGNsZWFyIHRoZSB2YWx1ZSB3aGVuIHN3aXRjaGluZ1xuXHRcdFx0XHRcdFx0Ly8gZW5zdXJlcyB0aGF0IG91dGRhdGVkIGRhdGEgaXMgcmVtb3ZlZCBmcm9tIHRoZSBEQlxuXHRcdFx0XHRcdFx0JGZpZWxkLmF0dHIoICd2YWx1ZScsICcnICk7XG5cblx0XHRcdFx0XHRcdCRmaWVsZC5yZW1vdmVBdHRyKCAncmVxdWlyZWQnICk7XG5cdFx0XHRcdFx0XHQvLyAkZmllbGQuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHRcdFx0JHdyYXAuaGlkZSgpO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmRzIGN1c3RvbSBsbG1zIG1lcmdlIGNvZGUgYnV0dG9uc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMS4wXG5cdFx0ICogQHZlcnNpb24gIDMuOS4yXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX21lcmdlX2NvZGVfYnV0dG9ucyA9IGZ1bmN0aW9uKCAkd3JhcHBlcnMgKSB7XG5cblx0XHRcdCR3cmFwcGVycyA9ICR3cmFwcGVycyB8fCAkKCAnLmxsbXMtbWVyZ2UtY29kZS13cmFwcGVyJyApO1xuXG5cdFx0XHQkd3JhcHBlcnMuZmluZCggJy5sbG1zLW1lcmdlLWNvZGUtYnV0dG9uJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQkKCB0aGlzICkubmV4dCggJy5sbG1zLW1lcmdlLWNvZGVzJyApLnRvZ2dsZUNsYXNzKCAnYWN0aXZlJyApO1xuXG5cdFx0XHR9ICk7XG5cblx0XHRcdCR3cmFwcGVycy5maW5kKCAnLmxsbXMtbWVyZ2UtY29kZXMgbGknICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkZWwgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHBhcmVudCA9ICRlbC5jbG9zZXN0KCAnLmxsbXMtbWVyZ2UtY29kZXMnICksXG5cdFx0XHRcdFx0dGFyZ2V0ID0gJHBhcmVudC5hdHRyKCAnZGF0YS10YXJnZXQnICksXG5cdFx0XHRcdFx0Y29kZSA9ICRlbC5hdHRyKCAnZGF0YS1jb2RlJyApO1xuXG5cdFx0XHRcdC8vIGRlYWxpbmcgd2l0aCBhIHRpbnltY2UgaW5zdGFuY2Vcblx0XHRcdFx0aWYgKCAtMSA9PT0gdGFyZ2V0LmluZGV4T2YoICcjJyApICkge1xuXG5cdFx0XHRcdFx0dmFyIGVkaXRvciA9IHdpbmRvdy50aW55bWNlLmVkaXRvcnNbIHRhcmdldCBdO1xuXHRcdFx0XHRcdGlmICggZWRpdG9yICkge1xuXHRcdFx0XHRcdFx0ZWRpdG9yLmluc2VydENvbnRlbnQoIGNvZGUgKTtcblx0XHRcdFx0XHR9IC8vIGZhbGxiYWNrIGluIGNhc2Ugd2UgY2FuJ3QgYWNjZXNzIHRoZSBlZGl0b3IgZGlyZWN0bHlcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdGFsZXJ0KCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQ29weSB0aGlzIGNvZGUgYW5kIHBhc3RlIGl0IGludG8gdGhlIGRlc2lyZWQgYXJlYScgKSArICc6ICcgKyBjb2RlICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gZGVhbGluZyB3aXRoIGEgRE9NIGlkXG5cdFx0XHRcdGVsc2Uge1xuXG5cdFx0XHRcdFx0JCggdGFyZ2V0ICkudmFsKCAkKCB0YXJnZXQgKS52YWwoKSArIGNvZGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0JHBhcmVudC5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgbWV0YWJveCB0YWJzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4wLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfdGFicyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JCggJy5sbG1zLW5hdi10YWItd3JhcHBlciAudGFicyBsaScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRidG4gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JG1ldGFib3ggPSAkYnRuLmNsb3Nlc3QoICcubGxtcy1tYi1jb250YWluZXInICksXG5cdFx0XHRcdFx0dGFiX2lkID0gJGJ0bi5hdHRyKCAnZGF0YS10YWInICk7XG5cblx0XHRcdFx0JGJ0bi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCAnbGxtcy1hY3RpdmUnICk7XG5cblx0XHRcdFx0JG1ldGFib3guZmluZCggJy50YWItY29udGVudCcgKS5yZW1vdmVDbGFzcyggJ2xsbXMtYWN0aXZlJyApO1xuXG5cdFx0XHRcdCRidG4uYWRkQ2xhc3MoICdsbG1zLWFjdGl2ZScgKTtcblx0XHRcdFx0JCggJyMnICsgdGFiX2lkICkuYWRkQ2xhc3MoICdsbG1zLWFjdGl2ZScgKTtcblxuXHRcdFx0fSApO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBFbmFibGUgV1AgUG9zdCBUYWJsZSBzZWFyY2hlcyBmb3IgYXBwbGljYWJsZSBzZWxlY3QyIGJveGVzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yMS4wXG5cdFx0ICovXG5cdFx0dGhpcy5wb3N0X3NlbGVjdCA9IGZ1bmN0aW9uKCAkZWwgKSB7XG5cblx0XHRcdHZhciBtdWx0aSA9ICdtdWx0aXBsZScgPT09ICRlbC5hdHRyKCAnbXVsdGlwbGUnICk7XG5cblx0XHRcdCRlbC5sbG1zUG9zdHNTZWxlY3QyKCB7XG5cdFx0XHRcdHdpZHRoOiBtdWx0aSA/ICcxMDAlJyA6ICc2NSUnLFxuXHRcdFx0fSApO1xuXG5cdFx0XHRpZiAoIG11bHRpIHx8ICRlbC5hdHRyKCAnZGF0YS1uby12aWV3LWJ1dHRvbicgKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBhZGQgYSBcIlZpZXdcIiBidXR0b24gdG8gc2VlIHdoYXQgdGhlIHNlbGVjdGVkIHBhZ2UgbG9va3MgbGlrZVxuXHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdWaWV3JyApLFxuXHRcdFx0XHQkYnRuID0gJCggJzxhIGNsYXNzPVwibGxtcy1idXR0b24tc2Vjb25kYXJ5IHNtYWxsXCIgc3R5bGU9XCJtYXJnaW4tbGVmdDo1cHg7XCIgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiNcIj4nICsgIG1zZyArICcgPGkgY2xhc3M9XCJmYSBmYS1leHRlcm5hbC1saW5rXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvYT4nICk7XG5cdFx0XHQkZWwubmV4dCggJy5zZWxlY3QyJyApLmFmdGVyKCAkYnRuICk7XG5cblx0XHRcdCRlbC5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgaWQgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdGlmICggaWQgKSB7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnaHJlZicsICcvP3A9JyArIGlkICkuc2hvdygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRidG4uaGlkZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIGRvbSBldmVudHMgZm9yIC5sbG1zLXRhYmxlc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX3RhYmxlcyA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQkKCAnLmxsbXMtdGFibGUgYnV0dG9uW25hbWU9XCJsbG1zLWV4cGFuZC10YWJsZVwiXScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRidG4gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHRhYmxlID0gJGJ0bi5jbG9zZXN0KCAnLmxsbXMtdGFibGUnIClcblxuXHRcdFx0XHQvLyBzd2l0Y2ggdGhlIHRleHQgb24gdGhlIGJ1dHRvbiBpZiBhbHQgdGV4dCBpcyBmb3VuZFxuXHRcdFx0XHRpZiAoICRidG4uYXR0ciggJ2RhdGEtdGV4dCcgKSApIHtcblx0XHRcdFx0XHR2YXIgdGV4dCA9ICRidG4udGV4dCgpO1xuXHRcdFx0XHRcdCRidG4udGV4dCggJGJ0bi5hdHRyKCAnZGF0YS10ZXh0JyApICk7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnZGF0YS10ZXh0JywgdGV4dCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gc3dpdGNoIGNsYXNzZXMgb24gYWxsIGV4cGFuZGFibGUgZWxlbWVudHNcblx0XHRcdFx0JHRhYmxlLmZpbmQoICcuZXhwYW5kYWJsZScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGlmICggJCggdGhpcyApLmhhc0NsYXNzKCAnY2xvc2VkJyApICkge1xuXHRcdFx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCAnb3BlbmVkJyApLnJlbW92ZUNsYXNzKCAnY2xvc2VkJyApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuYWRkQ2xhc3MoICdjbG9zZWQnICkucmVtb3ZlQ2xhc3MoICdvcGVuZWQnICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8vIGdvXG5cdFx0dGhpcy5pbml0KCk7XG5cblx0fTtcblxuXHQvLyBpbml0YWxpemUgdGhlIG9iamVjdFxuXHR3aW5kb3cubGxtcy5tZXRhYm94ZXMgPSBuZXcgTWV0YWJveGVzKCk7XG5cbn0gKSggalF1ZXJ5ICk7XG4iLCIvKipcbiAqIExpZnRlckxNUyBBZG1pbiBNZXRhYm94IFJlcGVhdGVyIEZpZWxkXG4gKiBAc2luY2UgICAgMy4xMS4wXG4gKiBAdmVyc2lvbiAgMy4yMy4wXG4gKi9cbnRoaXMucmVwZWF0ZXJzID0ge1xuXG5cdC8qKlxuXHQgKiBSZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBtZXRhYm94IGNsYXNzXG5cdCAqIEB0eXBlICBvYmpcblx0ICovXG5cdG1ldGFib3hlczogdGhpcyxcblxuXHQvKipcblx0ICogalF1ZXJ5IHNlbGVjdG9yIGZvciBhbGwgcmVwZWF0ZXIgZWxlbWVudHMgb24gdGhlIGN1cnJlbnQgc2NyZWVuXG5cdCAqIEB0eXBlICB7W3R5cGVdfVxuXHQgKi9cblx0JHJlcGVhdGVyczogbnVsbCxcblxuXHQvKipcblx0ICogSW5pdFxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjIzLjBcblx0ICovXG5cdGluaXQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi4kcmVwZWF0ZXJzID0gJCggJy5sbG1zLW1iLWxpc3QucmVwZWF0ZXInICk7XG5cblx0XHRpZiAoIHNlbGYuJHJlcGVhdGVycy5sZW5ndGggKSB7XG5cblx0XHRcdC8vIHdhaXQgZm9yIHRpbnlNQ0UganVzdCBpbiBjYXNlIHRoZWlyIGVkaXRvcnMgaW4gdGhlIHJlcGVhdGVyc1xuXHRcdFx0TExNUy53YWl0X2ZvciggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgdGlueU1DRSApO1xuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYubG9hZCgpO1xuXHRcdFx0XHRzZWxmLmJpbmQoKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gb24gY2xpY2sgb2YgYW55IHBvc3Qgc3VibWl0IGJ1dHRvbnMgYWRkIHNvbWUgZGF0YSB0byB0aGUgc3VibWl0IGJ1dHRvblxuXHRcdFx0Ly8gc28gd2UgY2FuIHNlZSB3aGljaCBidXR0b24gdG8gdHJpZ2dlciBhZnRlciByZXBlYXRlcnMgYXJlIGZpbmlzaGVkXG5cdFx0XHQkKCAnI3Bvc3QgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXSwgI3Bvc3QtcHJldmlldycgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCQoIHRoaXMgKS5hdHRyKCAnZGF0YS1sbG1zLWNsaWNrZWQnLCAneWVzJyApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBoYW5kbGUgcG9zdCBzdWJtaXNzaW9uXG5cdFx0XHQkKCAnI3Bvc3QnICkub24oICdzdWJtaXQnLCBzZWxmLmhhbmRsZV9zdWJtaXQgKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBFdmVudHNcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4xMy4wXG5cdCAqL1xuXHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdHNlbGYuJHJlcGVhdGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRyZXBlYXRlciA9ICQoIHRoaXMgKSxcblx0XHRcdFx0JHJvd3MgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MnICksXG5cdFx0XHRcdCRtb2RlbCA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItbW9kZWwnICk7XG5cblx0XHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZVJlbW92ZUVkaXRvcicsIHRydWUsICRtb2RlbC5maW5kKCAnLmxsbXMtbWItbGlzdC5lZGl0b3IgdGV4dGFyZWEnICkuYXR0ciggJ2lkJyApICk7XG5cblx0XHRcdC8vIGZvciB0aGUgcmVwZWF0ZXIgKyBidXR0b25cblx0XHRcdCRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItbmV3LWJ0bicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuYWRkX3JvdyggJHJlcGVhdGVyLCBudWxsLCB0cnVlICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIG1ha2UgcmVwZWF0ZXIgcm93cyBzb3J0YWJsZVxuXHRcdFx0JHJvd3Muc29ydGFibGUoIHtcblx0XHRcdFx0aGFuZGxlOiAnLmxsbXMtZHJhZy1oYW5kbGUnLFxuXHRcdFx0XHRpdGVtczogJy5sbG1zLXJlcGVhdGVyLXJvdycsXG5cdFx0XHRcdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdCRyb3dzLmFkZENsYXNzKCAnZHJhZ2dpbmcnICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cdFx0XHRcdFx0JHJvd3MucmVtb3ZlQ2xhc3MoICdkcmFnZ2luZycgKTtcblxuXHRcdFx0XHRcdHZhciAkZWRzID0gdWkuaXRlbS5maW5kKCAndGV4dGFyZWEud3AtZWRpdG9yLWFyZWEnICk7XG5cdFx0XHRcdFx0JGVkcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHZhciBlZF9pZCA9ICQoIHRoaXMgKS5hdHRyKCAnaWQnICk7XG5cdFx0XHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VSZW1vdmVFZGl0b3InLCB0cnVlLCBlZF9pZCApO1xuXHRcdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlQWRkRWRpdG9yJywgdHJ1ZSwgZWRfaWQgKTtcblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHRzZWxmLnNhdmUoICRyZXBlYXRlciApO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSApO1xuXG5cdFx0XHQkcmVwZWF0ZXIub24oICdjbGljaycsICcubGxtcy1yZXBlYXRlci1yZW1vdmUnLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0dmFyICRyb3cgPSAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKTtcblx0XHRcdFx0aWYgKCB3aW5kb3cuY29uZmlybSggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyByb3c/IFRoaXMgY2Fubm90IGJlIHVuZG9uZS4nICkgKSApIHtcblx0XHRcdFx0XHQkcm93LnJlbW92ZSgpO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c2VsZi5zYXZlKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0XHR9LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBBZGQgYSBuZXcgcm93IHRvIGEgcmVwZWF0ZXIgcm93cyBncm91cFxuXHQgKiBAcGFyYW0gICAgb2JqICAgICRyZXBlYXRlciAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcmVwZWF0ZXIgdG8gYWRkIGEgcm93IHRvXG5cdCAqIEBwYXJhbSAgICBvYmogICAgZGF0YSAgICAgICBvcHRpb25hbCBvYmplY3Qgb2YgZGF0YSB0byBmaWxsIGZpZWxkcyBpbiB0aGUgcm93IHdpdGhcblx0ICogQHBhcmFtICAgIGJvb2wgICBleHBhbmQgICAgIGlmIHRydWUsIHdpbGwgYXV0b21hdGljYWxseSBvcGVuIHRoZSByb3cgYWZ0ZXIgYWRkaW5nIGl0IHRvIHRoZSBkb21cblx0ICogQHJldHVybiBcdCB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHQgKi9cblx0YWRkX3JvdzogZnVuY3Rpb24oICRyZXBlYXRlciwgZGF0YSwgZXhwYW5kICkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0JHJvd3MgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MnICksXG5cdFx0XHQkbW9kZWwgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLW1vZGVsJyApLFxuXHRcdFx0JHJvdyA9ICRtb2RlbC5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93JyApLmNsb25lKCksXG5cdFx0XHRuZXdfaW5kZXggPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKS5sZW5ndGgsXG5cdFx0XHRlZGl0b3IgPSBzZWxmLnJlaW5kZXgoICRyb3csIG5ld19pbmRleCApO1xuXG5cdFx0aWYgKCBkYXRhICkge1xuXHRcdFx0JC5lYWNoKCBkYXRhLCBmdW5jdGlvbigga2V5LCB2YWwgKSB7XG5cblx0XHRcdFx0dmFyICRmaWVsZCA9ICRyb3cuZmluZCggJ1tuYW1lXj1cIicgKyBrZXkgKyAnXCJdJyk7XG5cblx0XHRcdFx0aWYgKCAkZmllbGQuaGFzQ2xhc3MoICdsbG1zLXNlbGVjdDItc3R1ZGVudCcgKSApIHtcblx0XHRcdFx0XHQkLmVhY2goIHZhbCwgZnVuY3Rpb24oIGksIGRhdGEgKSB7XG5cdFx0XHRcdFx0XHQkZmllbGQuYXBwZW5kKCAnPG9wdGlvbiB2YWx1ZT1cIicgKyBkYXRhLmtleSArICdcIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+JyArIGRhdGEudGl0bGUgKyAnPC9vcHRpb24+Jylcblx0XHRcdFx0XHR9ICkgO1xuXHRcdFx0XHRcdCRmaWVsZC50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRmaWVsZC52YWwoIHZhbCApO1xuXHRcdFx0XHR9XG5cblxuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5iaW5kX3JvdyggJHJvdyApO1xuXHRcdH0sIDEgKTtcblxuXHRcdCRyb3dzLmFwcGVuZCggJHJvdyApO1xuXHRcdGlmICggZXhwYW5kICkge1xuXHRcdFx0JHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyJyApLnRyaWdnZXIoICdjbGljaycgKTtcblx0XHR9XG5cdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlQWRkRWRpdG9yJywgdHJ1ZSwgZWRpdG9yICk7XG5cblx0XHQkcmVwZWF0ZXIudHJpZ2dlciggJ2xsbXMtbmV3LXJlcGVhdGVyLXJvdycsIHtcblx0XHRcdCRyb3c6ICRyb3csXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIERPTSBldmVudHMgZm9yIGEgc2luZ2xlIHJlcGVhdGVyIHJvd1xuXHQgKiBAcGFyYW0gICAgb2JqICAgJHJvdyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcm93XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHQgKi9cblx0YmluZF9yb3c6IGZ1bmN0aW9uKCAkcm93ICkge1xuXG5cdFx0dGhpcy5iaW5kX3Jvd19oZWFkZXIoICRyb3cgKTtcblxuXHRcdCRyb3cuZmluZCggJy5sbG1zLXNlbGVjdDInICkubGxtc1NlbGVjdDIoIHtcblx0XHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0fSApO1xuXG5cdFx0JHJvdy5maW5kKCAnLmxsbXMtc2VsZWN0Mi1zdHVkZW50JyApLmxsbXNTdHVkZW50c1NlbGVjdDIoKTtcblxuXHRcdHRoaXMubWV0YWJveGVzLmJpbmRfZGF0ZXBpY2tlcnMoICRyb3cuZmluZCggJy5sbG1zLWRhdGVwaWNrZXInICkgKTtcblx0XHR0aGlzLm1ldGFib3hlcy5iaW5kX2NvbnRyb2xsZXJzKCAkcm93LmZpbmQoICdbZGF0YS1pcy1jb250cm9sbGVyXScgKSApO1xuXHRcdC8vIHRoaXMubWV0YWJveGVzLmJpbmRfbWVyZ2VfY29kZV9idXR0b25zKCAkcm93LmZpbmQoICcubGxtcy1tZXJnZS1jb2RlLXdyYXBwZXInICkgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBCaW5kIHJvdyBoZWFkZXIgZXZlbnRzXG5cdCAqIEBwYXJhbSAgICBvYmogICAkcm93ICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByb3dcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdCAqL1xuXHRiaW5kX3Jvd19oZWFkZXI6IGZ1bmN0aW9uKCAkcm93ICkge1xuXG5cdFx0Ly8gaGFuZGxlIHRoZSB0aXRsZSBmaWVsZCBiaW5kaW5nXG5cdFx0dmFyICR0aXRsZSA9ICRyb3cuZmluZCggJy5sbG1zLXJlcGVhdGVyLXRpdGxlJyApLFxuXHRcdFx0JGZpZWxkID0gJHJvdy5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtaGVhZGVyLXRpdGxlLWZpZWxkJyApO1xuXG5cdFx0JHRpdGxlLmF0dHIoICdkYXRhLWRlZmF1bHQnLCAkdGl0bGUudGV4dCgpICk7XG5cblx0XHQkZmllbGQub24oICdrZXl1cCBmb2N1c291dCBibHVyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdmFsID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0aWYgKCAhIHZhbCApIHtcblx0XHRcdFx0dmFsID0gJHRpdGxlLmF0dHIoICdkYXRhLWRlZmF1bHQnICk7XG5cdFx0XHR9XG5cdFx0XHQkdGl0bGUudGV4dCggdmFsICk7XG5cdFx0fSApLnRyaWdnZXIoICdrZXl1cCcgKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBIYW5kbGUgV1AgUG9zdCBmb3JtIHN1Ym1pc3Npb24gdG8gZW5zdXJlIHJlcGVhdGVycyBhcmUgc2F2ZWQgYmVmb3JlIHN1Ym1pdHRpbmcgdGhlIGZvcm0gdG8gc2F2ZS9wdWJsaXNoIHRoZSBwb3N0XG5cdCAqIEBwYXJhbSAgICBvYmogICBlICBKUyBldmVudCBvYmplY3Rcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4yMy4wXG5cdCAqL1xuXHRoYW5kbGVfc3VibWl0OiBmdW5jdGlvbiggZSApIHtcblxuXHRcdC8vIGdldCB0aGUgYnV0dG9uIHVzZWQgdG8gc3VibWl0IHRoZSBmb3JtXG5cdFx0dmFyICRidG4gPSAkKCAnI3Bvc3QgW2RhdGEtbGxtcy1jbGlja2VkPVwieWVzXCJdJyApLFxuXHRcdFx0JHNwaW5uZXIgPSAkYnRuLnBhcmVudCgpLmZpbmQoICcuc3Bpbm5lcicgKTtcblxuXHRcdGlmICggJGJ0bi5pcyggJyNwb3N0LXByZXZpZXcnICkgKSB7XG5cdFx0XHQkYnRuLnJlbW92ZUF0dHIoICdkYXRhLWxsbXMtY2xpY2tlZCcgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQvLyBjb3JlIFVYIHRvIHByZXZlbnQgbXVsdGktY2xpY2svb3IgdGhlIGFwcGVhcmFuY2Ugb2YgYSBkZWxheVxuXHRcdCQoICcjcG9zdCBpbnB1dFt0eXBlPVwic3VibWl0XCJdJyApLmFkZENsYXNzKCAnZGlzYWJsZWQnICkuYXR0ciggJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyApO1xuXHRcdCRzcGlubmVyLmFkZENsYXNzKCAnaXMtYWN0aXZlJyApO1xuXG5cdFx0dmFyIHNlbGYgPSB3aW5kb3cubGxtcy5tZXRhYm94ZXMucmVwZWF0ZXJzLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHR3YWl0O1xuXG5cdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0c2VsZi5zYXZlKCAkKCB0aGlzICkgKTtcblx0XHR9ICk7XG5cblx0XHR3YWl0ID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRpZiAoIGkgPj0gNTkgfHwgISAkKCAnLmxsbXMtbWItbGlzdC5yZXBlYXRlci5wcm9jZXNzaW5nJyApLmxlbmd0aCApIHtcblxuXHRcdFx0XHRjbGVhckludGVydmFsKCB3YWl0ICk7XG5cdFx0XHRcdCQoICcjcG9zdCcgKS5vZmYoICdzdWJtaXQnLCB0aGlzLmhhbmRsZV9zdWJtaXQgKTtcblx0XHRcdFx0JHNwaW5uZXIucmVtb3ZlQ2xhc3MoICdpcy1hY3RpdmUnICk7XG5cdFx0XHRcdCRidG4ucmVtb3ZlQ2xhc3MoICdkaXNhYmxlZCcgKS5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdGkrKztcblxuXHRcdFx0fVxuXG5cdFx0fSwgMTAwMCApO1xuXG5cblx0fSxcblxuXHQvKipcblx0ICogTG9hZCByZXBlcmVhdGVyIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCBjcmVhdGUgcm93cyBpbiB0aGUgRE9NXG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTIuMVxuXHQgKi9cblx0bG9hZDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkcmVwZWF0ZXIgPSAkKCB0aGlzICk7XG5cblx0XHRcdC8vIGVuc3VyZSB0aGUgcmVwZWF0ZXIgaXMgb25seSBsb2FkZWQgb25jZSB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgcmVzdWx0aW5nIGZyb20gZHVwbGljYXRpbmcgYmluZGluZ1xuXHRcdFx0Ly8gb24gY2VydGFpbiBzaXRlcyB3aGljaCBJIGNhbm5vdCBxdWl0ZSBleHBsYWluLi4uXG5cdFx0XHRpZiAoICRyZXBlYXRlci5oYXNDbGFzcyggJ2lzLWxvYWRlZCcgKSB8fCAkcmVwZWF0ZXIuaGFzQ2xhc3MoICdwcm9jZXNzaW5nJyApICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHNlbGYuc3RvcmUoICRyZXBlYXRlciwgJ2xvYWQnLCBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdFx0XHQkcmVwZWF0ZXIuYWRkQ2xhc3MoICdpcy1sb2FkZWQnICk7XG5cblx0XHRcdFx0JC5lYWNoKCBkYXRhLmRhdGEsIGZ1bmN0aW9uKCBpLCBvYmogKSB7XG5cdFx0XHRcdFx0c2VsZi5hZGRfcm93KCAkcmVwZWF0ZXIsIG9iaiwgZmFsc2UgKTtcblx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdC8vIGZvciBlYWNoIHJvdyB3aXRoaW4gdGhlIHJlcGVhdGVyXG5cdFx0XHRcdCRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cyAubGxtcy1yZXBlYXRlci1yb3cnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5iaW5kX3JvdyggJCggdGhpcyApICk7XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApO1xuXG5cblxuXHRcdH0gKTtcblxuXHR9LFxuXG5cdC8qKlxuXHQgKiBSZWluZGV4IGEgcm93XG5cdCAqIHJlbmFtZXMgaWRzLCBhdHRycywgYW5kIGV0Yy4uLlxuXHQgKiBVc2VkIHdoZW4gY2xvbmluZyB0aGUgbW9kZWwgZm9yIG5ldyByb3dzXG5cdCAqIEBwYXJhbSAgICBvYmogICAgICAgICAgJHJvdyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcm93XG5cdCAqIEBwYXJhbSAgICBpbnR8c3RyaW5nICAgaW5kZXggIGluZGV4IChvciBpZCkgdG8gdXNlIHdoZW4gcmVuYW1pbmdcblx0ICogQHJldHVybiAgIHN0cmluZ1xuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0ICovXG5cdHJlaW5kZXg6IGZ1bmN0aW9uKCAkcm93LCBpbmRleCApIHtcblxuXHRcdHZhciBvbGRfaW5kZXggPSAkcm93LmF0dHIoICdkYXRhLXJvdy1vcmRlcicgKSxcblx0XHRcdCRlZCA9ICRyb3cuZmluZCggJy5sbG1zLW1iLWxpc3QuZWRpdG9yIHRleHRhcmVhJyApO1xuXG5cdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgJGVkLmF0dHIoICdpZCcgKSApO1xuXG5cdFx0ZnVuY3Rpb24gcmVwbGFjZV9hdHRyKCAkZWwsIGF0dHIgKSB7XG5cdFx0XHQkZWwuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBzdHIgPSAkKCB0aGlzICkuYXR0ciggYXR0ciApO1xuXHRcdFx0XHQkKCB0aGlzICkuYXR0ciggYXR0ciwgc3RyLnJlcGxhY2UoIG9sZF9pbmRleCwgaW5kZXggKSApO1xuXHRcdFx0fSApO1xuXHRcdH07XG5cblx0XHQkcm93LmF0dHIoICdkYXRhLXJvdy1vcmRlcicsIGluZGV4ICk7XG5cblx0XHRyZXBsYWNlX2F0dHIoICRyb3csICdkYXRhLXJvdy1vcmRlcicgKTtcblxuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnYnV0dG9uLmluc2VydC1tZWRpYScgKSwgJ2RhdGEtZWRpdG9yJyApO1xuXG5cdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdpbnB1dFtuYW1lXj1cIl9sbG1zXCJdLCB0ZXh0YXJlYVtuYW1lXj1cIl9sbG1zXCJdLCBzZWxlY3RbbmFtZV49XCJfbGxtc1wiXScgKSwgJ2lkJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgdGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICksICduYW1lJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnW2RhdGEtY29udHJvbGxlcl0nICksICdkYXRhLWNvbnRyb2xsZXInICk7XG5cdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdbZGF0YS1jb250cm9sbGVyXScgKSwgJ2RhdGEtY29udHJvbGxlcicgKTtcblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2J1dHRvbi53cC1zd2l0Y2gtZWRpdG9yJyApLCAnZGF0YS13cC1lZGl0b3ItaWQnICk7XG5cdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdidXR0b24ud3Atc3dpdGNoLWVkaXRvcicgKSwgJ2lkJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnLndwLWVkaXRvci10b29scycgKSwgJ2lkJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnLndwLWVkaXRvci1jb250YWluZXInICksICdpZCcgKTtcblxuXG5cdFx0cmV0dXJuICRlZC5hdHRyKCAnaWQnICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogU2F2ZSBhIHNpbmdsZSByZXBlYXRlcnMgZGF0YSB0byB0aGUgc2VydmVyXG5cdCAqIEBwYXJhbSAgICBvYmogICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgYSByZXBlYXRlciBlbGVtZW50XG5cdCAqIEByZXR1cm4gICB2b2lzXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHQgKi9cblx0c2F2ZTogZnVuY3Rpb24oICRyZXBlYXRlciApIHtcblx0XHQkcmVwZWF0ZXIudHJpZ2dlciggJ2xsbXMtcmVwZWF0ZXItYmVmb3JlLXNhdmUnLCB7ICRlbDogJHJlcGVhdGVyIH0gKTtcblx0XHR0aGlzLnN0b3JlKCAkcmVwZWF0ZXIsICdzYXZlJyApO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgcmVwZWF0ZXIgZWxlbWVudCBpbnRvIGFuIGFycmF5IG9mIG9iamVjdHMgdGhhdCBjYW4gYmUgc2F2ZWQgdG8gdGhlIGRhdGFiYXNlXG5cdCAqIEBwYXJhbSAgICBvYmogICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgYSByZXBlYXRlciBlbGVtZW50XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHQgKi9cblx0c2VyaWFsaXplOiBmdW5jdGlvbiggJHJlcGVhdGVyICkge1xuXG5cdFx0dmFyIHJvd3MgPSBbXTtcblxuXHRcdCRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cyAubGxtcy1yZXBlYXRlci1yb3cnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBvYmogPSB7fTtcblxuXHRcdFx0Ly8gZWFzeS4uLlxuXHRcdFx0JCggdGhpcyApLmZpbmQoICdpbnB1dFtuYW1lXj1cIl9sbG1zXCJdLCBzZWxlY3RbbmFtZV49XCJfbGxtc1wiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0b2JqWyAkKCB0aGlzICkuYXR0ciggJ25hbWUnICkgXSA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIHRleHRhcmVhIGlzIGEgdGlueU1DRSBpbnN0YW5jZVxuXHRcdFx0JCggdGhpcyApLmZpbmQoICd0ZXh0YXJlYVtuYW1lXj1cIl9sbG1zXCJdJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciBuYW1lID0gJCggdGhpcyApLmF0dHIoICduYW1lJyApO1xuXG5cdFx0XHRcdC8vIGlmIGl0IGlzIGFuIGVkaXRvclxuXHRcdFx0XHRpZiAoIHRpbnlNQ0UuZWRpdG9yc1sgbmFtZSBdICkge1xuXHRcdFx0XHRcdG9ialsgbmFtZSBdID0gdGlueU1DRS5lZGl0b3JzWyBuYW1lIF0uZ2V0Q29udGVudCgpO1xuXHRcdFx0XHQvLyBncmFiIHRoZSB2YWwgb2YgdGhlIHRleHRhcmVhXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0b2JqWyBuYW1lIF0gPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHRyb3dzLnB1c2goIG9iaiApO1xuXG5cdFx0fSApO1xuXG5cdFx0cmV0dXJuIHJvd3M7XG5cblx0fSxcblxuXHQvKipcblx0ICogQUpBWCBtZXRob2QgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIHJlcGVhdGVyJ3MgaGFuZGxlciBvbiB0aGUgc2VydmVyXG5cdCAqIEBwYXJhbSAgICBvYmogICAgICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByZXBlYXRlciBlbGVtZW50XG5cdCAqIEBwYXJhbSAgICBzdHJpbmcgICAgYWN0aW9uICAgICBhY3Rpb24gdG8gY2FsbCBbc2F2ZXxsb2FkXVxuXHQgKiBAcGFyYW0gICAgZnVuY3Rpb24gIGNiICAgICAgICAgY2FsbGJhY2sgZnVuY3Rpb25cblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdCAqL1xuXHRzdG9yZTogZnVuY3Rpb24oICRyZXBlYXRlciwgYWN0aW9uLCBjYiApIHtcblxuXHRcdGNiID0gY2IgfHwgZnVuY3Rpb24oKXt9O1xuXHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdGRhdGEgPSB7XG5cdFx0XHRcdGFjdGlvbjogJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1maWVsZC1oYW5kbGVyJyApLnZhbCgpLFxuXHRcdFx0XHRzdG9yZV9hY3Rpb246IGFjdGlvbixcblx0XHRcdH07XG5cblx0XHRpZiAoICdzYXZlJyA9PT0gYWN0aW9uICkge1xuXHRcdFx0ZGF0YS5yb3dzID0gc2VsZi5zZXJpYWxpemUoICRyZXBlYXRlciApO1xuXHRcdH1cblxuXHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0JHJlcGVhdGVyLmFkZENsYXNzKCAncHJvY2Vzc2luZycgKTtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkcmVwZWF0ZXIgKTtcblxuXHRcdFx0fSxcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdGNiKCByICk7XG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdG9wKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0JHJlcGVhdGVyLnJlbW92ZUNsYXNzKCAncHJvY2Vzc2luZycgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSApO1xuXG5cdH1cblxufTtcbnRoaXMucmVwZWF0ZXJzLmluaXQoKTtcbiJdfQ==
