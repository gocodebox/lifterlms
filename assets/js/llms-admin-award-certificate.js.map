{"version":3,"file":"js/llms-admin-award-certificate.js","mappings":"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","sources":["webpack://lifterlms/./src/js/util/award-certificate-button/create.js","webpack://lifterlms/./src/js/util/award-certificate-button/index.js","webpack://lifterlms/./src/js/util/award-certificate-button/message.js","webpack://lifterlms/./src/js/util/award-certificate-button/urls.js","webpack://lifterlms/./src/js/util/edit-certificate-title.js","webpack://lifterlms/./src/js/util/index.js","webpack://lifterlms/external window [\"llms\",\"components\"]","webpack://lifterlms/external window [\"llms\",\"utils\"]","webpack://lifterlms/external window [\"wp\",\"components\"]","webpack://lifterlms/external window [\"wp\",\"coreData\"]","webpack://lifterlms/external window [\"wp\",\"data\"]","webpack://lifterlms/external window [\"wp\",\"editor\"]","webpack://lifterlms/external window [\"wp\",\"element\"]","webpack://lifterlms/external window [\"wp\",\"i18n\"]","webpack://lifterlms/external window [\"wp\",\"url\"]","webpack://lifterlms/webpack/bootstrap","webpack://lifterlms/webpack/runtime/compat get default export","webpack://lifterlms/webpack/runtime/define property getters","webpack://lifterlms/webpack/runtime/hasOwnProperty shorthand","webpack://lifterlms/webpack/runtime/make namespace object","webpack://lifterlms/./src/js/admin-award-certificate.js"],"sourcesContent":["// WP deps.\nimport { store as coreStore } from '@wordpress/core-data';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Creates a new awarded certificate post for a given student with a specified parent template.\n *\n * @since 6.0.0\n *\n * @param {number} studentId  WP_User ID.\n * @param {number} templateId WP_Post ID.\n * @return {Promise<Object>} A promise that resolves to the WP_Post object api response on success.\n */\nexport default function( studentId, templateId ) {\n\tconst { saveEntityRecord } = dispatch( coreStore );\n\n\treturn saveEntityRecord(\n\t\t'postType',\n\t\t'llms_my_certificate',\n\t\t{\n\t\t\tauthor: studentId,\n\t\t\tcertificate_template: templateId,\n\t\t\tstatus: 'draft',\n\t\t}\n\t);\n}\n","// WP Deps.\nimport { __ } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\n// LLMS Deps.\nimport { PostSearchControl, UserSearchControl } from '@lifterlms/components';\n\n// Internal Deps.\nimport createAward from './create';\nimport getMessage from './message';\nimport { getRedirectUrl, getScratchUrl } from './urls';\n\n/**\n * Button and modal interface for creating a draft certificate from a specified template for a specific student.\n *\n * @since 6.0.0\n *\n * @param {Object}  params                Component configuration object.\n * @param {string}  params.modalTitle     Title of the modal.\n * @param {string}  params.buttonLabel    Text of the button.\n * @param {boolean} params.isDisabled     Whether or not the button is disabled.\n * @param {boolean} params.enableScratch  When `true`, displays a \"Start from Scratch\" button that links to the awarded certificate editor page.\n * @param {boolean} params.selectStudent  When `true`, displays a searchable select element to allow user selection of the user.\n * @param {boolean} params.selectTemplate When `true`, displays a searchable select element to allow user selection of the template.\n * @param {?number} params.studentId      WP_User ID of the student to award the certificate to.\n * @param {?number} params.templateId     WP_Post ID of the certificate template post to create the certificate from.\n * @return {WPElement} The component.\n */\nexport default function( {\n\tmodalTitle = __( 'Award a New Certificate', 'lifterlms' ),\n\tbuttonLabel = __( 'Award', 'lifterlms' ),\n\tisDisabled = false,\n\tenableScratch = true,\n\tselectStudent = true,\n\tselectTemplate = true,\n\tstudentId = null,\n\ttemplateId = null,\n} ) {\n\tconst [ isOpen, setIsOpen ] = useState( false ),\n\t\t[ isBusy, setIsBusy ] = useState( false ),\n\t\t[ currStudentId, setStudentId ] = useState( studentId ),\n\t\t[ currTemplateId, setTemplateId ] = useState( templateId ),\n\t\tcloseModal = () => setIsOpen( false ),\n\t\topenModal = () => setIsOpen( true ),\n\t\tisReady = currStudentId && currTemplateId,\n\t\tonClick = () => {\n\t\t\tsetIsBusy( true );\n\t\t\tcreateAward( currStudentId, currTemplateId ).then( ( { id } ) => {\n\t\t\t\twindow.location = getRedirectUrl( id );\n\t\t\t} );\n\t\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ isOpen && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ modalTitle }\n\t\t\t\t\tstyle={ { maxWidth: '420px' } }\n\t\t\t\t\tonRequestClose={ closeModal }\n\t\t\t\t>\n\n\t\t\t\t\t<p>{ getMessage( selectStudent, selectTemplate ) }</p>\n\n\t\t\t\t\t{ selectStudent && (\n\t\t\t\t\t\t<UserSearchControl\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tlabel={ __( 'Award to', 'lifterlms' ) }\n\t\t\t\t\t\t\tselectedValue={ studentId ? [ studentId ] : [] }\n\t\t\t\t\t\t\tonUpdate={ ( obj ) => {\n\t\t\t\t\t\t\t\tconst id = obj?.id || null;\n\t\t\t\t\t\t\t\tsetStudentId( id );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ selectTemplate && (\n\t\t\t\t\t\t<PostSearchControl\n\t\t\t\t\t\t\tisClearable\n\t\t\t\t\t\t\tpostType=\"llms_certificate\"\n\t\t\t\t\t\t\tlabel={ __( 'Template', 'lifterlms' ) }\n\t\t\t\t\t\t\tplaceholder={ __( 'Search for a certificate templateâ€¦', 'lifterlms' ) }\n\t\t\t\t\t\t\tselectedValue={ templateId ? [ templateId ] : [] }\n\t\t\t\t\t\t\tonUpdate={ ( obj ) => {\n\t\t\t\t\t\t\t\tconst id = obj?.id || null;\n\t\t\t\t\t\t\t\tsetTemplateId( id );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t<div style={ { textAlign: 'right', padding: '24px 32px 0', margin: '24px -32px 0', borderTop: '1px solid #ddd' } }>\n\n\t\t\t\t\t\t<Button style={ { marginRight: '5px' } } disabled={ ! isReady } isBusy={ isBusy } variant=\"primary\" onClick={ onClick }>\n\t\t\t\t\t\t\t{ __( 'Create Draft' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t{ enableScratch && (\n\t\t\t\t\t\t\t<Button style={ { marginRight: '5px' } } variant=\"secondary\" href={ getScratchUrl( currStudentId ) }>\n\t\t\t\t\t\t\t\t{ __( 'Start from Scratch', 'lifterlms' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ closeModal }>\n\t\t\t\t\t\t\t{ __( 'Cancel', 'lifterlms' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t) }\n\t\t\t<Button\n\t\t\t\tdisabled={ isDisabled }\n\t\t\t\tvariant=\"secondary\"\n\t\t\t\tonClick={ openModal }\n\t\t\t>\n\t\t\t\t{ buttonLabel }\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n","import { __ } from '@wordpress/i18n';\n\n/**\n * Retrieves the message based on the selectors present in the modal.\n *\n * @since 6.0.0\n *\n * @param {boolean} selectStudent  Whether or not the student selector is present.\n * @param {boolean} selectTemplate Whether or not the template selector is present.\n * @return {string} A message string.\n */\nexport default function( selectStudent, selectTemplate ) {\n\tlet msg = '';\n\tif ( selectStudent && selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from the selected template for the selected student.', 'lifterlms' );\n\t} else if ( selectStudent && ! selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from this template for the selected student.', 'lifterlms' );\n\t} else if ( ! selectStudent && selectTemplate ) {\n\t\tmsg = __( 'Create a new certificate award from the selected template for this student.', 'lifterlms' );\n\t}\n\treturn msg;\n}\n","// WP deps.\nimport { addQueryArgs } from '@wordpress/url';\n\n// LLMS deps.\nimport { getAdminUrl } from '@lifterlms/utils';\n\n/**\n * Retrieves the redirect URL for the newly created certificate.\n *\n * @since 6.0.0\n *\n * @param {number} post WP_Post ID.\n * @return {string} The edit post URL for awarded certificate draft.\n */\nexport function getRedirectUrl( post ) {\n\treturn addQueryArgs(\n\t\t`${ getAdminUrl() }/post.php`,\n\t\t{\n\t\t\tpost,\n\t\t\taction: 'edit',\n\t\t\tnewAwardMsg: 1,\n\t\t}\n\t);\n}\n\n/**\n * Retrieves the url for the \"Start from Scratch\" button.\n *\n * @since 6.0.0\n *\n * @param {?number} sid WP_User ID of the selected student.\n * @return {string} The URL.\n */\nexport function getScratchUrl( sid = null ) {\n\tconst args = {\n\t\tpost_type: 'llms_my_certificate',\n\t};\n\n\tif ( sid ) {\n\t\targs.sid = sid;\n\t}\n\n\treturn addQueryArgs(\n\t\t`${ getAdminUrl() }/post-new.php`,\n\t\targs,\n\t);\n}\n","import { dispatch, select } from '@wordpress/data';\nimport { store as editorStore } from '@wordpress/editor';\n\n/**\n * Edits the title of the current certificate post type in the block editor.\n *\n * This utility is used to allow sharing functionality between `llms_certificate` and `llms_my_certificate`\n * post types. Depending on the post type, the certificate title is stored in a different post field.\n *\n * To edit the actual post title of a `llms_certificate` post (not the awarded certificate's title), use\n * `wp.data.dispatch( 'core/editor' ).editPost()` directly.\n *\n * @since 6.0.0\n *\n * @param {string} title    The desired certificate title.\n * @param {string} postType The current post type, automatically reads it from the current post if omitted.\n * @return {Promise} Promise that resolves when the title edits have been made to the current post.\n */\nexport function editCertificateTitle( title, postType = null ) {\n\tif ( ! postType ) {\n\t\tconst { getCurrentPostType } = select( editorStore );\n\t\tpostType = getCurrentPostType();\n\t}\n\n\tconst { editPost } = dispatch( editorStore ),\n\t\tedits = {};\n\n\tif ( 'llms_certificate' === postType ) {\n\t\tedits.certificate_title = title;\n\t} else if ( 'llms_my_certificate' === postType ) {\n\t\tedits.title = title;\n\t}\n\n\treturn editPost( edits );\n}\n","export { editCertificateTitle } from './edit-certificate-title';\nexport { default as AwardCertificateButton } from './award-certificate-button';\n","module.exports = window[\"llms\"][\"components\"];","module.exports = window[\"llms\"][\"utils\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// WP deps.\nimport { render } from '@wordpress/element';\nimport { getQueryArg } from '@wordpress/url';\n\n// Internal deps.\nimport { AwardCertificateButton } from './util';\n\nconst WRAPPER_ID = 'llms-award-certificate-wrapper',\n\trenderNodeStyles = {},\n\tbuttonArgs = {},\n\tdefaultBtn = getDefaultButton();\n\n/**\n * Retrieves the DOM Element selector for the default button to be replaced by the component.\n *\n * @since 6.0.0\n *\n * @return {?Element} DOM element for the default button or null if no button found.\n */\nfunction getDefaultButton() {\n\t// Certificates post table page.\n\tlet btn = document.querySelector( '.page-title-action' );\n\tif ( btn ) {\n\t\trenderNodeStyles.top = '-3px';\n\t\trenderNodeStyles.position = 'relative';\n\t}\n\n\t// Student certificates reporting page.\n\tif ( ! btn ) {\n\t\tbtn = document.getElementById( 'llms-new-award-button' );\n\n\t\trenderNodeStyles.marginBottom = '20px';\n\t\trenderNodeStyles.display = 'inline-block';\n\n\t\tbuttonArgs.studentId = parseInt( getQueryArg( window.location, 'student_id' ) );\n\t\tbuttonArgs.selectStudent = false;\n\t}\n\n\t// Reuse the original buttons label.\n\tif ( btn ) {\n\t\tbuttonArgs.buttonLabel = btn.textContent;\n\t}\n\n\treturn btn;\n}\n\n/**\n * Inserts the wrapper element node where the new component button will be rendered.\n *\n * @since 6.0.0\n *\n * @return {boolean} Returns `false` if no default button is found, otherwise returns true.\n */\nfunction insertRenderNode() {\n\tif ( ! defaultBtn ) {\n\t\treturn false;\n\t}\n\n\tconst renderNode = document.createElement( 'span' );\n\trenderNode.id = WRAPPER_ID;\n\n\tObject.entries( renderNodeStyles ).forEach( ( [ rule, style ] ) => {\n\t\trenderNode.style[ rule ] = style;\n\t} );\n\n\tdefaultBtn.style.display = 'none';\n\tdefaultBtn.after( renderNode );\n\n\treturn true;\n}\n\n// Render the component.\nif ( insertRenderNode() ) {\n\trender( <AwardCertificateButton { ...buttonArgs } />, document.getElementById( WRAPPER_ID ) );\n}\n"],"names":["store","coreStore","dispatch","studentId","templateId","saveEntityRecord","author","certificate_template","status","__","Button","Modal","useState","PostSearchControl","UserSearchControl","createAward","getMessage","getRedirectUrl","getScratchUrl","modalTitle","buttonLabel","isDisabled","enableScratch","selectStudent","selectTemplate","isOpen","setIsOpen","isBusy","setIsBusy","currStudentId","setStudentId","currTemplateId","setTemplateId","closeModal","openModal","isReady","onClick","then","id","window","location","maxWidth","obj","textAlign","padding","margin","borderTop","marginRight","msg","addQueryArgs","getAdminUrl","post","action","newAwardMsg","sid","args","post_type","select","editorStore","editCertificateTitle","title","postType","getCurrentPostType","editPost","edits","certificate_title","default","AwardCertificateButton","render","getQueryArg","WRAPPER_ID","renderNodeStyles","buttonArgs","defaultBtn","getDefaultButton","btn","document","querySelector","top","position","getElementById","marginBottom","display","parseInt","textContent","insertRenderNode","renderNode","createElement","Object","entries","forEach","rule","style","after"],"sourceRoot":""}