!function(c){var t={$buttons:null,$container:null,$ui:null,attempt_key:null,current_question:0,total_questions:0,questions:{},validators:{},status:null,bind:function(){var e=this;c("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),c(".llms-donut").each(function(){LLMS.Donut(c(this))}),c("#llms-quiz-attempt-select").on("change",function(){var t=c(this).val();t&&(window.location.href=t)}),c(window).on("beforeunload",function(){if(e.status)return LLMS.l10n.translate("Are you sure you wish to quit this quiz attempt?")}),c(window).on("unload",function(){e.status&&e.complete_quiz()}),c(document).on("llms-post-append-question",e.post_append_question),this.register_validator("content",this.validate),this.register_validator("choice",this.validate_choice),this.register_validator("picture_choice",this.validate_choice),this.register_validator("true_false",this.validate_choice)},add_error:function(t){this.$container.find(".llms-error").remove();var e=c('<p class="llms-error">'+t+'<a href="#"><i class="fa fa-times-circle" aria-hidden="true"></i></a></p>');e.on("click","a",function(t){t.preventDefault(),e.fadeOut("200"),setTimeout(function(){e.remove()},210)}),this.$container.append(e)},answer_question:function(e){var t,s=this,i=this.$container.find(".llms-question-wrapper"),n=i.attr("data-type");if(this.validators[n]){if(!(t=this.validators[n](i))||!0!==t.valid||!t.answer)return s.add_error(t.valid);LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:t.answer,attempt_key:s.attempt_key,question_id:i.attr("data-id"),question_type:i.attr("data-type")},beforeSend:function(){var t=e.hasClass("llms-button-quiz-complete")?LLMS.l10n.translate("Grading Quiz..."):LLMS.l10n.translate("Loading Question...");s.toggle_loader("show",t),s.update_progress_bar("increment")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.question_id&&s.questions["q-"+t.data.question_id]?s.load_question(s.questions["q-"+t.data.question_id]):s.load_question(t.data.html);else if(t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})}else console.log("No validator registered for question type "+n)},complete_quiz:function(){var s=this;LLMS.Ajax.call({data:{action:"quiz_end",attempt_key:s.attempt_key},beforeSend:function(){s.toggle_loader("show","Grading Quiz...")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})},get_question_index:function(t){return Object.keys(this.questions).indexOf("q-"+t)},redirect:function(t){this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=t},previous_question:function(){var t=this;t.toggle_loader("show",LLMS.l10n.translate("Loading Question...")),t.update_progress_bar("decrement");var e=Object.keys(t.questions),s=e.indexOf("q-"+t.current_question),i=e[0];1<=s&&(i=e[s-1]),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[i])},100)},register_validator:function(t,e){this.validators[t]=e},start_quiz:function(){var s=this;this.load_ui_elements(),this.$ui=c("#llms-quiz-ui"),this.$buttons=c("#llms-quiz-nav button"),this.$container=c("#llms-quiz-question-wrapper"),c("#llms-next-question, #llms-complete-quiz").on("click",function(t){t.preventDefault(),s.answer_question(c(this))}),c("#llms-prev-question").on("click",function(t){t.preventDefault(),s.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:c("#llms-attempt-key").val(),lesson_id:c("#llms-lesson-id").val(),quiz_id:c("#llms-quiz-id").val()},beforeSend:function(){s.status=!0,c("#llms-quiz-wrapper, #quiz-start-button").remove(),c("html, body").stop().animate({scrollTop:0},500),s.toggle_loader("show",LLMS.l10n.translate("Loading Quiz..."))},error:function(t,e,s){console.log(t,e,s)},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.time_limit&&s.start_quiz_timer(t.data.time_limit),s.attempt_key=t.data.attempt_key,s.total_questions=t.data.total,s.load_question(t.data.html);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}}),LLMS.is_touch_device()||(this.$ui.on("mouseenter","li.llms-choice label",function(){c(this).addClass("hovered")}),this.$ui.on("mouseleave","li.llms-choice label",function(){c(this).removeClass("hovered")}))},start_quiz_timer:function(t){var e=c('<div class="llms-quiz-timer" id="llms-quiz-timer" />'),s=LLMS.l10n.translate("Time Remaining");e.append('<i class="fa fa-clock-o" aria-hidden="true"></i><span class="screen-reader-text">'+s+"</span>"),e.append('<div id="llms-tiles" class="llms-tiles"></div>'),c("#llms-quiz-header").append(e);var i,n,a,l,o=this,r=(new Date).getTime()+60*t*1e3,u=60*t*1e3,d=document.getElementById("llms-tiles");setTimeout(function(){o.complete_quiz()},1e3+u),this.getCountdown(t,r,u,i,n,a,l,d),setInterval(function(){o.getCountdown(t,r,u,i,n,a,l,d)},1e3)},trigger:function(t){"answer_question"===t&&(this.get_question_index(this.current_question)===this.total_questions?c("#llms-complete-quiz").trigger("click"):c("#llms-next-question").trigger("click"))},load_question:function(t){var e=c(t),s=e.attr("data-id");this.questions["q-"+s]||(this.questions["q-"+s]=e),this.update_progress(s),this.current_question=s,c(document).trigger("llms-pre-append-question",e),this.$container.append(e),c(document).trigger("llms-post-append-question",e)},load_ui_elements:function(){var t=c('<div class="llms-quiz-ui" id="llms-quiz-ui" />'),e=c('<header class="llms-quiz-header" id="llms-quiz-header" />');$footer=c('<footer class="llms-quiz-nav" id="llms-quiz-nav" />'),$footer.append('<button class="button large llms-button-action" id="llms-next-question" name="llms_next_question" type="submit">'+LLMS.l10n.translate("Next Question")+"</button>"),$footer.append('<button class="button large llms-button-action llms-button-quiz-complete" id="llms-complete-quiz" name="llms_complete_quiz" type="submit" style="display:none;">'+LLMS.l10n.translate("Complete Quiz")+"</button>"),$footer.append('<button class="button llms-button-secondary" id="llms-prev-question" name="llms_prev_question" type="submit" style="display:none;">'+LLMS.l10n.translate("Previous Question")+"</button>"),e.append('<div class="llms-progress"><div class="progress-bar-complete"></div></div>'),$footer.append('<div class="llms-quiz-counter" id="llms-quiz-counter"><span class="llms-current"></span><span class="llms-sep">/</span><span class="llms-total"></span></div>'),t.append(e).append('<div class="llms-quiz-question-wrapper" id="llms-quiz-question-wrapper" />').append($footer),c("#llms-quiz-wrapper").after(t)},post_append_question:function(t,e){c(e).find("audio").length&&wp.mediaelement.initialize()},toggle_loader:function(t,e){"show"===t?(e=e||LLMS.l10n.translate("Loading..."),this.$buttons.attr("disabled","disabled"),this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$buttons.removeAttr("disabled"),this.$container.find(".llms-quiz-loading").remove())},update_progress:function(t){var e=this.get_question_index(t);-1!==e&&(e++,c("#llms-quiz-counter .llms-current").text(e),1===e&&(c("#llms-quiz-counter .llms-total").text(this.total_questions),c("#llms-quiz-counter").show()),2<=e?c("#llms-prev-question").show():c("#llms-prev-question").hide(),e===this.total_questions?(c("#llms-next-question").hide(),c("#llms-complete-quiz").show()):(c("#llms-next-question").show(),c("#llms-complete-quiz").hide()))},update_progress_bar:function(t){var e=this.get_question_index(this.current_question);"increment"===t?e++:e--,progress=e/this.total_questions*100,this.$ui.find(".progress-bar-complete").css("width",progress+"%")},getCountdown:function(t,e,s,i,n,a,l,o){var r=(e-(new Date).getTime())/1e3;0<=r&&(1e3*r<s/2&&c("#llms-quiz-timer").addClass("color-half"),1e3*r<s/4&&(c("#llms-quiz-timer").removeClass("color-half"),c("#llms-quiz-timer").addClass("color-empty")),this.pad(parseInt(r/86400)),r%=86400,n=this.pad(parseInt(r/3600)),r%=3600,a=this.pad(parseInt(r/60)),l=this.pad(parseInt(r%60)),o.innerHTML='<span class="hours">'+n+'</span>:<span class="minutes">'+a+'</span>:<span class="seconds">'+l+"</span>")},pad:function(t){return(t<10?"0":"")+t},validate:function(t){return{answer:[],valid:!0}},validate_choice:function(t){var e=window.llms.quizzes.validate(t),s=t.find("input:checked");return s.length?s.each(function(){e.answer.push(c(this).val())}):e.valid=LLMS.l10n.translate("You must select an answer to continue."),e}};t.bind(),window.llms=window.llms||{},window.llms.quizzes=t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtcXVpei5qcyJdLCJuYW1lcyI6WyIkIiwicXVpeiIsIiRidXR0b25zIiwiJGNvbnRhaW5lciIsIiR1aSIsImF0dGVtcHRfa2V5IiwiY3VycmVudF9xdWVzdGlvbiIsInRvdGFsX3F1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInZhbGlkYXRvcnMiLCJzdGF0dXMiLCJiaW5kIiwic2VsZiIsInRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0X3F1aXoiLCJlYWNoIiwiTExNUyIsIkRvbnV0IiwidmFsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibDEwbiIsInRyYW5zbGF0ZSIsImNvbXBsZXRlX3F1aXoiLCJkb2N1bWVudCIsInBvc3RfYXBwZW5kX3F1ZXN0aW9uIiwicmVnaXN0ZXJfdmFsaWRhdG9yIiwidmFsaWRhdGUiLCJ2YWxpZGF0ZV9jaG9pY2UiLCJhZGRfZXJyb3IiLCJtc2ciLCJmaW5kIiwicmVtb3ZlIiwiJGVyciIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiYW5zd2VyX3F1ZXN0aW9uIiwiJGJ0biIsInZhbGlkIiwiJHF1ZXN0aW9uIiwidHlwZSIsImF0dHIiLCJhbnN3ZXIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJhY3Rpb24iLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX3R5cGUiLCJiZWZvcmVTZW5kIiwiaGFzQ2xhc3MiLCJ0b2dnbGVfbG9hZGVyIiwidXBkYXRlX3Byb2dyZXNzX2JhciIsInN1Y2Nlc3MiLCJyIiwiaHRtbCIsImxvYWRfcXVlc3Rpb24iLCJyZWRpcmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0X3F1ZXN0aW9uX2luZGV4IiwicWlkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ1cmwiLCJwcmV2aW91c19xdWVzdGlvbiIsImlkcyIsImN1cnIiLCJwcmV2X2lkIiwiZnVuYyIsImxvYWRfdWlfZWxlbWVudHMiLCJsZXNzb25faWQiLCJxdWl6X2lkIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlcnJvciIsInMiLCJ0IiwidGltZV9saW1pdCIsInN0YXJ0X3F1aXpfdGltZXIiLCJ0b3RhbCIsImlzX3RvdWNoX2RldmljZSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ0b3RhbF9taW51dGVzIiwiJGVsIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJ0YXJnZXRfZGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiY291bnRkb3duIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb3VudGRvd24iLCJzZXRJbnRlcnZhbCIsInRyaWdnZXIiLCJldmVudCIsIiRodG1sIiwidXBkYXRlX3Byb2dyZXNzIiwiJGhlYWRlciIsIiRmb290ZXIiLCJhZnRlciIsImxlbmd0aCIsIndwIiwibWVkaWFlbGVtZW50IiwiaW5pdGlhbGl6ZSIsImRpc3BsYXkiLCJlbXB0eSIsIlNwaW5uZXIiLCJzdGFydCIsInJlbW92ZUF0dHIiLCJpbmRleCIsInRleHQiLCJzaG93IiwiaGlkZSIsImRpciIsInByb2dyZXNzIiwiY3NzIiwic2Vjb25kc19sZWZ0IiwicGFkIiwicGFyc2VJbnQiLCJpbm5lckhUTUwiLCJuIiwicmV0IiwibGxtcyIsInF1aXp6ZXMiLCJjaGVja2VkIiwicHVzaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBU0csU0FBWUEsR0FFZCxJQUFJQyxFQUFPLENBT1ZDLFNBQVUsS0FPVkMsV0FBWSxLQU9aQyxJQUFLLEtBT0xDLFlBQWEsS0FPYkMsaUJBQWtCLEVBT2xCQyxnQkFBaUIsRUFPakJDLFVBQVcsR0FRWEMsV0FBWSxHQVVaQyxPQUFRLEtBU1JDLEtBQU0sV0FFTCxJQUFJQyxFQUFPQyxLQUdYYixFQUFHLG9CQUFxQmMsR0FBSSxRQUFTLFNBQVVDLEdBQzlDQSxFQUFFQyxpQkFDRkosRUFBS0ssZUFJTmpCLEVBQUcsZUFBZ0JrQixLQUFNLFdBQ3hCQyxLQUFLQyxNQUFPcEIsRUFBR2EsU0FJaEJiLEVBQUcsNkJBQThCYyxHQUFJLFNBQVUsV0FD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QWlCLFNBQVVZLEdBRTFCLElBQUl5RixFQUFVL0csT0FBT2dILEtBQUtDLFFBQVF4RyxTQUFVYSxHQUMzQzRGLEVBQVU1RixFQUFVVCxLQUFNLGlCQVUzQixPQVJPcUcsRUFBUXhCLE9BR2R3QixFQUFRdEgsS0FBTSxXQUNibUgsRUFBSXRGLE9BQU8wRixLQUFNekksRUFBR2EsTUFBT1EsU0FINUJnSCxFQUFJMUYsTUFBUXhCLEtBQUtNLEtBQUtDLFVBQVcsMENBTzNCMkcsSUFNVHBJLEVBQUtVLE9BRUxXLE9BQU9nSCxLQUFlaEgsT0FBT2dILE1BQVEsR0FDckNoSCxPQUFPZ0gsS0FBS0MsUUFBVXRJLEVBbHpCcEIsQ0FvekJFeUkiLCJmaWxlIjoibGxtcy1xdWl6Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsvKiBnbG9iYWwgTExNUywgJCAqL1xuLyoganNoaW50IHN0cmljdDogdHJ1ZSAqL1xuXG4vKipcbiAqIEZyb250IEVuZCBRdWl6IENsYXNzXG4gKlxuICogQHR5cGUgICAgIHtPYmplY3R9XG4gKiBAc2luY2UgICAgMS4wLjBcbiAqIEB2ZXJzaW9uICAzLjI0LjNcbiAqLyggZnVuY3Rpb24oICQgKSB7XG5cblx0dmFyIHF1aXogPSB7XG5cblx0XHQvKipcblx0XHQgKiBTZWxlY3RvciBvZiBhbGwgdGhlIGF2YWlsYWJsZSBidXR0b24gZWxlbWVudHNcblx0XHQgKlxuXHRcdCAqIEB0eXBlICBvYmpcblx0XHQgKi9cblx0XHQkYnV0dG9uczogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIE1haW4gUXVlc3Rpb24gQ29udGFpbmVyIEVsZW1lbnRcblx0XHQgKlxuXHRcdCAqIEB0eXBlICBvYmpcblx0XHQgKi9cblx0XHQkY29udGFpbmVyOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogTWFpbiBRdWl6IGNvbnRhaW5lciBVSSBlbGVtZW50XG5cdFx0ICpcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JHVpOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogQXR0ZW1wdCBrZXkgZm9yIHRoZSBjdXJyZW50IHF1aXpcblx0XHQgKlxuXHRcdCAqIEB0eXBlICB7W3R5cGVdfVxuXHRcdCAqL1xuXHRcdGF0dGVtcHRfa2V5OiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogUXVlc3Rpb24gSUQgb2YgdGhlIGN1cnJlbnQgcXVlc3Rpb25cblx0XHQgKlxuXHRcdCAqIEB0eXBlICB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdGN1cnJlbnRfcXVlc3Rpb246IDAsXG5cblx0XHQvKipcblx0XHQgKiBUb3RhbCBudW1iZXIgb2YgcXVlc3Rpb25zIGluIHRoZSBjdXJyZW50IHF1aXpcblx0XHQgKlxuXHRcdCAqIEB0eXBlICB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdHRvdGFsX3F1ZXN0aW9uczogMCxcblxuXHRcdC8qKlxuXHRcdCAqIE9iamVjdCBvZiBxdWl6IHF1ZXN0aW9uIEhUTUxcblx0XHQgKlxuXHRcdCAqIEB0eXBlICB7T2JqZWN0fVxuXHRcdCAqL1xuXHRcdHF1ZXN0aW9uczoge30sXG5cblx0XHQvKipcblx0XHQgKiBWYWxpZGF0b3IgZnVuY3Rpb25zIGZvciBxdWVzdGlvbiB0eXBlc1xuXHRcdCAqIFRoaXJkIHBhcnR5IGN1c3RvbSBxdWVzdGlvbiB0eXBlcyBjYW4gcmVnaXN0ZXIgdmFsaWRhdG9ycyBmb3IgdXNlIHdoZW4gYW5zd2VyaW5nIHF1ZXN0aW9uc1xuXHRcdCAqXG5cdFx0ICogQHR5cGUgIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0dmFsaWRhdG9yczoge30sXG5cblx0XHQvKipcblx0XHQgKiBSZWNvcmRzIGN1cnJlbnQgc3RhdHVzIG9mIGEgcXVpeiBzZXNzaW9uXG5cdFx0ICogSWYgYSB1c2VyIGF0dGVtcHRzIHRvIG5hdmlnYXRlIGF3YXkgZnJvbSBhIHF1aXpcblx0XHQgKiB3aGlsZSB0YWtpbmcgdGhlIHF1aXogdGhleSdsbCBiZSB3YXJuZWQgdGhhdCB0aGVpciBwcm9ncmVzc1xuXHRcdCAqIHdpbGwgbm90IGJlIHNhdmVkIGlmIHRoaXMgc3RhdHVzIGlzIG5vdCBudWxsXG5cdFx0ICpcblx0XHQgKiBAdHlwZSAgYm9vbGVhblxuXHRcdCAqL1xuXHRcdHN0YXR1czogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqXG5cdFx0ICogQHJldHVybiB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdGJpbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIHN0YXJ0IHF1aXpcblx0XHRcdCQoICcjbGxtc19zdGFydF9xdWl6JyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRzZWxmLnN0YXJ0X3F1aXooKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gZHJhdyBxdWl6IGdyYWRlIGNpcmN1bGFyIGNoYXJ0XG5cdFx0XHQkKCAnLmxsbXMtZG9udXQnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdExMTVMuRG9udXQoICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyByZWRpcmVjdCB0byBhdHRlbXB0IG9uIGF0dGVtcHQgc2VsZWN0aW9uIGNoYW5nZVxuXHRcdFx0JCggJyNsbG1zLXF1aXotYXR0ZW1wdC1zZWxlY3QnICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHZhbCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSB2YWw7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gd2FybiB3aGVuIHF1aXogaXMgcnVubmluZyBhbmQgdXNlciB0cmllcyB0byBsZWF2ZSB0aGUgcGFnZVxuXHRcdFx0JCggd2luZG93ICkub24oICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBzZWxmLnN0YXR1cyApIHtcblx0XHRcdFx0XHRyZXR1cm4gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBxdWl0IHRoaXMgcXVpeiBhdHRlbXB0PycgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBjb21wbGV0ZSB0aGUgcXVpeiBhdHRlbXB0IHdoZW4gdXNlciBsZWF2ZXMgaWYgdGhlIHF1aXogaXMgcnVubmluZ1xuXHRcdFx0JCggd2luZG93ICkub24oICd1bmxvYWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBzZWxmLnN0YXR1cyApIHtcblx0XHRcdFx0XHRzZWxmLmNvbXBsZXRlX3F1aXooKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLm9uKCAnbGxtcy1wb3N0LWFwcGVuZC1xdWVzdGlvbicsIHNlbGYucG9zdF9hcHBlbmRfcXVlc3Rpb24gKTtcblxuXHRcdFx0Ly8gcmVnaXN0ZXIgdmFsaWRhdG9yc1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdjb250ZW50JywgdGhpcy52YWxpZGF0ZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdjaG9pY2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICdwaWN0dXJlX2Nob2ljZScsIHRoaXMudmFsaWRhdGVfY2hvaWNlICk7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyX3ZhbGlkYXRvciggJ3RydWVfZmFsc2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEFkZCBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBVSVxuXHRcdCAqXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIG1zZyAgZXJyb3IgbWVzc2FnZSBzdHJpbmdcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0YWRkX2Vycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYuJGNvbnRhaW5lci5maW5kKCAnLmxsbXMtZXJyb3InICkucmVtb3ZlKCk7XG5cdFx0XHR2YXIgJGVyciA9ICQoICc8cCBjbGFzcz1cImxsbXMtZXJyb3JcIj4nICsgbXNnICsgJzxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lcy1jaXJjbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9hPjwvcD4nICk7XG5cdFx0XHQkZXJyLm9uKCAnY2xpY2snLCAnYScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRlcnIuZmFkZU91dCggJzIwMCcgKTtcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JGVyci5yZW1vdmUoKTtcblx0XHRcdFx0fSwgMjEwICk7XG5cdFx0XHR9ICk7XG5cdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAkZXJyICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQW5zd2VyIGEgUXVlc3Rpb25cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkYnRuICAgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIFwiTmV4dCBMZXNzb25cIiBidXR0b25cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRhbnN3ZXJfcXVlc3Rpb246IGZ1bmN0aW9uKCAkYnRuICkge1xuXG5cdFx0XHR2YXIgc2VsZiAgICAgID0gdGhpcyxcblx0XHRcdFx0JHF1ZXN0aW9uID0gdGhpcy4kY29udGFpbmVyLmZpbmQoICcubGxtcy1xdWVzdGlvbi13cmFwcGVyJyApLFxuXHRcdFx0XHR0eXBlICAgICAgPSAkcXVlc3Rpb24uYXR0ciggJ2RhdGEtdHlwZScgKSxcblx0XHRcdFx0dmFsaWQ7XG5cblx0XHRcdGlmICggISB0aGlzLnZhbGlkYXRvcnNbIHR5cGUgXSApIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyggJ05vIHZhbGlkYXRvciByZWdpc3RlcmVkIGZvciBxdWVzdGlvbiB0eXBlICcgKyB0eXBlICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YWxpZCA9IHRoaXMudmFsaWRhdG9yc1sgdHlwZSBdKCAkcXVlc3Rpb24gKTtcblx0XHRcdGlmICggISB2YWxpZCB8fCB0cnVlICE9PSB2YWxpZC52YWxpZCB8fCAhIHZhbGlkLmFuc3dlciApIHtcblx0XHRcdFx0cmV0dXJuIHNlbGYuYWRkX2Vycm9yKCB2YWxpZC52YWxpZCApO1xuXHRcdFx0fVxuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAncXVpel9hbnN3ZXJfcXVlc3Rpb24nLFxuXHRcdFx0XHRcdGFuc3dlcjogdmFsaWQuYW5zd2VyLFxuXHRcdFx0XHRcdGF0dGVtcHRfa2V5OiBzZWxmLmF0dGVtcHRfa2V5LFxuXHRcdFx0XHRcdHF1ZXN0aW9uX2lkOiAkcXVlc3Rpb24uYXR0ciggJ2RhdGEtaWQnICksXG5cdFx0XHRcdFx0cXVlc3Rpb25fdHlwZTogJHF1ZXN0aW9uLmF0dHIoICdkYXRhLXR5cGUnICksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0dmFyIG1zZyA9ICRidG4uaGFzQ2xhc3MoICdsbG1zLWJ1dHRvbi1xdWl6LWNvbXBsZXRlJyApID8gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0dyYWRpbmcgUXVpei4uLicgKSA6IExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nIFF1ZXN0aW9uLi4uJyApO1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCBtc2cgKTtcblxuXHRcdFx0XHRcdHNlbGYudXBkYXRlX3Byb2dyZXNzX2JhciggJ2luY3JlbWVudCcgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEuaHRtbCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gbG9hZCBodG1sIGZyb20gdGhlIGNhY2hlZCBxdWVzdGlvbnMgaWYgaXQgZXhpc3RzIGFscmVhZHlcblx0XHRcdFx0XHRcdGlmICggci5kYXRhLnF1ZXN0aW9uX2lkICYmIHNlbGYucXVlc3Rpb25zWyAncS0nICsgci5kYXRhLnF1ZXN0aW9uX2lkIF0gKSB7XG5cblx0XHRcdFx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCBzZWxmLnF1ZXN0aW9uc1sgJ3EtJyArIHIuZGF0YS5xdWVzdGlvbl9pZCBdICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gbG9hZCBodG1sIGZyb20gc2VydmVyIGlmIHRoZSBxdWVzdGlvbidzIG5ldmVyIGJlZW4gc2VlbiBiZWZvcmVcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggci5kYXRhLmh0bWwgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIuZGF0YSAmJiByLmRhdGEucmVkaXJlY3QgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYucmVkaXJlY3QoIHIuZGF0YS5yZWRpcmVjdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29tcGxldGUgdGhlIHF1aXpcblx0XHQgKiBDYWxsZWQgd2hlbiB0aW1lZCBxdWl6emVzIHJlYWNoIHRpbWUgbGltaXRcblx0XHQgKiAmIGR1cmluZyB1bmxvYWQgZXZlbnRzIHRvIHJlY29yZCB0aGUgYXR0ZW1wdCBhcyBhYmFuZG9uZWRcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOS4wXG5cdFx0ICovXG5cdFx0Y29tcGxldGVfcXVpejogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfZW5kJyxcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogc2VsZi5hdHRlbXB0X2tleSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgJ0dyYWRpbmcgUXVpei4uLicgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEucmVkaXJlY3QgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYucmVkaXJlY3QoIHIuZGF0YS5yZWRpcmVjdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgdGhlIGluZGV4IG9mIGEgcXVlc3Rpb24gYnkgcXVlc3Rpb24gaWRcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBpbnQgICBxaWQgIFdQIFBvc3QgSUQgb2YgdGhlIHF1ZXN0aW9uXG5cdFx0ICogQHJldHVybiAgIGludFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0Z2V0X3F1ZXN0aW9uX2luZGV4OiBmdW5jdGlvbiggcWlkICkge1xuXG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoIHRoaXMucXVlc3Rpb25zICkuaW5kZXhPZiggJ3EtJyArIHFpZCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlZGlyZWN0IG9uIHF1aXogY29tcGxldGlvbiAvIHRpbWVvdXRcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICB1cmwgIHJlZGlyZWN0IHVybFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHJlZGlyZWN0OiBmdW5jdGlvbiggdXJsICkge1xuXG5cdFx0XHR0aGlzLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgJ0dyYWRpbmcgUXVpei4uLicgKTtcblx0XHRcdHRoaXMuc3RhdHVzICAgICAgICAgID0gbnVsbDtcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB0byB0aGUgcHJldmlvdXMgcXVlc3Rpb25cblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHByZXZpb3VzX3F1ZXN0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcgUXVlc3Rpb24uLi4nICkgKTtcblx0XHRcdHNlbGYudXBkYXRlX3Byb2dyZXNzX2JhciggJ2RlY3JlbWVudCcgKTtcblxuXHRcdFx0dmFyIGlkcyAgICAgPSBPYmplY3Qua2V5cyggc2VsZi5xdWVzdGlvbnMgKSxcblx0XHRcdFx0Y3VyciAgICA9IGlkcy5pbmRleE9mKCAncS0nICsgc2VsZi5jdXJyZW50X3F1ZXN0aW9uICksXG5cdFx0XHRcdHByZXZfaWQgPSBpZHNbMF07XG5cblx0XHRcdGlmICggY3VyciA+PSAxICkge1xuXHRcdFx0XHRwcmV2X2lkID0gaWRzWyBjdXJyIC0gMSBdO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCBzZWxmLnF1ZXN0aW9uc1sgcHJldl9pZCBdICk7XG5cdFx0XHR9LCAxMDAgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWdpc3RlciBxdWVzdGlvbiB0eXBlIHZhbGlkYXRvciBmdW5jdGlvbnNcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICAgIHR5cGUgIHF1ZXN0aW9uIHR5cGUgaWRcblx0XHQgKiBAcGFyYW0gICAgZnVuY3Rpb24gICBmdW5jICBjYWxsYmFjayBmdW5jdGlvbiB0byB2YWxpZGF0ZSB0aGUgcXVlc3Rpb24gd2l0aFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRyZWdpc3Rlcl92YWxpZGF0b3I6IGZ1bmN0aW9uKCB0eXBlLCBmdW5jICkge1xuXG5cdFx0XHR0aGlzLnZhbGlkYXRvcnNbIHR5cGUgXSA9IGZ1bmM7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RhcnQgYSBRdWl6IHZpYSBBSkFYIGNhbGxcblx0XHQgKlxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjQuM1xuXHRcdCAqL1xuXHRcdHN0YXJ0X3F1aXo6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLmxvYWRfdWlfZWxlbWVudHMoKTtcblx0XHRcdHRoaXMuJHVpICAgICAgICA9ICQoICcjbGxtcy1xdWl6LXVpJyApO1xuXHRcdFx0dGhpcy4kYnV0dG9ucyAgID0gJCggJyNsbG1zLXF1aXotbmF2IGJ1dHRvbicgKTtcblx0XHRcdHRoaXMuJGNvbnRhaW5lciA9ICQoICcjbGxtcy1xdWl6LXF1ZXN0aW9uLXdyYXBwZXInICk7XG5cblx0XHRcdC8vIGJpbmQgc3VibWlzc2lvbiBldmVudCBmb3IgYW5zd2VyaW5nIHF1ZXN0aW9uc1xuXHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24sICNsbG1zLWNvbXBsZXRlLXF1aXonICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYuYW5zd2VyX3F1ZXN0aW9uKCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gYmluZCBzdWJtaXNzaW9uIGV2ZW50IGZvciBuYXZpZ2F0aW5nIGJhY2t3YXJkc1xuXHRcdFx0JCggJyNsbG1zLXByZXYtcXVlc3Rpb24nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYucHJldmlvdXNfcXVlc3Rpb24oKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfc3RhcnQnLFxuXHRcdFx0XHRcdGF0dGVtcHRfa2V5OiAkKCAnI2xsbXMtYXR0ZW1wdC1rZXknICkudmFsKCksXG5cdFx0XHRcdFx0bGVzc29uX2lkIDogJCggJyNsbG1zLWxlc3Nvbi1pZCcgKS52YWwoKSxcblx0XHRcdFx0XHRxdWl6X2lkIDogJCggJyNsbG1zLXF1aXotaWQnICkudmFsKCksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0c2VsZi5zdGF0dXMgPSB0cnVlO1xuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXdyYXBwZXIsICNxdWl6LXN0YXJ0LWJ1dHRvbicgKS5yZW1vdmUoKTtcblx0XHRcdFx0XHQkKCAnaHRtbCwgYm9keScgKS5zdG9wKCkuYW5pbWF0ZSgge3Njcm9sbFRvcDogMCB9LCA1MDAgKTtcblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcgUXVpei4uLicgKSApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiggciwgcywgdCApIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggciwgcywgdCApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEuaHRtbCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gc3RhcnQgdGhlIHF1aXogdGltZXIgd2hlbiBhIHRpbWUgbGltaXQgaXMgc2V0XG5cdFx0XHRcdFx0XHRpZiAoIHIuZGF0YS50aW1lX2xpbWl0ICkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLnN0YXJ0X3F1aXpfdGltZXIoIHIuZGF0YS50aW1lX2xpbWl0ICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNlbGYuYXR0ZW1wdF9rZXkgICAgID0gci5kYXRhLmF0dGVtcHRfa2V5O1xuXHRcdFx0XHRcdFx0c2VsZi50b3RhbF9xdWVzdGlvbnMgPSByLmRhdGEudG90YWw7XG5cblx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggci5kYXRhLmh0bWwgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nICk7XG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIG1zZyArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIFVzZSBKUyBtb3VzZSBldmVudHMgaW5zdGVhZCBvZiBDU1MgOmhvdmVyIGJlY2F1c2UgaU9TIGlzIHJlYWxseSBzbWFydFxuXHRcdFx0ICpcblx0XHRcdCAqIEBzZWU6IGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vYW5ub3lpbmctbW9iaWxlLWRvdWJsZS10YXAtbGluay1pc3N1ZS9cblx0XHRcdCAqL1xuXHRcdFx0aWYgKCAhIExMTVMuaXNfdG91Y2hfZGV2aWNlKCkgKSB7XG5cblx0XHRcdFx0dGhpcy4kdWkub24oICdtb3VzZWVudGVyJywgJ2xpLmxsbXMtY2hvaWNlIGxhYmVsJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCAnaG92ZXJlZCcgKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0XHR0aGlzLiR1aS5vbiggJ21vdXNlbGVhdmUnLCAnbGkubGxtcy1jaG9pY2UgbGFiZWwnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdob3ZlcmVkJyApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTdGFydCBRdWl6IFRpbWVyXG5cdFx0ICogR2V0cyBtaW51dGVzIGZyb20gaGlkZGVuIGZpZWxkXG5cdFx0ICogTm90IHVzZWQgYXMgYWN0dWFsIHF1aXogdGltZXIuIFF1aXogaXMgdGltZWQgb24gdGhlIHNlcnZlciBmcm9tIHRoZSBxdWl6IGNsYXNzXG5cdFx0ICogQ2FsY3VsYXRlcyBtaW51dGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgdGhlbiBjb252ZXJ0cyB0byBob3VycyAvIG1pbnV0ZXNcblx0XHQgKiBXaGVuIHRpbWUgbGltaXQgcmVhY2hlcyAwIGNhbGxzIGNvbXBsZXRlX3F1aXooKSB0byBjb21wbGV0ZSBxdWl6LlxuXHRcdCAqXG5cdFx0ICogQHJldHVybiBDYWxscyBnZXRfY291bnRfZG93biBhdCBhIHNldCBpbnRlcnZhbCBvZiAxIHNlY29uZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRzdGFydF9xdWl6X3RpbWVyOiBmdW5jdGlvbiggdG90YWxfbWludXRlcyApIHtcblxuXHRcdFx0Ly8gY3JlYXRlIGFuZCBhcHBlbmQgdGhlIFVJIGZvciB0aGUgY291bnRkb3duIGNsb2NrXG5cdFx0XHR2YXIgJGVsID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotdGltZXJcIiBpZD1cImxsbXMtcXVpei10aW1lclwiIC8+JyApLFxuXHRcdFx0XHRtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVGltZSBSZW1haW5pbmcnICk7XG5cblx0XHRcdCRlbC5hcHBlbmQoICc8aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PHNwYW4gY2xhc3M9XCJzY3JlZW4tcmVhZGVyLXRleHRcIj4nICsgbXNnICsgJzwvc3Bhbj4nICk7XG5cdFx0XHQkZWwuYXBwZW5kKCAnPGRpdiBpZD1cImxsbXMtdGlsZXNcIiBjbGFzcz1cImxsbXMtdGlsZXNcIj48L2Rpdj4nICk7XG5cblx0XHRcdCQoICcjbGxtcy1xdWl6LWhlYWRlcicgKS5hcHBlbmQoICRlbCApO1xuXG5cdFx0XHQvLyBzdGFydCB0aGUgdGltZXJcblx0XHRcdHZhciBzZWxmICAgICAgICA9IHRoaXMsXG5cdFx0XHRcdHRhcmdldF9kYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAoICggdG90YWxfbWludXRlcyAqIDYwICkgKiAxMDAwICksIC8vIHNldCB0aGUgY291bnRkb3duIGRhdGVcblx0XHRcdFx0dGltZV9saW1pdCAgPSAoICggdG90YWxfbWludXRlcyAqIDYwICkgKiAxMDAwICksXG5cdFx0XHRcdGNvdW50ZG93biAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdsbG1zLXRpbGVzJyApLCAvLyBnZXQgdGFnIGVsZW1lbnRcblx0XHRcdFx0ZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHM7IC8vIHZhcmlhYmxlcyBmb3IgdGltZSB1bml0c1xuXG5cdFx0XHQvLyBzZXQgYWN0dWFsIHRpbWVyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5jb21wbGV0ZV9xdWl6KCk7XG5cdFx0XHR9LCB0aW1lX2xpbWl0ICsgMTAwMCApO1xuXG5cdFx0XHR0aGlzLmdldENvdW50ZG93bihcblx0XHRcdFx0dG90YWxfbWludXRlcyxcblx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdHRpbWVfbGltaXQsXG5cdFx0XHRcdGRheXMsXG5cdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRtaW51dGVzLFxuXHRcdFx0XHRzZWNvbmRzLFxuXHRcdFx0XHRjb3VudGRvd25cblx0XHRcdCk7XG5cblx0XHRcdC8vIGNhbGwgZ2V0X2NvdW50X2Rvd24gZXZlcnkgMSBzZWNvbmRcblx0XHRcdHNldEludGVydmFsKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuZ2V0Q291bnRkb3duKFxuXHRcdFx0XHRcdHRvdGFsX21pbnV0ZXMsXG5cdFx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdFx0dGltZV9saW1pdCxcblx0XHRcdFx0XHRkYXlzLFxuXHRcdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRcdG1pbnV0ZXMsXG5cdFx0XHRcdFx0c2Vjb25kcyxcblx0XHRcdFx0XHRjb3VudGRvd25cblx0XHRcdFx0KTtcblx0XHRcdH0sIDEwMDAgKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVHJpZ2dlciBldmVudHNcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBldmVudCAgZXZlbnQgdG8gdHJpZ2dlclxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gdHJpZ2dlciBxdWVzdGlvbiBzdWJtaXNzaW9uIGZvciB0aGUgY3VycmVudCBxdWVzdGlvblxuXHRcdFx0aWYgKCAnYW5zd2VyX3F1ZXN0aW9uJyA9PT0gZXZlbnQgKSB7XG5cblx0XHRcdFx0aWYgKCB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggc2VsZi5jdXJyZW50X3F1ZXN0aW9uICkgPT09IHNlbGYudG90YWxfcXVlc3Rpb25zICkge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogTG9hZCB0aGUgSFRNTCBvZiBhIHF1ZXN0aW9uIGludG8gdGhlIERPTSBhbmQgdGhlIHF1ZXN0aW9uIGNhY2hlXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgaHRtbCAgc3RyaW5nIG9mIGh0bWxcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjkuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRsb2FkX3F1ZXN0aW9uOiBmdW5jdGlvbiggaHRtbCApIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggaHRtbCApLFxuXHRcdFx0XHRxaWQgICA9ICRodG1sLmF0dHIoICdkYXRhLWlkJyApO1xuXG5cdFx0XHQvLyBjYWNoZSB0aGUgcXVlc3Rpb24gSFRNTCBmb3IgZmFzdGVyIHJld2luZHNcblx0XHRcdGlmICggISB0aGlzLnF1ZXN0aW9uc1sgJ3EtJyArIHFpZCBdICkge1xuXHRcdFx0XHR0aGlzLnF1ZXN0aW9uc1sgJ3EtJyArIHFpZCBdID0gJGh0bWw7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudXBkYXRlX3Byb2dyZXNzKCBxaWQgKTtcblxuXHRcdFx0dGhpcy5jdXJyZW50X3F1ZXN0aW9uID0gcWlkO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLnRyaWdnZXIoICdsbG1zLXByZS1hcHBlbmQtcXVlc3Rpb24nLCAkaHRtbCApO1xuXG5cdFx0XHR0aGlzLiRjb250YWluZXIuYXBwZW5kKCAkaHRtbCApO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLnRyaWdnZXIoICdsbG1zLXBvc3QtYXBwZW5kLXF1ZXN0aW9uJywgJGh0bWwgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDb25zdHJ1Y3RzIHRoZSBxdWl6IFVJICYgYWRkcyB0aGUgZWxlbWVudHMgaW50byB0aGUgRE9NXG5cdFx0ICpcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi45XG5cdFx0ICovXG5cdFx0bG9hZF91aV9lbGVtZW50czogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkaHRtbCAgID0gJCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotdWlcIiBpZD1cImxsbXMtcXVpei11aVwiIC8+JyApLFxuXHRcdFx0XHQkaGVhZGVyID0gJCggJzxoZWFkZXIgY2xhc3M9XCJsbG1zLXF1aXotaGVhZGVyXCIgaWQ9XCJsbG1zLXF1aXotaGVhZGVyXCIgLz4nIClcblx0XHRcdFx0JGZvb3RlciA9ICQoICc8Zm9vdGVyIGNsYXNzPVwibGxtcy1xdWl6LW5hdlwiIGlkPVwibGxtcy1xdWl6LW5hdlwiIC8+JyApO1xuXG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uXCIgaWQ9XCJsbG1zLW5leHQtcXVlc3Rpb25cIiBuYW1lPVwibGxtc19uZXh0X3F1ZXN0aW9uXCIgdHlwZT1cInN1Ym1pdFwiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTmV4dCBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uIGxsbXMtYnV0dG9uLXF1aXotY29tcGxldGVcIiBpZD1cImxsbXMtY29tcGxldGUtcXVpelwiIG5hbWU9XCJsbG1zX2NvbXBsZXRlX3F1aXpcIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdDb21wbGV0ZSBRdWl6JyApICsgJzwvYnV0dG9uPicgKTtcblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBsbG1zLWJ1dHRvbi1zZWNvbmRhcnlcIiBpZD1cImxsbXMtcHJldi1xdWVzdGlvblwiIG5hbWU9XCJsbG1zX3ByZXZfcXVlc3Rpb25cIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdQcmV2aW91cyBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cblx0XHRcdCRoZWFkZXIuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcHJvZ3Jlc3NcIj48ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyLWNvbXBsZXRlXCI+PC9kaXY+PC9kaXY+JyApO1xuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LWNvdW50ZXJcIiBpZD1cImxsbXMtcXVpei1jb3VudGVyXCI+PHNwYW4gY2xhc3M9XCJsbG1zLWN1cnJlbnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXNlcFwiPi88L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXRvdGFsXCI+PC9zcGFuPjwvZGl2PicgKVxuXG5cdFx0XHQkaHRtbC5hcHBlbmQoICRoZWFkZXIgKVxuXHRcdFx0XHQgLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlclwiIGlkPVwibGxtcy1xdWl6LXF1ZXN0aW9uLXdyYXBwZXJcIiAvPicgKVxuXHRcdFx0XHQgLmFwcGVuZCggJGZvb3RlciApO1xuXG5cdFx0XHQkKCAnI2xsbXMtcXVpei13cmFwcGVyJyApLmFmdGVyKCAkaHRtbCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFBlcmZvcm0gYWN0aW9ucyBvbiBxdWVzdGlvbiBIVE1MIGFmdGVyIGl0J3MgYmVlbiBhcHBlbmRlZCB0byB0aGUgRE9NXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgZXZlbnQgIGpzIGV2ZW50IG9iamVjdFxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAgICBodG1sICAganMgSFRNTCBvYmplY3Rcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjZcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0cG9zdF9hcHBlbmRfcXVlc3Rpb246IGZ1bmN0aW9uKCBldmVudCwgaHRtbCApIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggaHRtbCApO1xuXG5cdFx0XHRpZiAoICRodG1sLmZpbmQoICdhdWRpbycgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHdwLm1lZGlhZWxlbWVudC5pbml0aWFsaXplKCk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2hvdyBvciBoaWRlIHRoZSBcImxvYWRpbmdcIiBzcGlubmVyIHdpdGggYW4gb3B0aW9uIG1lc3NhZ2Vcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBkaXNwbGF5ICBzaG93fGhpZGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICAgICAgdGV4dCB0byBkaXNwbGF5IHdoZW4gc2hvd2luZ1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHRvZ2dsZV9sb2FkZXI6IGZ1bmN0aW9uKCBkaXNwbGF5LCBtc2cgKSB7XG5cblx0XHRcdGlmICggJ3Nob3cnID09PSBkaXNwbGF5ICkge1xuXG5cdFx0XHRcdG1zZyA9IG1zZyB8fCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZy4uLicgKTtcblxuXHRcdFx0XHR0aGlzLiRidXR0b25zLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblxuXHRcdFx0XHR0aGlzLiRjb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCB0aGlzLiRjb250YWluZXIgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotbG9hZGluZ1wiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCBtc2cgKSArICc8L2Rpdj4nICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoIHRoaXMuJGNvbnRhaW5lciApO1xuXHRcdFx0XHR0aGlzLiRidXR0b25zLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmZpbmQoICcubGxtcy1xdWl6LWxvYWRpbmcnICkucmVtb3ZlKCk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGUgdGhlIHByb2dyZXNzIGJhciBhbmQgdG9nZ2xlIGJ1dHRvbiBhdmFpbGFiaWxpdHkgYmFzZWQgb24gcXVlc3Rpb24gdGhlIHF1ZXN0aW9uIGJlaW5nIHNob3duXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gICAge1t0eXBlXX0gICBxaWQgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcmV0dXJuICAge1t0eXBlXX1cblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9wcm9ncmVzczogZnVuY3Rpb24oIHFpZCApIHtcblxuXHRcdFx0dmFyIGluZGV4ID0gdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHFpZCApLFxuXHRcdFx0XHRwcm9ncmVzcztcblxuXHRcdFx0aWYgKCAtMSA9PT0gaW5kZXggKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aW5kZXgrKztcblxuXHRcdFx0JCggJyNsbG1zLXF1aXotY291bnRlciAubGxtcy1jdXJyZW50JyApLnRleHQoIGluZGV4ICk7XG5cdFx0XHRpZiAoIGluZGV4ID09PSAxICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcXVpei1jb3VudGVyIC5sbG1zLXRvdGFsJyApLnRleHQoIHRoaXMudG90YWxfcXVlc3Rpb25zICk7XG5cdFx0XHRcdCQoICcjbGxtcy1xdWl6LWNvdW50ZXInICkuc2hvdygpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBoYW5kbGUgcHJldiBxdWVzdGlvblxuXHRcdFx0aWYgKCBpbmRleCA+PSAyICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaW5kZXggPT09IHRoaXMudG90YWxfcXVlc3Rpb25zICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uJyApLnNob3coKTtcblx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkuaGlkZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluY3JlYXNlIHByb2dyZXNzIGJhciB1aSBlbGVtZW50XG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZGlyICB1cGRhdGUgZGlyZWN0aW9uIFtpbmNyZW1lbnR8ZGVjcmVtZW50XVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR1cGRhdGVfcHJvZ3Jlc3NfYmFyOiBmdW5jdGlvbiggZGlyICkge1xuXG5cdFx0XHR2YXIgaW5kZXggPSB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggdGhpcy5jdXJyZW50X3F1ZXN0aW9uICk7XG5cdFx0XHRpZiAoICdpbmNyZW1lbnQnID09PSBkaXIgKSB7XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0fVxuXG5cdFx0XHRwcm9ncmVzcyA9ICggaW5kZXggLyB0aGlzLnRvdGFsX3F1ZXN0aW9ucyApICogMTAwO1xuXHRcdFx0dGhpcy4kdWkuZmluZCggJy5wcm9ncmVzcy1iYXItY29tcGxldGUnICkuY3NzKCAnd2lkdGgnLCBwcm9ncmVzcyArICclJyApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEdldCBDb3VudCBEb3duXG5cdFx0ICogQ2FsbGVkIGV2ZXJ5IHNlY29uZCB0byB1cGRhdGUgdGhlIG9uIHNjcmVlbiBjb3VudGRvd24gdGltZXJcblx0XHQgKiBDaGFuZ2VzIGNvbG9yIHRvIHllbGxvdyBhdCAxLzIgb2YgdG90YWwgdGltZVxuXHRcdCAqIENoYW5nZXMgY29sb3IgdG8gcmVkIGF0IDEvNCBvZiB0b3RhbCB0aW1lXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gbWludXRlcyAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tkYXRlXX0gdGFyZ2V0X2RhdGUgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSB0aW1lX2xpbWl0ICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGRheXMgICAgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gaG91cnMgICAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBtaW51dGVzICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IHNlY29uZHMgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gY291bnRkb3duICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEByZXR1cm4gRGlzcGxheXMgdXBkYXRlcyBob3VycywgbWludXRlcyBvbiBxdWl6IHRpbWVyXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDEuMC4wXG5cdFx0ICovXG5cdFx0Z2V0Q291bnRkb3duOiBmdW5jdGlvbiggdG90YWxfbWludXRlcywgdGFyZ2V0X2RhdGUsIHRpbWVfbGltaXQsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBjb3VudGRvd24gKXtcblxuXHRcdFx0Ly8gZmluZCB0aGUgYW1vdW50IG9mIFwic2Vjb25kc1wiIGJldHdlZW4gbm93IGFuZCB0YXJnZXRcblx0XHRcdHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gKCB0YXJnZXRfZGF0ZSAtIGN1cnJlbnRfZGF0ZSApIC8gMTAwMDtcblxuXHRcdFx0aWYgKCBzZWNvbmRzX2xlZnQgPj0gMCApIHtcblxuXHRcdFx0XHRpZiAoICggc2Vjb25kc19sZWZ0ICogMTAwMCApIDwgKCB0aW1lX2xpbWl0IC8gMiApICkge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkuYWRkQ2xhc3MoICdjb2xvci1oYWxmJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICggc2Vjb25kc19sZWZ0ICogMTAwMCApIDwgKCB0aW1lX2xpbWl0IC8gNCApICkge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkucmVtb3ZlQ2xhc3MoICdjb2xvci1oYWxmJyApO1xuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXRpbWVyJyApLmFkZENsYXNzKCAnY29sb3ItZW1wdHknICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRheXMgICAgICAgICA9IHRoaXMucGFkKCBwYXJzZUludCggc2Vjb25kc19sZWZ0IC8gODY0MDAgKSApO1xuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSBzZWNvbmRzX2xlZnQgJSA4NjQwMDtcblx0XHRcdFx0aG91cnMgICAgICAgID0gdGhpcy5wYWQoIHBhcnNlSW50KCBzZWNvbmRzX2xlZnQgLyAzNjAwICkgKTtcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gc2Vjb25kc19sZWZ0ICUgMzYwMDtcblx0XHRcdFx0bWludXRlcyAgICAgID0gdGhpcy5wYWQoIHBhcnNlSW50KCBzZWNvbmRzX2xlZnQgLyA2MCApICk7XG5cdFx0XHRcdHNlY29uZHMgICAgICA9IHRoaXMucGFkKCBwYXJzZUludCggc2Vjb25kc19sZWZ0ICUgNjAgKSApO1xuXG5cdFx0XHRcdC8vIGZvcm1hdCBjb3VudGRvd24gc3RyaW5nICsgc2V0IHRhZyB2YWx1ZVxuXHRcdFx0XHRjb3VudGRvd24uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwiaG91cnNcIj4nICsgaG91cnMgKyAnPC9zcGFuPjo8c3BhbiBjbGFzcz1cIm1pbnV0ZXNcIj4nICsgbWludXRlcyArICc8L3NwYW4+OjxzcGFuIGNsYXNzPVwic2Vjb25kc1wiPicgKyBzZWNvbmRzICsgJzwvc3Bhbj4nO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBQYWQgTnVtYmVyXG5cdFx0ICogcGFkcyBudW1iZXIgd2l0aCAwIGlmIHNpbmdsZSBkaWdpdC5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBuIFtudW1iZXJdXG5cdFx0ICogQHJldHVybiB7W3N0cmluZ119IFtwYWRkZWQgbnVtYmVyXVxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAxLjAuMFxuXHRcdCAqL1xuXHRcdHBhZDogZnVuY3Rpb24obikge1xuXHRcdFx0cmV0dXJuIChuIDwgMTAgPyAnMCcgOiAnJykgKyBuO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBCYXNpYyB2YWxpZGF0aW9uIG1ldGhvZCB3aGljaCBwZXJmb3JtcyBubyB2YWxpZGF0aW9uIGFuZCByZXR1cm5zIGEgdmFsaWRhdGlvbiBvYmplY3Rcblx0XHQgKiBpbiB0aGUgZm9ybWF0IHJlcXVpcmVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuXHRcdCAqXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRxdWVzdGlvbiAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBvYmpcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHZhbGlkYXRlOiBmdW5jdGlvbiggJHF1ZXN0aW9uICkge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0YW5zd2VyOiBbXSxcblx0XHRcdFx0dmFsaWQ6IHRydWUsXG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBWYWxpZGF0ZXMgYSBjaG9pY2UgcXVlc3Rpb24gdG8gZW5zdXJlIHRoZXJlJ3MgYXQgbGVhc3Qgb25lIGNoZWNrZWQgaW5wdXRcblx0XHQgKlxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkcXVlc3Rpb24gIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgb2JqXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR2YWxpZGF0ZV9jaG9pY2U6IGZ1bmN0aW9uKCAkcXVlc3Rpb24gKSB7XG5cblx0XHRcdHZhciByZXQgICAgID0gd2luZG93LmxsbXMucXVpenplcy52YWxpZGF0ZSggJHF1ZXN0aW9uICksXG5cdFx0XHRcdGNoZWNrZWQgPSAkcXVlc3Rpb24uZmluZCggJ2lucHV0OmNoZWNrZWQnICk7XG5cblx0XHRcdGlmICggISBjaGVja2VkLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0LnZhbGlkID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1lvdSBtdXN0IHNlbGVjdCBhbiBhbnN3ZXIgdG8gY29udGludWUuJyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2hlY2tlZC5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXQuYW5zd2VyLnB1c2goICQoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9LFxuXG5cdH07XG5cblx0cXVpei5iaW5kKCk7XG5cblx0d2luZG93LmxsbXMgICAgICAgICA9IHdpbmRvdy5sbG1zIHx8IHt9O1xuXHR3aW5kb3cubGxtcy5xdWl6emVzID0gcXVpejtcblxufSApKCBqUXVlcnkgKTtcbiJdfQ==
