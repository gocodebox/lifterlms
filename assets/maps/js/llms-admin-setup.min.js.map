{"version":3,"sources":["llms-admin-setup.js"],"names":["currStep","document","getElementById","exitLink","querySelector","imports","querySelectorAll","length","submit","msgs","getSelectedImportCount","count","forEach","el","checked","addEventListener","style","display","selectedCount","disabled","textContent","dispatchEvent","Event","e","LLMS","Spinner","start","jQuery","value","window","confirm","dataset","preventDefault"],"mappings":"CAOA,WAEC,IACCA,EAAWC,SAASC,eAAgB,2BACpCC,EAAWF,SAASG,cAAe,oBACnCC,EAAWJ,SAASK,iBAAkB,gDAEvC,GAAKD,EAAQE,OAAS,CAErB,IACCC,EAASP,SAASC,eAAgB,qBAClCO,EAASR,SAASK,iBAAkB,4CASrC,SAASI,IAER,IAAIC,EAAQ,EAQZ,OANAN,EAAQO,QAAS,SAAUC,GACrBA,EAAGC,WACLH,IAIGA,EASRN,EAAQO,QAAS,SAAUC,GAE1BA,EAAGE,iBAAkB,SAAU,WAG9BN,EAAKG,QAAS,SAAUC,GACvBA,EAAGG,MAAMC,QAAU,SAGpB,IAAIC,EAAgBR,IAGpBF,EAAOW,SAAW,IAAMT,IAA2B,WAAa,KAG3D,IAAMQ,EACVT,EAAK,GAAGO,MAAMC,QAAU,QACI,GAAjBC,IACXT,EAAK,GAAGO,MAAMC,QAAU,QACxBhB,SAASC,eAAgB,yBAA0BkB,YAAcF,OAQpEb,EAAQ,GAAGgB,cAAe,IAAIC,MAAO,WAOrCd,EAAOO,iBAAkB,QAAS,SAAUQ,GAC3CC,KAAKC,QAAQC,MAAOC,OAAQnB,GAAU,WAMnCL,GAAY,WAAaH,EAAS4B,OAOtCzB,EAASY,iBAAkB,QAAS,SAAUQ,GACtCM,OAAOC,QAAS3B,EAAS4B,QAAQD,UACvCP,EAAES,mBAzFN","file":"../../js/llms-admin-setup.min.js","sourcesContent":["/**\n * JS from the admin setup wizard\n *\n * @since 4.8.0\n * @version 4.8.0\n */\n\n( function() {\n\n\tvar\n\t\tcurrStep = document.getElementById( 'llms-setup-current-step' ),\n\t\texitLink = document.querySelector( '.llms-exit-setup' ),\n\t\timports  = document.querySelectorAll( 'input[name=\"llms_setup_course_import_ids[]\"]' );\n\n\tif ( imports.length ) {\n\n\t\tvar\n\t\t\tsubmit = document.getElementById( 'llms-setup-submit' ),\n\t\t\tmsgs   = document.querySelectorAll( '.llms-importing-msgs .llms-importing-msg' );\n\n\t\t/**\n\t\t * Retrieve the number of courses to be imported\n\t\t *\n\t\t * @since 4.8.0\n\t\t *\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction getSelectedImportCount() {\n\n\t\t\tvar count = 0;\n\n\t\t\timports.forEach( function( el ) {\n\t\t\t\tif ( el.checked ) {\n\t\t\t\t\t++count;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn count;\n\n\t\t}\n\n\t\t/**\n\t\t * Update UI when a user toggles an import on or off.\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\timports.forEach( function( el ) {\n\n\t\t\tel.addEventListener( 'change', function() {\n\n\t\t\t\t// Hide all messages.\n\t\t\t\tmsgs.forEach( function( el ) {\n\t\t\t\t\tel.style.display = 'none';\n\t\t\t\t} );\n\n\t\t\t\tvar selectedCount = getSelectedImportCount();\n\n\t\t\t\t// If there's no courses to be imported, disable the submit button.\n\t\t\t\tsubmit.disabled = 0 === getSelectedImportCount() ? 'disabled' : null;\n\n\t\t\t\t// Show messages where applicable.\n\t\t\t\tif ( 1 === selectedCount ) {\n\t\t\t\t\tmsgs[0].style.display = 'block';\n\t\t\t\t} else if ( selectedCount >= 2 ) {\n\t\t\t\t\tmsgs[1].style.display = 'block';\n\t\t\t\t\tdocument.getElementById( 'llms-importing-number' ).textContent = selectedCount;\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t// Trigger a change event so the UI displays properly on page load.\n\t\timports[0].dispatchEvent( new Event( 'change' ) );\n\n\t\t/**\n\t\t * Start a spinner when the \"Import Courses\" button is clicked.\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\tsubmit.addEventListener( 'click', function( e ) {\n\t\t\tLLMS.Spinner.start( jQuery( submit ), 'small' );\n\t\t} );\n\n\t}\n\n\n\tif ( exitLink && 'finish' !== currStep.value ) {\n\n\t\t/**\n\t\t * When users click \"Exit Setup\" prior to setup completion, open a confirmation dialog\n\t\t *\n\t\t * @since 4.8.0\n\t\t */\n\t\texitLink.addEventListener( 'click', function( e ) {\n\t\t\tif ( ! window.confirm( exitLink.dataset.confirm ) ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t} );\n\n\t}\n\n} )();\n"],"sourceRoot":"../../js"}