{"version":3,"sources":["llms-notifications.js"],"names":["$","window","llms","notifications","self","this","init","is_user_logged_in","queued_notifications","queue","show_all","on","dismiss","closest","new_notis","n","hasOwnProperty","notification_exists","id","push","$el","removeClass","setTimeout","reposition","next","noti","get_offset","$relative_el","last","offset","top","outerHeight","has_notifications","hasClass","$start_el","$next_el","selector","length","first","css","prevAll","interval","i","setInterval","shown","show_one","clearInterval","$html","html","find","e","preventDefault","$this","location","attr","append","addClass","jQuery"],"mappings":"CAKG,SAAYA,GA6QdC,OAAOC,KAAqBD,OAAOC,MAAQ,GAC3CD,OAAOC,KAAKC,cAAgB,IA5QH,WAExB,IAAIC,EAAgBC,KACnBF,EAAgB,GAoQjB,OA9OAE,KAAKC,KAAO,WAIJD,KAAKE,sBAIPN,OAAOC,KAAKM,uBANNH,KAOLI,MAAOR,OAAOC,KAAKM,sBAPdH,KAQLK,YAtBNV,EAAG,QAASW,GAAI,QAAS,6BAA8B,WACtDP,EAAKQ,QAASZ,EAAGK,MAAOQ,QAAS,2BAoCnCR,KAAKI,MAAQ,SAAUK,GAItB,IAAM,IAAIC,KAAKD,EAEPA,EAAUE,eAAgBD,KAK5B,IATKV,KASUY,oBAAqBH,EAAWC,GAAIG,KAEvDf,EAAcgB,KAAML,EAAWC,KAgBlCV,KAAKO,QAAU,SAAUQ,GACxB,IAAIhB,EAAOC,KACXe,EAAIC,YAAa,WACjBC,WAAY,WACXlB,EAAKmB,WAAYH,EAAII,KAAM,gCACzB,KAWJnB,KAAKY,oBAAsB,SAAUC,GAEpC,IAAM,IAAIO,KAAQtB,EAEjB,GAAOA,EAAca,eAAgBS,IAIhCP,IAAOf,EAAesB,GAAOP,GACjC,OAAOO,EAKT,OAAO,GAaRpB,KAAKqB,WAAa,SAAUC,GAQ3B,OAHCA,EADMA,GACS3B,EAAG,8BAA+B4B,QAG9BC,SAIPF,EAAaE,SAASC,IACzBH,EAAaI,cAXV,GAOL,IAiBT1B,KAAK2B,kBAAoB,WACxB,OAAS7B,EAAqB,QAU/BE,KAAKE,kBAAoB,WACxB,OAAOP,EAAG,QAASiC,SAAU,cAW9B5B,KAAKkB,WAAa,SAAUW,GAE3B,IAECC,EAFG/B,EAAWC,KACd+B,EAAW,6BAGLF,EAAUG,SAChBH,EAAYlC,EAAGoC,GAAWE,SAG3BJ,EAAUK,IAAK,MAAOnC,EAAKsB,WAAYQ,EAAUM,QAASJ,GAAWE,WAErEH,EAAWD,EAAUV,KAAMY,IACbC,QACbf,WAAY,WACXlB,EAAKmB,WAAYY,IACf,MAYL9B,KAAKK,SAAW,WAEf,IAEC+B,EAFGrC,EAAOC,KACVqC,EAAO,EAGRD,EAAWE,YAAa,WAElBD,EAAIvC,EAAckC,QAEflC,EAAeuC,GAAIE,QACzBzC,EAAeuC,GAAIE,OAAQ,EAC3BxC,EAAKyC,SAAU1C,EAAeuC,KAE/BA,KAIAI,cAAeL,IAId,MAYJpC,KAAKwC,SAAW,SAAU9B,GAEzB,IAAIX,EAAQC,KACX0C,EAAQ/C,EAAGe,EAAEiC,MAEdD,EAAME,KAAM,KAAMtC,GAAI,QAAS,SAAUuC,GACxCA,EAAEC,iBACF,IAAIC,EAAcpD,EAAGK,MACrBJ,OAAOoD,SAAWD,EAAME,KAAM,UAG/BtD,EAAG,QAASuD,OAAQR,GACpBA,EAAMR,IAAK,MAAOnC,EAAKsB,cAEvBJ,WAAY,WACXyB,EAAMS,SAAU,YACd,GAGET,EAAMO,KAAM,sBAChBhC,WAAY,WACXlB,EAAKQ,QAASmC,IACZA,EAAMO,KAAM,uBAMjBjD,KAAKC,OAEED,MAzQN,CAgREoD","file":"../../js/llms-notifications.min.js","sourcesContent":[";/**\n * LifterLMS Basic Notifications Displayer\n *\n * @since    3.8.0\n * @version  3.22.0\n */( function( $ ) {\n\n\tvar llms_notifications = function() {\n\n\t\tvar self          = this,\n\t\t\tnotifications = [];\n\n\t\t/**\n\t\t * Bind dom events\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tfunction bind_events() {\n\t\t\t$( 'body' ).on( 'click', '.llms-notification-dismiss', function() {\n\t\t\t\tself.dismiss( $( this ).closest( '.llms-notification' ) );\n\t\t\t} );\n\t\t};\n\n\t\t/**\n\t\t * Initialize\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.22.0\n\t\t */\n\t\tthis.init = function() {\n\n\t\t\tvar self = this;\n\n\t\t\tif ( ! this.is_user_logged_in() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( window.llms.queued_notifications ) {\n\t\t\t\tself.queue( window.llms.queued_notifications );\n\t\t\t\tself.show_all();\n\t\t\t}\n\n\t\t\tbind_events();\n\n\t\t};\n\n\t\t/**\n\t\t * Queue notifications to be displayed\n\t\t *\n\t\t * @param    object   new_notis  array of notifications\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.queue = function( new_notis ) {\n\n\t\t\tvar self = this;\n\n\t\t\tfor ( var n in new_notis ) {\n\n\t\t\t\tif ( ! new_notis.hasOwnProperty( n ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// add the new notification if it doesnt exist\n\t\t\t\tif ( false === self.notification_exists( new_notis[ n ].id ) ) {\n\n\t\t\t\t\tnotifications.push( new_notis[ n ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Dismiss a notification\n\t\t *\n\t\t * @param    obj   $el  notification dom element\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.22.0\n\t\t */\n\t\tthis.dismiss = function( $el ) {\n\t\t\tvar self = this;\n\t\t\t$el.removeClass( 'visible' );\n\t\t\tsetTimeout( function() {\n\t\t\t\tself.reposition( $el.next( '.llms-notification.visible' ) );\n\t\t\t}, 10 );\n\t\t};\n\n\t\t/**\n\t\t * Determine if a notification already exists in the notifications array\n\t\t *\n\t\t * @param    int        id  notification id\n\t\t * @return   int|false      index of the notification in the array OR false if not found\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.notification_exists = function( id ) {\n\n\t\t\tfor ( var noti in notifications ) {\n\n\t\t\t\tif ( ! notifications.hasOwnProperty( noti ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif ( id === notifications[ noti ].id ) {\n\t\t\t\t\treturn noti;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t\t/**\n\t\t * Get the vertical offset (on screen) relative to an element\n\t\t * used for notification positioning\n\t\t *\n\t\t * @param    obj   $relative_el  element to get an offset relative to\n\t\t * @return   int\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.get_offset = function( $relative_el ) {\n\n\t\t\tvar spacer = 12;\n\n\t\t\tif ( ! $relative_el ) {\n\t\t\t\t$relative_el = $( '.llms-notification.visible' ).last()\n\t\t\t}\n\n\t\t\tif ( ! $relative_el.offset() ) {\n\t\t\t\treturn 24;\n\t\t\t}\n\n\t\t\tvar top    = $relative_el.offset().top,\n\t\t\t\theight = $relative_el.outerHeight();\n\n\t\t\treturn top + height + spacer;\n\n\t\t};\n\n\t\t/**\n\t\t * Determine if there are notifications to show\n\t\t *\n\t\t * @return   Boolean\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.has_notifications = function() {\n\t\t\treturn ( notifications.length );\n\t\t};\n\n\t\t/**\n\t\t * Determine if a user is logged in\n\t\t *\n\t\t * @return   boolean\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.is_user_logged_in = function() {\n\t\t\treturn $( 'body' ).hasClass( 'logged-in' );\n\t\t};\n\n\t\t/**\n\t\t * Reposition elements, starting with the specified element\n\t\t *\n\t\t * @param    obj   $start_el  element to start repositioning with\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.reposition = function( $start_el ) {\n\n\t\t\tvar self     = this,\n\t\t\t\tselector = '.llms-notification.visible',\n\t\t\t\t$next_el;\n\n\t\t\tif ( ! $start_el.length ) {\n\t\t\t\t$start_el = $( selector ).first();\n\t\t\t}\n\n\t\t\t$start_el.css( 'top', self.get_offset( $start_el.prevAll( selector ).first() ) );\n\n\t\t\t$next_el = $start_el.next( selector );\n\t\t\tif ( $next_el.length ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tself.reposition( $next_el );\n\t\t\t\t}, 150 );\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Show all queued notifications\n\t\t *\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.8.0\n\t\t */\n\t\tthis.show_all = function() {\n\n\t\t\tvar self = this,\n\t\t\t\ti    = 0,\n\t\t\t\tinterval;\n\n\t\t\tinterval = setInterval( function() {\n\n\t\t\t\tif ( i < notifications.length ) {\n\n\t\t\t\t\tif ( ! notifications[ i ].shown ) {\n\t\t\t\t\t\tnotifications[ i ].shown = true;\n\t\t\t\t\t\tself.show_one( notifications[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\ti++;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tclearInterval( interval );\n\n\t\t\t\t}\n\n\t\t\t}, 100 );\n\n\t\t}\n\n\t\t/**\n\t\t * Show a single notification\n\t\t *\n\t\t * @param    object   n  notification object data\n\t\t * @return   void\n\t\t * @since    3.8.0\n\t\t * @version  3.22.0\n\t\t */\n\t\tthis.show_one = function( n ) {\n\n\t\t\tvar self  = this,\n\t\t\t\t$html = $( n.html );\n\n\t\t\t$html.find( 'a' ).on( 'click', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar $this       = $( this );\n\t\t\t\twindow.location = $this.attr( 'href' );\n\t\t\t} );\n\n\t\t\t$( 'body' ).append( $html );\n\t\t\t$html.css( 'top', self.get_offset() );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\t$html.addClass( 'visible' );\n\t\t\t}, 1 );\n\n\t\t\t// if it's auto dismissing, set up a dismissal\n\t\t\tif ( $html.attr( 'data-auto-dismiss' ) ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tself.dismiss( $html );\n\t\t\t\t}, $html.attr( 'data-auto-dismiss' ) );\n\t\t\t}\n\n\t\t}\n\n\t\t// initialize\n\t\tthis.init();\n\n\t\treturn this;\n\n\t};\n\n\twindow.llms               = window.llms || {};\n\twindow.llms.notifications = new llms_notifications();\n\n} )( jQuery );\n"],"sourceRoot":"../../js"}